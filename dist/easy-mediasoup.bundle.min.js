!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.EasyMediasoup=e()}}(function(){var e;return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/classCallCheck"),i=n(o),a=e("babel-runtime/helpers/createClass"),s=n(a),c=e("debug"),u=n(c),l="mediasoup",d=function(){function e(r){(0,i.default)(this,e),r?(this._debug=(0,u.default)(l+":"+r),this._warn=(0,u.default)(l+":WARN:"+r),this._error=(0,u.default)(l+":ERROR:"+r)):(this._debug=(0,u.default)(l),this._warn=(0,u.default)(l+":WARN"),this._error=(0,u.default)(l+":ERROR")),this._debug.enabled=!1,t.debug_mode?this._debug.enabled=!0:(this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console))}return(0,s.default)(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();r.default=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/classCallCheck":47,"babel-runtime/helpers/createClass":48,debug:156}],2:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var i=e("babel-runtime/core-js/get-iterator"),a=o(i),s=e("babel-runtime/helpers/extends"),c=o(s),u=e("babel-runtime/core-js/array/from"),l=o(u),d=e("babel-runtime/core-js/promise"),f=o(d),p=e("babel-runtime/core-js/map"),h=o(p),m=e("babel-runtime/helpers/classCallCheck"),v=o(m),y=e("babel-runtime/helpers/createClass"),g=o(y),b=e("protoo-client"),_=o(b),w=e("mediasoup-client"),k=n(w),P=e("./Logger"),x=o(P),S=e("./urlFactory"),E=e("./redux/requestActions"),T=n(E),C=e("./redux/stateActions"),R=n(C),j=e("requestify"),O=(o(j),e("axios")),A=(o(O),e("msr")),D=(o(A),new x.default("RoomClient")),I={requestTimeout:1e4,transportOptions:{tcp:!1}},M={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},hd:{width:{ideal:1280},height:{ideal:720}}},N={low:1e5,medium:3e5,high:15e5},L=[],F=[],U=function(){function e(t){var r=t.media_server_wss,n=t.roomId,o=t.peerName,i=t.displayName,a=t.device,s=t.useSimulcast,c=(t.produce,t.dispatch),u=t.getState,l=t.turnservers,d=t.args;(0,v.default)(this,e),D.debug('constructor() [roomId:"%s", peerName:"%s", displayName:"%s", device:%s]',n,o,i,a.flag);var f=(0,S.getProtooUrl)(r,o,n),p=new _.default.WebSocketTransport(f);L=0!=d.video_constrains.length?d.video_constrains:M,F=0!=d.simulcast_options.length?d.simulcast_options:N,this.initially_muted=d.initially_muted,this.is_audio_initialized=!1,this._is_webcam_enabled=!0,this._is_audio_enabled=!this.initially_muted,this._is_screenshare_enabled=!0,this._screenStreamId=null,this._closed=!1,this._produce=d.produce,this._useSimulcast=s,this._dispatch=c,this._getState=u,this._peerName=o,this._protoo=new _.default.Peer(p),I.turnServers=l,this._room=new k.Room(I),this._storage=window.localStorage,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._videoRecorder=null,this._audioRecorder=null,this._recordState="inactive",this._recordIntervalFunc=null,this._screenShareProducer=null,this._webcams=new h.default,this._mics=new h.default,this._webcam={device:null,resolution:"hd"},this._mic=null,this._recordWorker,this._join({displayName:i,device:a})}return(0,g.default)(e,[{key:"close",value:function(){var e=this;this._closed||(this._closed=!0,D.debug("close()"),this._room.producers.forEach(function(e){e.track.stop()}),this._room.leave(),setTimeout(function(){return e._protoo.close()},250),this._dispatch(R.setRoomState("closed")))}},{key:"changeDisplayName",value:function(e){var t=this;return D.debug('changeDisplayName() [displayName:"%s"]',e),this._protoo.send("change-display-name",{displayName:e}).then(function(){t._dispatch(R.setDisplayName(e)),t._dispatch(T.notify({text:"Display name changed"}))}).catch(function(e){D.error("changeDisplayName() | failed: %o",e),t._dispatch(T.notify({type:"error",text:"Could not change display name: "+e})),t._dispatch(R.setDisplayName())})}},{key:"muteMic",value:function(){D.debug("muteMic()"),this._is_audio_enabled=!1,this._micProducer.pause()}},{key:"unmuteMic",value:function(){D.debug("unmuteMic()"),this._is_audio_enabled=!0,this._micProducer?this._micProducer.resume():this._setMicProducer()}},{key:"enableWebcam",value:function(){D.debug("enableWebcam()"),this._is_webcam_enabled=!0,this._activateWebcam()}},{key:"setScreenShare",value:function(e){console.log("setScreenShare()"),this._screenStreamId=e,this._screenShareProducer?this._changeScreenForShare():this._activateScreenShare()}},{key:"deactivateScreenShare",value:function(){return console.log("deactivateScreenShare()"),this._screenShareProducer?(this._screenShareProducer=null,!0):(console.log("Error! Screen share producer doesn't exist"),!1)}},{key:"_activateScreenShare",value:function(){var e=this;return D.debug("activateScreenShare()"),this._dispatch(R.setScreenShareInProgress(!0)),f.default.resolve().then(function(){return e._setScreenShareProducer()}).then(function(){e._dispatch(R.setScreenShareInProgress(!1))}).catch(function(t){D.error("activateWebcam() | failed: %o",t),e._dispatch(R.setScreenShareInProgress(!1))})}},{key:"_activateMic",value:function(){var e=this;return D.debug("activateMic()"),this._dispatch(R.setMicInProgress(!0)),f.default.resolve().then(function(){return e._updateMics()}).then(function(){return e._setMicProducer()}).then(function(){e._dispatch(R.setMicInProgress(!1))}).catch(function(t){D.error("activateWebcam() | failed: %o",t),e._dispatch(R.setMicInProgress(!1))})}},{key:"_activateWebcam",value:function(){var e=this;return D.debug("activateWebcam()"),this._dispatch(R.setWebcamInProgress(!0)),f.default.resolve().then(function(){return e._updateWebcams()}).then(function(){return e._setWebcamProducer()}).then(function(){e._dispatch(R.setWebcamInProgress(!1))}).catch(function(t){D.error("activateWebcam() | failed: %o",t),e._dispatch(R.setWebcamInProgress(!1))})}},{key:"disableWebcam",value:function(){D.debug("disableWebcam()"),this._is_webcam_enabled=!1,this._deactivateWebcam()}},{key:"_deactivateWebcam",value:function(){var e=this;return D.debug("deactivateWebcam()"),this._dispatch(R.setWebcamInProgress(!0)),f.default.resolve().then(function(){e._webcamProducer.close(),e._dispatch(R.setWebcamInProgress(!1))}).catch(function(t){D.error("deactivateWebcam() | failed: %o",t),e._dispatch(R.setWebcamInProgress(!1))})}},{key:"changeWebcam",value:function(){var e=this;return D.debug("changeWebcam()"),this._is_webcam_enabled=!0,this._dispatch(R.setWebcamInProgress(!0)),f.default.resolve().then(function(){return e._updateWebcams()}).then(function(){var t=(0,l.default)(e._webcams.keys()),r=t.length,n=e._webcam.device?e._webcam.device.deviceId:void 0,o=t.indexOf(n);o<r-1?o++:o=0,e._webcam.device=e._webcams.get(t[o]),D.debug("changeWebcam() | new selected webcam [device:%o]",e._webcam.device),e._webcam.resolution="hd"}).then(function(){var t=e._webcam,r=t.device,n=t.resolution;if(!r)throw new Error("no webcam devices");return D.debug("changeWebcam() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia((0,c.default)({deviceId:{exact:r.deviceId},audio:!1},L[n],{video:!0}))}).then(function(t){var r=t.getVideoTracks()[0];return e._webcamProducer.replaceTrack(r).then(function(e){return r.stop(),e})}).then(function(t){e._dispatch(R.setProducerTrack(e._webcamProducer.id,t)),e._dispatch(R.setWebcamInProgress(!1))}).catch(function(t){D.error("changeWebcam() failed: %o",t),e._dispatch(R.setWebcamInProgress(!1))})}},{key:"setWebcamResulution",value:function(e){var t=this;D.debug("setWebcamResulution()");var r=void 0,n=void 0;return this._dispatch(R.setWebcamInProgress(!0)),f.default.resolve().then(function(){r=t._webcam.resolution,n=e,t._webcam.resolution=n}).then(function(){var e=t._webcam,r=e.device,n=e.resolution;return D.debug("setWebcamResulution() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia((0,c.default)({deviceId:{exact:r.deviceId},audio:!1},L[n],{video:!0}))}).then(function(e){var r=e.getVideoTracks()[0];return t._webcamProducer.replaceTrack(r).then(function(e){return r.stop(),e})}).then(function(e){t._dispatch(R.setProducerTrack(t._webcamProducer.id,e)),t._dispatch(R.setWebcamInProgress(!1))}).catch(function(e){D.error("changeWebcamResolution() failed: %o",e),t._dispatch(R.setWebcamInProgress(!1)),t._webcam.resolution=r})}},{key:"changeWebcamResolution",value:function(){var e=this;D.debug("changeWebcamResolution()");var t=void 0,r=void 0;return this._dispatch(R.setWebcamInProgress(!0)),f.default.resolve().then(function(){switch(t=e._webcam.resolution){case"qvga":r="vga";break;case"vga":r="hd";break;case"hd":r="qvga"}e._webcam.resolution=r}).then(function(){var t=e._webcam,r=t.device,n=t.resolution;return D.debug("changeWebcamResolution() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia((0,c.default)({deviceId:{exact:r.deviceId},audio:!1},L[n],{video:!0}))}).then(function(t){var r=t.getVideoTracks()[0];return e._webcamProducer.replaceTrack(r).then(function(e){return r.stop(),e})}).then(function(t){e._dispatch(R.setProducerTrack(e._webcamProducer.id,t)),e._dispatch(R.setWebcamInProgress(!1))}).catch(function(r){D.error("changeWebcamResolution() failed: %o",r),e._dispatch(R.setWebcamInProgress(!1)),e._webcam.resolution=t})}},{key:"enableAudioOnly",value:function(){var e=this;return D.debug("enableAudioOnly()"),this._dispatch(R.setAudioOnlyInProgress(!0)),f.default.resolve().then(function(){e._webcamProducer&&e._webcamProducer.close();var t=!0,r=!1,n=void 0;try{for(var o,i=(0,a.default)(e._room.peers);!(t=(o=i.next()).done);t=!0){var s=o.value,c=!0,u=!1,l=void 0;try{for(var d,f=(0,a.default)(s.consumers);!(c=(d=f.next()).done);c=!0){var p=d.value;"video"===p.kind&&p.pause("audio-only-mode")}}catch(e){u=!0,l=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw l}}}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}e._dispatch(R.setAudioOnlyState(!0)),e._dispatch(R.setAudioOnlyInProgress(!1))}).catch(function(t){D.error("enableAudioOnly() failed: %o",t),e._dispatch(R.setAudioOnlyInProgress(!1))})}},{key:"disableAudioOnly",value:function(){var e=this;return D.debug("disableAudioOnly()"),this._dispatch(R.setAudioOnlyInProgress(!0)),f.default.resolve().then(function(){if(!e._webcamProducer&&e._room.canSend("video"))return e._activateWebcam()}).then(function(){var t=!0,r=!1,n=void 0;try{for(var o,i=(0,a.default)(e._room.peers);!(t=(o=i.next()).done);t=!0){var s=o.value,c=!0,u=!1,l=void 0;try{for(var d,f=(0,a.default)(s.consumers);!(c=(d=f.next()).done);c=!0){var p=d.value;"video"===p.kind&&p.supported&&p.resume()}}catch(e){u=!0,l=e}finally{try{!c&&f.return&&f.return()}finally{if(u)throw l}}}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}e._dispatch(R.setAudioOnlyState(!1)),e._dispatch(R.setAudioOnlyInProgress(!1))}).catch(function(t){D.error("disableAudioOnly() failed: %o",t),e._dispatch(R.setAudioOnlyInProgress(!1))})}},{key:"restartIce",value:function(){var e=this;return D.debug("restartIce()"),this._dispatch(R.setRestartIceInProgress(!0)),f.default.resolve().then(function(){e._room.restartIce(),setTimeout(function(){e._dispatch(R.setRestartIceInProgress(!1))},500)}).catch(function(t){D.error("restartIce() failed: %o",t),e._dispatch(R.setRestartIceInProgress(!1))})}},{key:"_join",value:function(e){var t=this,r=e.displayName,n=e.device;this._dispatch(R.setRoomState("connecting")),this._protoo.on("open",function(){D.debug('protoo Peer "open" event'),"joined"!=t._room._state&&t._joinRoom({displayName:r,device:n})}),this._protoo.on("disconnected",function(){D.warn('protoo Peer "disconnected" event'),t._dispatch(T.notify({type:"error",text:"WebSocket disconnected"}));try{t._room.remoteClose({cause:"protoo disconnected"})}catch(e){}t._dispatch(R.setRoomState("connecting"))}),this._protoo.on("close",function(){t._closed||(D.warn('protoo Peer "close" event'),"joined"!=t._room._state&&t.close())}),this._protoo.on("request",function(e,r,n){switch(D.debug("_handleProtooRequest() [method:%s, data:%o]",e.method,e.data),e.method){case"mediasoup-notification":r();var o=e.data;t._room.receiveNotification(o);break;case"active-speaker":r();var i=e.data.peerName;t._dispatch(R.setRoomActiveSpeaker(i));break;case"display-name-changed":r();var a=e.data,s=a.peerName,c=a.displayName,u=a.oldDisplayName,l=t._room.getPeerByName(s);if(!l){D.error("peer not found");break}l.appData.displayName=c,t._dispatch(R.setPeerDisplayName(c,s)),t._dispatch(T.notify({text:u+" is now "+c}));break;default:D.error('unknown protoo method "%s"',e.method),n(404,"unknown method")}})}},{key:"_joinRoom",value:function(e){var t=this,r=e.displayName,n=e.device;D.debug("_joinRoom()"),this._room.removeAllListeners(),this._room.on("close",function(e,r){if("remote"===e)return D.warn("mediasoup Peer/Room remotely closed [appData:%o]",r),void t._dispatch(R.setRoomState("closed"))}),this._room.on("request",function(e,r,n){D.debug("sending mediasoup request [method:%s]:%o",e.method,e),t._protoo.send("mediasoup-request",e).then(r).catch(n)}),this._room.on("notify",function(e){D.debug("sending mediasoup notification [method:%s]:%o",e.method,e),t._protoo.send("mediasoup-notification",e).catch(function(e){D.warn("could not send mediasoup notification:%o",e)})}),this._room.on("newpeer",function(e){D.debug('room "newpeer" event [name:"%s", peer:%o]',e.name,e),t._handlePeer(e)}),this._room.join(this._peerName,{displayName:r,device:n}).then(function(){t._sendTransport=t._room.createTransport("send",{media:"SEND_MIC_WEBCAM"}),t._sendTransport.on("close",function(e){D.debug('Transport "close" event [originator:%s]',e)}),t._recvTransport=t._room.createTransport("recv",{media:"RECV"}),t._recvTransport.on("close",function(e){D.debug('receiving Transport "close" event [originator:%s]',e)})}).then(function(){t._dispatch(R.setMediaCapabilities({canSendMic:t._room.canSend("audio"),canSendWebcam:t._room.canSend("video")}))}).then(function(){if(!t._produce)return 0;f.default.resolve().then(function(){t._room.canSend("audio")&&t._activateMic()}).then(function(){t._room.canSend("video")&&t._activateWebcam()})}).then(function(){t._dispatch(R.setRoomState("connected")),t._dispatch(R.removeAllNotifications()),t._dispatch(T.notify({text:"You are in the room",timeout:5e3}));var e=t._room.peers,r=!0,n=!1,o=void 0;try{for(var i,s=(0,a.default)(e);!(r=(i=s.next()).done);r=!0){var c=i.value;t._handlePeer(c,{notify:!1})}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}).catch(function(e){D.error("_joinRoom() failed:%o",e),t._dispatch(T.notify({type:"error",text:"Could not join the room: "+e.toString()})),t.close()})}},{key:"_setMicProducer",value:function(){var e=this;if(!this._produce)return 0;if(!this._room.canSend("audio"))return f.default.reject(new Error("cannot send audio"));if(this._micProducer)return f.default.reject(new Error("mic Producer already exists"));var t=void 0;return this._micProducer?this._micProducer:f.default.resolve().then(function(){return D.debug("_setMicProducer() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia({audio:{deviceId:e._mic.deviceId?{exact:e._mic.deviceId}:void 0},video:!1})}).then(function(r){var n=r.getAudioTracks()[0];return t=e._room.createProducer(n,null,{source:"mic"}),e._is_audio_enabled||(t.pause(),e.is_audio_initialized=!0),n.stop(),t.send(e._sendTransport)}).then(function(){e._micProducer=t,e._dispatch(R.addProducer({id:t.id,source:"mic",locallyPaused:t.locallyPaused,remotelyPaused:t.remotelyPaused,track:t.track,codec:t.rtpParameters.codecs[0].name})),t.on("close",function(r){D.debug('mic Producer "close" event [originator:%s]',r),e._micProducer=null,e._dispatch(R.removeProducer(t.id))}),t.on("pause",function(r){D.debug('mic Producer "pause" event [originator:%s]',r),e._dispatch(R.setProducerPaused(t.id,r))}),t.on("resume",function(r){D.debug('mic Producer "resume" event [originator:%s]',r),e._dispatch(R.setProducerResumed(t.id,r))}),t.on("handled",function(){D.debug('mic Producer "handled" event')}),t.on("unhandled",function(){D.debug('mic Producer "unhandled" event')})}).then(function(){D.debug("_setMicProducer() succeeded")}).catch(function(r){throw D.error("_setMicProducer() failed:%o",r),e._dispatch(T.notify({text:"Mic producer failed: "+r.name+":"+r.message})),t&&t.close(),r})}},{key:"_setWebcamProducer",value:function(){var e=this;if(!this._produce)return 0;if(!this._is_webcam_enabled)return 0;if(this._webcamProducer)return f.default.reject(new Error("webcam Producer already exists"));var t=void 0;return this._room._webcamProducer?this._room._webcamProducer:f.default.resolve().then(function(){var t=e._webcam,r=t.device,n=t.resolution;if(!r)throw new Error("no webcam devices");return D.debug("_setWebcamProducer() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia((0,c.default)({deviceId:{exact:r.deviceId},audio:!1},L[n],{video:!0}))}).then(function(r){var n=r.getVideoTracks()[0];return t=e._room.createProducer(n,{simulcast:!!e._useSimulcast&&F},{source:"webcam"}),n.stop(),t.send(e._sendTransport)}).then(function(){e._webcamProducer=t;var r=e._webcam.device;e._dispatch(R.addProducer({id:t.id,source:"webcam",deviceLabel:r.label,type:e._getWebcamType(r),locallyPaused:t.locallyPaused,remotelyPaused:t.remotelyPaused,track:t.track,codec:t.rtpParameters.codecs[0].name})),t.on("close",function(r){D.debug('webcam Producer "close" event [originator:%s]',r),e._webcamProducer=null,e._dispatch(R.removeProducer(t.id))}),t.on("pause",function(r){D.debug('webcam Producer "pause" event [originator:%s]',r),e._dispatch(R.setProducerPaused(t.id,r))}),t.on("resume",function(r){D.debug('webcam Producer "resume" event [originator:%s]',r),e._dispatch(R.setProducerResumed(t.id,r))}),t.on("handled",function(){D.debug('webcam Producer "handled" event')}),t.on("unhandled",function(){D.debug('webcam Producer "unhandled" event')})}).then(function(){D.debug("_setWebcamProducer() succeeded")}).catch(function(r){throw D.error("_setWebcamProducer() failed:%o",r),e._dispatch(T.notify({text:"Webcam producer failed: "+r.name+":"+r.message})),t&&t.close(),r})}},{key:"_changeScreenForShare",value:function(){var e=this;return D.debug("_changeScreenForShare()"),this._is_screenshare_enabled=!0,this._dispatch(R.setScreenShareInProgress(!0)),f.default.resolve().then(function(){return D.debug("_changeScreenForShare() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e._screenStreamId,maxWidth:1280,maxHeight:720}}})}).then(function(t){var r=t.getVideoTracks()[0];return e._screenShareProducer.replaceTrack(r).then(function(e){return r.stop(),e})}).then(function(t){e._dispatch(R.setProducerTrack(e._screenShareProducer.id,t)),e._dispatch(R.setScreenShareInProgress(!1))}).catch(function(t){D.error("_changeScreenForShare() failed: %o",t),e._dispatch(R.setScreenShareInProgress(!1))})}},{key:"_setScreenShareProducer",value:function(){var e=this;if(!this._is_screenshare_enabled)return 0;if(this._screenShareProducer)return f.default.reject(new Error("screenshare Producer already exists"));var t=void 0;return f.default.resolve().then(function(){return D.debug("_setScreenShareProducer() | calling getUserMedia()"),navigator.mediaDevices.getUserMedia({audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e._screenStreamId,maxWidth:1280,maxHeight:720}}})}).then(function(r){var n=r.getVideoTracks()[0];return t=e._room.createProducer(n,{simulcast:!!e._useSimulcast&&F},{source:"screen"}),n.stop(),t.send(e._sendTransport)}).then(function(){e._screenShareProducer=t,e._dispatch(R.addProducer({id:t.id,source:"screen",locallyPaused:t.locallyPaused,remotelyPaused:t.remotelyPaused,track:t.track,codec:t.rtpParameters.codecs[0].name})),t.on("close",function(r){D.debug('screenshare Producer "close" event [originator:%s]',r),e._screenShareProducer=null,e._dispatch(R.removeProducer(t.id))}),t.on("pause",function(r){D.debug('screenshare Producer "pause" event [originator:%s]',r),e._dispatch(R.setProducerPaused(t.id,r))}),t.on("resume",function(r){D.debug('screenshare Producer "resume" event [originator:%s]',r),e._dispatch(R.setProducerResumed(t.id,r))}),t.on("handled",function(){D.debug('screenshare Producer "handled" event')}),t.on("unhandled",function(){D.debug('screenshare Producer "unhandled" event')})}).then(function(){D.debug("_setScreenShareProducer() succeeded")}).catch(function(r){throw D.error("_setScreenShareProducer() failed:%o",r),e._dispatch(T.notify({text:"screenshare Producer failed: "+r.name+":"+r.message})),t&&t.close(),r})}},{key:"setDevice",value:function(e){var t=this;return e?"audioinput"===e.kind?f.default.resolve().then(function(){t._dispatch(R.setMicInProgress(!0))}).then(function(){return t._mic=e,navigator.mediaDevices.getUserMedia({audio:{deviceId:t._mic.deviceId?{exact:t._mic.deviceId}:void 0},video:!1})}).then(function(e){var r=e.getAudioTracks()[0];return t._micProducer.replaceTrack(r).then(function(e){return r.stop(),e})}).then(function(e){t._dispatch(R.setProducerTrack(t._micProducer.id,e)),t._dispatch(R.setMicInProgress(!1))}).catch(function(e){console.log(e)}):"videoinput"===e.kind?f.default.resolve().then(function(){t._dispatch(R.setWebcamInProgress(!0))}).then(function(){return t._webcam.device=e,navigator.mediaDevices.getUserMedia((0,c.default)({deviceId:t._webcam.device.deviceId?{exact:t._webcam.webcam.deviceId}:void 0,audio:!1},L[resolution],{video:!0}))}).then(function(e){var r=e.getVideoTracks()[0];return t._webcamProducer.replaceTrack(r).then(function(e){return r.stop(),e})}).then(function(e){t._dispatch(R.setProducerTrack(t._webcamProducer.id,e)),t._dispatch(R.setWebcamInProgress(!1))}).catch(function(e){console.log(e)}):f.default.reject(new Error("setDevice error: wrong type of device!")):f.default.reject(new Error("setDevice error: no device provided!"))}},{key:"_updateWebcams",value:function(){var e=this;return D.debug("_updateWebcams()"),this._webcams=new h.default,f.default.resolve().then(function(){return D.debug("_updateWebcams() | calling enumerateDevices()"),navigator.mediaDevices.enumerateDevices()}).then(function(t){var r=!0,n=!1,o=void 0;try{for(var i,s=(0,a.default)(t);!(r=(i=s.next()).done);r=!0){var c=i.value;"videoinput"===c.kind&&e._webcams.set(c.deviceId,c)}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}).then(function(){var t=e._storage.getItem("training-space-video-output-device-id"),r=(0,l.default)(e._webcams.values());if(e._webcams.has(t))return console.log("Обнаружена камера с ID:"+t+" в localStorage"),void(e._webcam.device=e._webcams.get(t));var n=r.length,o=e._webcam.device?e._webcam.device.deviceId:void 0;D.debug("_updateWebcams() [webcams:%o]",r),0===n?e._webcam.device=null:e._webcams.has(o)||(e._webcam.device=r[0]),e._dispatch(R.setCanChangeWebcam(e._webcams.size>=2))})}},{key:"_updateMics",value:function(){var e=this;return D.debug("_updateMics()"),this._mics=new h.default,f.default.resolve().then(function(){return D.debug("_updateMics() | calling enumerateDevices()"),navigator.mediaDevices.enumerateDevices()}).then(function(t){var r=!0,n=!1,o=void 0;try{for(var i,s=(0,a.default)(t);!(r=(i=s.next()).done);r=!0){var c=i.value;"audioinput"===c.kind&&e._mics.set(c.deviceId,c)}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}}).then(function(){var t=e._storage.getItem("training-space-audio-input-device-id"),r=(0,l.default)(e._mics.values());if(e._mics.has(t))return void(e._mic=e._mics.get(t));var n=r.length,o=e._mic?e._mic.deviceId:void 0;D.debug("_updateMics() [microphones:%o]",r),0===n?e._mic=null:e._mics.has(o)||(e._mic=r[0])})}},{key:"_getWebcamType",value:function(e){return/(back|rear)/i.test(e.label)?(D.debug("_getWebcamType() | it seems to be a back camera"),"back"):(D.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_handlePeer",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.notify,o=void 0===n||n,i=e.appData.displayName;this._dispatch(R.addPeer({name:e.name,displayName:i,device:e.appData.device,consumers:[]})),o&&this._dispatch(T.notify({text:i+" joined the room"}));var s=!0,c=!1,u=void 0;try{for(var l,d=(0,a.default)(e.consumers);!(s=(l=d.next()).done);s=!0){var f=l.value;this._handleConsumer(f)}}catch(e){c=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw u}}e.on("close",function(r){D.debug('peer "close" event [name:"%s", originator:%s]',e.name,r),t._dispatch(R.removePeer(e.name)),t._room.joined&&t._dispatch(T.notify({text:e.appData.displayName+" left the room"}))}),e.on("newconsumer",function(r){D.debug('peer "newconsumer" event [name:"%s", id:%s, consumer:%o]',e.name,r.id,r),t._handleConsumer(r)})}},{key:"_handleConsumer",value:function(e){var t=this,r=e.rtpParameters.codecs[0];this._dispatch(R.addConsumer({id:e.id,peerName:e.peer.name,source:e.appData.source,supported:e.supported,locallyPaused:e.locallyPaused,remotelyPaused:e.remotelyPaused,track:null,codec:r?r.name:null},e.peer.name)),e.on("close",function(r){D.debug('consumer "close" event [id:%s, originator:%s, consumer:%o]',e.id,r,e),t._dispatch(R.removeConsumer(e.id,e.peer.name))}),e.on("pause",function(r){D.debug('consumer "pause" event [id:%s, originator:%s, consumer:%o]',e.id,r,e),t._dispatch(R.setConsumerPaused(e.id,r))}),e.on("resume",function(r){D.debug('consumer "resume" event [id:%s, originator:%s, consumer:%o]',e.id,r,e),t._dispatch(R.setConsumerResumed(e.id,r))}),e.on("effectiveprofilechange",function(r){e.setPreferredProfile(r),D.debug('consumer "effectiveprofilechange" event [id:%s, consumer:%o, profile:%s]',e.id,e,r),t._dispatch(R.setConsumerEffectiveProfile(e.id,r))}),e.supported&&("video"===e.kind&&this._getState().me.audioOnly&&e.pause("audio-only-mode"),e.receive(this._recvTransport).then(function(r){t._dispatch(R.setConsumerTrack(e.id,r))}).catch(function(e){D.error("unexpected error while receiving a new Consumer:%o",e)}))}},{key:"changeRecordSource",value:function(){}}]),e}();r.default=U},{"./Logger":1,"./redux/requestActions":11,"./redux/stateActions":13,"./urlFactory":14,axios:16,"babel-runtime/core-js/array/from":41,"babel-runtime/core-js/get-iterator":42,"babel-runtime/core-js/map":43,"babel-runtime/core-js/promise":46,"babel-runtime/helpers/classCallCheck":47,"babel-runtime/helpers/createClass":48,"babel-runtime/helpers/extends":50,"mediasoup-client":198,msr:202,"protoo-client":207,requestify:237}],3:[function(e,t,r){(function(t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0}),r.Init=void 0;var a=e("babel-runtime/helpers/classCallCheck"),s=i(a),c=e("redux"),u=e("redux-thunk"),l=i(u),d=e("redux-logger"),f=e("mediasoup-client"),p=e("./Logger"),h=i(p),m=e("./utils"),v=(o(m),e("./redux/requestActions")),y=o(v),g=e("./redux/stateActions"),b=o(g),_=e("./redux/reducers"),w=i(_),k=e("./redux/roomClientMiddleware"),P=i(k),x=e("wildemitter"),S=o(x);r.Init=function e(r){var o=this;(0,s.default)(this,e),console.warn("Easy mediasoup v1.1.6"),n.emitter=this.emitter=new S.default,this.roomClientMiddleware=P.default;new h.default;this.emitter.on("joinRoom",function(e){o.client=e});var i=[l.default,P.default];if("development"===t.env.NODE_ENV){var a=(0,d.createLogger)({duration:!0,timestamp:!1,level:"log",logErrors:!0});i.push(a)}var u=this.store=(0,c.createStore)(w.default,void 0,c.applyMiddleware.apply(void 0,i)),p=r.peerName,m=r.roomId,v=r.produce||!0,g=r.displayName,_=r.sipEndpoint||!1,k=r.useSimulcast||!1,x=r.media_server_wss,E=r.turnservers||[],T=[];T.video_constrains=r.video_constrains||[],T.simulcast_options=r.simulcast_options||[],T.initially_muted=r.initially_muted||!1,T.produce=r.produce;var C=void 0;g?C=!0:(g="",C=!1);var R=(0,f.getDeviceInfo)();_&&(R.flag="sipendpoint",R.name="SIP Endpoint",R.version=void 0),u.dispatch(b.setMe({peerName:p,displayName:g,displayNameSet:C,device:R})),u.dispatch(y.joinRoom({media_server_wss:x,roomId:m,peerName:p,displayName:g,device:R,useSimulcast:k,produce:v,turnservers:E,args:T}))}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Logger":1,"./redux/reducers":5,"./redux/requestActions":11,"./redux/roomClientMiddleware":12,"./redux/stateActions":13,"./utils":15,_process:204,"babel-runtime/helpers/classCallCheck":47,"mediasoup-client":198,redux:235,"redux-logger":228,"redux-thunk":229,wildemitter:273}],4:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/defineProperty"),i=n(o),a=e("babel-runtime/helpers/extends"),s=n(a),c={},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,r=arguments[1];switch(r.type){case"ADD_CONSUMER":var n=r.payload.consumer;return t.emitter.emit("ADD_CONSUMER",r.payload),(0,s.default)({},e,(0,i.default)({},n.id,n));case"REMOVE_CONSUMER":var o=r.payload.consumerId,a=(0,s.default)({},e);return delete a[o],t.emitter.emit("REMOVE_CONSUMER",r.payload),a;case"SET_CONSUMER_PAUSED":var u=r.payload,l=u.consumerId,d=u.originator,f=e[l],p=void 0;return p="local"===d?(0,s.default)({},f,{locallyPaused:!0}):(0,s.default)({},f,{remotelyPaused:!0}),t.emitter.emit("SET_CONSUMER_PAUSED",r.payload),(0,s.default)({},e,(0,i.default)({},l,p));case"SET_CONSUMER_RESUMED":var h=r.payload,m=h.consumerId,v=h.originator,y=e[m],g=void 0;return g="local"===v?(0,s.default)({},y,{locallyPaused:!1}):(0,s.default)({},y,{remotelyPaused:!1}),t.emitter.emit("SET_CONSUMER_RESUMED",r.payload),(0,s.default)({},e,(0,i.default)({},m,g));case"SET_CONSUMER_EFFECTIVE_PROFILE":var b=r.payload,_=b.consumerId,w=b.profile,k=e[_],P=(0,s.default)({},k,{profile:w});return t.emitter.emit("SET_CONSUMER_EFFECTIVE_PROFILE",P),(0,s.default)({},e,(0,i.default)({},_,P));case"SET_CONSUMER_TRACK":var x=r.payload,S=x.consumerId,E=x.track,T=e[S],C=(0,s.default)({},T,{track:E});return t.emitter.emit("SET_CONSUMER_TRACK",C),(0,s.default)({},e,(0,i.default)({},S,C));default:return e}};r.default=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/defineProperty":49,"babel-runtime/helpers/extends":50}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("redux"),i=e("./room"),a=n(i),s=e("./me"),c=n(s),u=e("./producers"),l=n(u),d=e("./peers"),f=n(d),p=e("./consumers"),h=n(p),m=e("./notifications"),v=n(m),y=(0,o.combineReducers)({room:a.default,me:c.default,producers:l.default,peers:f.default,consumers:h.default,notifications:v.default});r.default=y},{
"./consumers":4,"./me":6,"./notifications":7,"./peers":8,"./producers":9,"./room":10,redux:235}],6:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/helpers/extends"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i={name:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,restartIceInProgress:!1},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments[1];switch(r.type){case"SET_ME":var n=r.payload,a=n.peerName,s=n.displayName,c=n.displayNameSet,u=n.device;return t.emitter.emit("SET_ME",r.payload),(0,o.default)({},e,{name:a,displayName:s,displayNameSet:c,device:u});case"SET_MEDIA_CAPABILITIES":var l=r.payload,d=l.canSendMic,f=l.canSendWebcam;return(0,o.default)({},e,{canSendMic:d,canSendWebcam:f});case"SET_CAN_CHANGE_WEBCAM":var p=r.payload;return t.emitter.emit("SET_CAN_CHANGE_WEBCAM",r.payload),(0,o.default)({},e,{canChangeWebcam:p});case"SET_WEBCAM_IN_PROGRESS":var h=r.payload.flag;return t.emitter.emit("SET_WEBCAM_IN_PROGRESS",r.payload),(0,o.default)({},e,{webcamInProgress:h});case"SET_DISPLAY_NAME":var m=r.payload.displayName;return m||(m=e.displayName),(0,o.default)({},e,{displayName:m,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var v=r.payload.enabled;return(0,o.default)({},e,{audioOnly:v});case"SET_AUDIO_ONLY_IN_PROGRESS":var y=r.payload.flag;return(0,o.default)({},e,{audioOnlyInProgress:y});case"SET_RESTART_ICE_IN_PROGRESS":var g=r.payload.flag;return(0,o.default)({},e,{restartIceInProgress:g});default:return e}};r.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/extends":50}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/helpers/toConsumableArray"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=[],a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case"ADD_NOTIFICATION":var r=t.payload.notification;return[].concat((0,o.default)(e),[r]);case"REMOVE_NOTIFICATION":var n=t.payload.notificationId;return e.filter(function(e){return e.id!==n});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return e}};r.default=a},{"babel-runtime/helpers/toConsumableArray":51}],8:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/toConsumableArray"),i=n(o),a=e("babel-runtime/helpers/defineProperty"),s=n(a),c=e("babel-runtime/helpers/extends"),u=n(c),l={},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,r=arguments[1];switch(r.type){case"ADD_PEER":var n=r.payload.peer;return t.emitter.emit("peerAdded",n),(0,u.default)({},e,(0,s.default)({},n.name,n));case"REMOVE_PEER":var o=r.payload.peerName,a=(0,u.default)({},e);return delete a[o],t.emitter.emit("peerRemoved",o),a;case"SET_PEER_DISPLAY_NAME":var c=r.payload,d=c.displayName,f=c.peerName,p=e[f];if(!p)throw new Error("no Peer found");var h=(0,u.default)({},p,{displayName:d});return(0,u.default)({},e,(0,s.default)({},h.name,h));case"ADD_CONSUMER":var m=r.payload,v=m.consumer,y=m.peerName,g=e[y];if(!g)throw new Error("no Peer found for new Consumer");var b=[].concat((0,i.default)(g.consumers),[v.id]),_=(0,u.default)({},g,{consumers:b});return t.emitter.emit("peerConsumerAdded",_),(0,u.default)({},e,(0,s.default)({},_.name,_));case"REMOVE_CONSUMER":var w=r.payload,k=w.consumerId,P=w.peerName,x=e[P];if(!x)return e;var S=x.consumers.indexOf(k);if(-1===S)throw new Error("Consumer not found");var E=x.consumers.slice();E.splice(S,1);var T=(0,u.default)({},x,{consumers:E});return t.emitter.emit("peerConsumerRemoved",T),(0,u.default)({},e,(0,s.default)({},T.name,T));default:return e}};r.default=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/defineProperty":49,"babel-runtime/helpers/extends":50,"babel-runtime/helpers/toConsumableArray":51}],9:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(r,"__esModule",{value:!0});var o=e("babel-runtime/helpers/defineProperty"),i=n(o),a=e("babel-runtime/helpers/extends"),s=n(a),c={},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,r=arguments[1];switch(r.type){case"ADD_PRODUCER":var n=r.payload.producer;return t.emitter.emit("ADD_PRODUCER",n),(0,s.default)({},e,(0,i.default)({},n.id,n));case"REMOVE_PRODUCER":var o=r.payload.producerId,a=(0,s.default)({},e);return delete a[o],t.emitter.emit("REMOVE_PRODUCER",producer),a;case"SET_PRODUCER_PAUSED":var u=r.payload,l=u.producerId,d=u.originator,f=e[l],p=void 0;return p="local"===d?(0,s.default)({},f,{locallyPaused:!0}):(0,s.default)({},f,{remotelyPaused:!0}),t.emitter.emit("SET_PRODUCER_PAUSED",p),(0,s.default)({},e,(0,i.default)({},l,p));case"SET_PRODUCER_RESUMED":var h=r.payload,m=h.producerId,v=h.originator,y=e[m],g=void 0;return g="local"===v?(0,s.default)({},y,{locallyPaused:!1}):(0,s.default)({},y,{remotelyPaused:!1}),t.emitter.emit("SET_PRODUCER_RESUMED",g),(0,s.default)({},e,(0,i.default)({},m,g));case"SET_PRODUCER_TRACK":var b=r.payload,_=b.producerId,w=b.track,k=e[_],P=(0,s.default)({},k,{track:w});return t.emitter.emit("SET_PRODUCER_TRACK",P),(0,s.default)({},e,(0,i.default)({},_,P));default:return e}};r.default=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/defineProperty":49,"babel-runtime/helpers/extends":50}],10:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("babel-runtime/helpers/extends"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i={url:null,state:"new",activeSpeakerName:null},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,r=arguments[1];switch(r.type){case"SET_ROOM_URL":var n=r.payload.url;return(0,o.default)({},e,{url:n});case"SET_ROOM_STATE":var a=r.payload.state;return t.emitter.emit("SET_ROOM_STATE",a),"connected"==a?(0,o.default)({},e,{state:a}):(0,o.default)({},e,{state:a,activeSpeakerName:null});case"SET_ROOM_ACTIVE_SPEAKER":var s=r.payload.peerName;return t.emitter.emit("SET_ROOM_ACTIVE_SPEAKER",s),(0,o.default)({},e,{activeSpeakerName:s});default:return e}};r.default=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"babel-runtime/helpers/extends":50}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.notify=r.restartIce=r.disableAudioOnly=r.enableAudioOnly=r.changeWebcam=r.disableWebcam=r.enableWebcam=r.unmuteMic=r.muteMic=r.changeDisplayName=r.leaveRoom=r.joinRoom=void 0;var n=e("random-string"),o=function(e){return e&&e.__esModule?e:{default:e}}(n),i=e("./stateActions"),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i);r.joinRoom=function(e){return{type:"JOIN_ROOM",payload:{media_server_wss:e.media_server_wss,roomId:e.roomId,peerName:e.peerName,displayName:e.displayName,device:e.device,useSimulcast:e.useSimulcast,produce:e.produce,turnservers:e.turnservers,args:e.args}}},r.leaveRoom=function(){return{type:"LEAVE_ROOM"}},r.changeDisplayName=function(e){return{type:"CHANGE_DISPLAY_NAME",payload:{displayName:e}}},r.muteMic=function(){return{type:"MUTE_MIC"}},r.unmuteMic=function(){return{type:"UNMUTE_MIC"}},r.enableWebcam=function(){return{type:"ENABLE_WEBCAM"}},r.disableWebcam=function(){return{type:"DISABLE_WEBCAM"}},r.changeWebcam=function(){return{type:"CHANGE_WEBCAM"}},r.enableAudioOnly=function(){return{type:"ENABLE_AUDIO_ONLY"}},r.disableAudioOnly=function(){return{type:"DISABLE_AUDIO_ONLY"}},r.restartIce=function(){return{type:"RESTART_ICE"}},r.notify=function(e){var t=e.type,r=void 0===t?"info":t,n=e.text,i=e.timeout;if(!i)switch(r){case"info":i=3e3;break;case"error":i=5e3}var s={id:(0,o.default)({length:6}).toLowerCase(),type:r,text:n,timeout:i};return function(e){e(a.addNotification(s)),setTimeout(function(){e(a.removeNotification(s.id))},i)}}},{"./stateActions":13,"random-string":218}],12:[function(e,t,r){(function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../RoomClient"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=function(e){var r=e.dispatch,n=e.getState;return function(e){var i=void 0;return function(a){switch(a.type){case"JOIN_ROOM":var s=a.payload,c=s.media_server_wss,u=s.roomId,l=s.peerName,d=s.displayName,f=s.device,p=s.useSimulcast,h=s.produce,m=s.turnservers,v=s.args;i=new o.default({media_server_wss:c,roomId:u,peerName:l,displayName:d,device:f,useSimulcast:p,produce:h,dispatch:r,getState:n,turnservers:m,args:v}),t.CLIENT=i,t.emitter.emit("joinRoom",i);break;case"LEAVE_ROOM":i.close(),t.emitter.emit("leaveRoom",i);break;case"CHANGE_DISPLAY_NAME":var y=a.payload.displayName;i.changeDisplayName(y),t.emitter.emit("changeDisplayName",i);break;case"MUTE_MIC":i.muteMic(),t.emitter.emit("muteMic",i);break;case"UNMUTE_MIC":i.unmuteMic(),t.emitter.emit("unmuteMic",i);break;case"ENABLE_WEBCAM":i.enableWebcam(),t.emitter.emit("enableWebcam",i);break;case"DISABLE_WEBCAM":i.disableWebcam(),t.emitter.emit("disableWebcam",i);break;case"CHANGE_WEBCAM":i.changeWebcam(),t.emitter.emit("changeWebcam",i);break;case"ENABLE_AUDIO_ONLY":i.enableAudioOnly(),t.emitter.emit("enableAudioOnly",i);break;case"DISABLE_AUDIO_ONLY":i.disableAudioOnly(),t.emitter.emit("disableAudioOnly",i);break;case"RESTART_ICE":i.restartIce(),t.emitter.emit("restartIce",i)}return e(a)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../RoomClient":2}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.setRoomUrl=function(e){return{type:"SET_ROOM_URL",payload:{url:e}}},r.setRoomState=function(e){return{type:"SET_ROOM_STATE",payload:{state:e}}},r.setRoomActiveSpeaker=function(e){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerName:e}}},r.setMe=function(e){return{type:"SET_ME",payload:{peerName:e.peerName,displayName:e.displayName,displayNameSet:e.displayNameSet,device:e.device}}},r.setMediaCapabilities=function(e){var t=e.canSendMic,r=e.canSendWebcam;e.canSendScreenShare;return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:t,canSendWebcam:r}}},r.setCanChangeWebcam=function(e){return{type:"SET_CAN_CHANGE_WEBCAM",payload:e}},r.setDisplayName=function(e){return{type:"SET_DISPLAY_NAME",payload:{displayName:e}}},r.setAudioOnlyState=function(e){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:e}}},r.setAudioOnlyInProgress=function(e){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:e}}},r.setRestartIceInProgress=function(e){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:e}}},r.addProducer=function(e){return{type:"ADD_PRODUCER",payload:{producer:e}}},r.removeProducer=function(e){return{type:"REMOVE_PRODUCER",payload:{producerId:e}}},r.setProducerPaused=function(e,t){return{type:"SET_PRODUCER_PAUSED",payload:{producerId:e,originator:t}}},r.setProducerResumed=function(e,t){return{type:"SET_PRODUCER_RESUMED",payload:{producerId:e,originator:t}}},r.setProducerTrack=function(e,t){return{type:"SET_PRODUCER_TRACK",payload:{producerId:e,track:t}}},r.setWebcamInProgress=function(e){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:e}}},r.setMicInProgress=function(e){return{type:"SET_MIC_IN_PROGRESS",payload:{flag:e}}},r.setScreenShareInProgress=function(e){return{type:"SET_SCREENSHARE_IN_PROGRESS",payload:{flag:e}}},r.addPeer=function(e){return{type:"ADD_PEER",payload:{peer:e}}},r.removePeer=function(e){return{type:"REMOVE_PEER",payload:{peerName:e}}},r.setPeerDisplayName=function(e,t){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:e,peerName:t}}},r.addConsumer=function(e,t){return{type:"ADD_CONSUMER",payload:{consumer:e,peerName:t}}},r.removeConsumer=function(e,t){return{type:"REMOVE_CONSUMER",payload:{consumerId:e,peerName:t}}},r.setConsumerPaused=function(e,t){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:e,originator:t}}},r.setConsumerResumed=function(e,t){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:e,originator:t}}},r.setConsumerEffectiveProfile=function(e,t){return{type:"SET_CONSUMER_EFFECTIVE_PROFILE",payload:{consumerId:e,profile:t}}},r.setConsumerTrack=function(e,t){return{type:"SET_CONSUMER_TRACK",payload:{consumerId:e,track:t}}},r.addNotification=function(e){return{type:"ADD_NOTIFICATION",payload:{notification:e}}},r.removeNotification=function(e){return{type:"REMOVE_NOTIFICATION",payload:{notificationId:e}}},r.removeAllNotifications=function(){return{type:"REMOVE_ALL_NOTIFICATIONS"}}},{}],14:[function(e,t,r){"use strict";function n(e,t,r){window.location.hostname;return e||console.error("config.media_server_wss don't set."),e+"/?peerName="+t+"&roomId="+r}Object.defineProperty(r,"__esModule",{value:!0}),r.getProtooUrl=n},{}],15:[function(e,t,r){"use strict";function n(){return c=document.getElementById("mediasoup-demo-app-media-query-detector"),s.default.resolve()}function o(){return Boolean(c.offsetParent)}function i(){return!c.offsetParent}Object.defineProperty(r,"__esModule",{value:!0});var a=e("babel-runtime/core-js/promise"),s=function(e){return e&&e.__esModule?e:{default:e}}(a);r.initialize=n,r.isDesktop=o,r.isMobile=i;var c=void 0},{"babel-runtime/core-js/promise":46}],16:[function(e,t,r){t.exports=e("./lib/axios")},{"./lib/axios":18}],17:[function(e,t,r){(function(r){"use strict";var n=e("./../utils"),o=e("./../core/settle"),i=e("./../helpers/buildURL"),a=e("./../helpers/parseHeaders"),s=e("./../helpers/isURLSameOrigin"),c=e("../core/createError"),u="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||e("./../helpers/btoa");t.exports=function(t){return new Promise(function(l,d){var f=t.data,p=t.headers;n.isFormData(f)&&delete p["Content-Type"];var h=new XMLHttpRequest,m="onreadystatechange",v=!1;if("test"===r.env.NODE_ENV||"undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(t.url)||(h=new window.XDomainRequest,m="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),t.auth){var y=t.auth.username||"",g=t.auth.password||"";p.Authorization="Basic "+u(y+":"+g)}if(h.open(t.method.toUpperCase(),i(t.url,t.params,t.paramsSerializer),!0),h.timeout=t.timeout,h[m]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var e="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=t.responseType&&"text"!==t.responseType?h.response:h.responseText,n={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:e,config:t,request:h};o(l,d,n),h=null}},h.onerror=function(){d(c("Network Error",t,null,h)),h=null},h.ontimeout=function(){d(c("timeout of "+t.timeout+"ms exceeded",t,"ECONNABORTED",h)),h=null},n.isStandardBrowserEnv()){var b=e("./../helpers/cookies"),_=(t.withCredentials||s(t.url))&&t.xsrfCookieName?b.read(t.xsrfCookieName):void 0;_&&(p[t.xsrfHeaderName]=_)}if("setRequestHeader"in h&&n.forEach(p,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)}),t.withCredentials&&(h.withCredentials=!0),t.responseType)try{h.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&h.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(e){h&&(h.abort(),d(e),h=null)}),void 0===f&&(f=null),h.send(f)})}}).call(this,e("_process"))},{"../core/createError":24,"./../core/settle":27,"./../helpers/btoa":31,"./../helpers/buildURL":32,"./../helpers/cookies":34,"./../helpers/isURLSameOrigin":36,"./../helpers/parseHeaders":38,"./../utils":40,_process:204}],18:[function(e,t,r){"use strict";function n(e){var t=new a(e),r=i(a.prototype.request,t);return o.extend(r,a.prototype,t),o.extend(r,t),r}var o=e("./utils"),i=e("./helpers/bind"),a=e("./core/Axios"),s=e("./defaults"),c=n(s);c.Axios=a,c.create=function(e){return n(o.merge(s,e))},c.Cancel=e("./cancel/Cancel"),c.CancelToken=e("./cancel/CancelToken"),c.isCancel=e("./cancel/isCancel"),c.all=function(e){return Promise.all(e)},c.spread=e("./helpers/spread"),t.exports=c,t.exports.default=c},{"./cancel/Cancel":19,"./cancel/CancelToken":20,"./cancel/isCancel":21,"./core/Axios":22,"./defaults":29,"./helpers/bind":30,"./helpers/spread":39,"./utils":40}],19:[function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,t.exports=n},{}],20:[function(e,t,r){"use strict";function n(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;e(function(e){r.reason||(r.reason=new o(e),t(r.reason))})}var o=e("./Cancel");n.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},n.source=function(){var e;return{token:new n(function(t){e=t}),cancel:e}},t.exports=n},{"./Cancel":19}],21:[function(e,t,r){"use strict";t.exports=function(e){return!(!e||!e.__CANCEL__)}},{}],22:[function(e,t,r){"use strict";function n(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var o=e("./../defaults"),i=e("./../utils"),a=e("./InterceptorManager"),s=e("./dispatchRequest");n.prototype.request=function(e){"string"==typeof e&&(e=i.merge({url:arguments[0]},arguments[1])),e=i.merge(o,{method:"get"},this.defaults,e),e.method=e.method.toLowerCase();var t=[s,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach(function(e){t.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){t.push(e.fulfilled,e.rejected)});t.length;)r=r.then(t.shift(),t.shift());return r},i.forEach(["delete","get","head","options"],function(e){n.prototype[e]=function(t,r){return this.request(i.merge(r||{},{method:e,url:t}))}}),i.forEach(["post","put","patch"],function(e){n.prototype[e]=function(t,r,n){return this.request(i.merge(n||{},{method:e,url:t,data:r}))}}),t.exports=n},{"./../defaults":29,"./../utils":40,"./InterceptorManager":23,"./dispatchRequest":25}],23:[function(e,t,r){"use strict";function n(){this.handlers=[]}var o=e("./../utils");n.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},n.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},n.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=n},{"./../utils":40}],24:[function(e,t,r){"use strict";var n=e("./enhanceError");t.exports=function(e,t,r,o,i){var a=new Error(e);return n(a,t,r,o,i)}},{"./enhanceError":26}],25:[function(e,t,r){"use strict";function n(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var o=e("./../utils"),i=e("./transformData"),a=e("../cancel/isCancel"),s=e("../defaults"),c=e("./../helpers/isAbsoluteURL"),u=e("./../helpers/combineURLs");t.exports=function(e){return n(e),e.baseURL&&!c(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=i(e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return n(e),t.data=i(t.data,t.headers,e.transformResponse),t},function(t){return a(t)||(n(e),t&&t.response&&(t.response.data=i(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/isCancel":21,"../defaults":29,"./../helpers/combineURLs":33,"./../helpers/isAbsoluteURL":35,"./../utils":40,"./transformData":28}],26:[function(e,t,r){"use strict";t.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e}},{}],27:[function(e,t,r){"use strict";var n=e("./createError");t.exports=function(e,t,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?t(n("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}},{"./createError":24}],28:[function(e,t,r){"use strict";var n=e("./../utils");t.exports=function(e,t,r){return n.forEach(r,function(r){e=r(e,t)}),e}},{"./../utils":40}],29:[function(e,t,r){(function(r){"use strict";function n(e,t){!o.isUndefined(e)&&o.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var o=e("./utils"),i=e("./helpers/normalizeHeaderName"),a={"Content-Type":"application/x-www-form-urlencoded"},s={adapter:function(){var t;return"undefined"!=typeof XMLHttpRequest?t=e("./adapters/xhr"):void 0!==r&&(t=e("./adapters/http")),t}(),transformRequest:[function(e,t){return i(t,"Content-Type"),o.isFormData(e)||o.isArrayBuffer(e)||o.isBuffer(e)||o.isStream(e)||o.isFile(e)||o.isBlob(e)?e:o.isArrayBufferView(e)?e.buffer:o.isURLSearchParams(e)?(n(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):o.isObject(e)?(n(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};s.headers={common:{Accept:"application/json, text/plain, */*"}},o.forEach(["delete","get","head"],function(e){s.headers[e]={}}),o.forEach(["post","put","patch"],function(e){s.headers[e]=o.merge(a)}),t.exports=s}).call(this,e("_process"))},{"./adapters/http":17,"./adapters/xhr":17,"./helpers/normalizeHeaderName":37,"./utils":40,_process:204}],30:[function(e,t,r){"use strict";t.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},{}],31:[function(e,t,r){"use strict";function n(){this.message="String contains an invalid character"}function o(e){for(var t,r,o=String(e),a="",s=0,c=i;o.charAt(0|s)||(c="=",s%1);a+=c.charAt(63&t>>8-s%1*8)){if((r=o.charCodeAt(s+=.75))>255)throw new n;t=t<<8|r}return a}var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.code=5,n.prototype.name="InvalidCharacterError",t.exports=o},{}],32:[function(e,t,r){"use strict";function n(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=e("./../utils");t.exports=function(e,t,r){if(!t)return e;var i;if(r)i=r(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null!==e&&void 0!==e&&(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(n(t)+"="+n(e))}))}),i=a.join("&")}return i&&(e+=(-1===e.indexOf("?")?"?":"&")+i),e}},{"./../utils":40}],33:[function(e,t,r){"use strict";t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],34:[function(e,t,r){"use strict";var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?function(){return{write:function(e,t,r,o,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(o)&&s.push("path="+o),n.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":40}],35:[function(e,t,r){"use strict";t.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},{}],36:[function(e,t,r){"use strict";var n=e("./../utils");t.exports=n.isStandardBrowserEnv()?function(){function e(e){var t=e;return r&&(o.setAttribute("href",t),t=o.href),o.setAttribute("href",t),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t,r=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a");return t=e(window.location.href),function(r){var o=n.isString(r)?e(r):r;return o.protocol===t.protocol&&o.host===t.host}}():function(){return function(){return!0}}()},{"./../utils":40}],37:[function(e,t,r){"use strict";var n=e("../utils");t.exports=function(e,t){n.forEach(e,function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])})}},{"../utils":40}],38:[function(e,t,r){"use strict";var n=e("./../utils"),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t,r,i,a={};return e?(n.forEach(e.split("\n"),function(e){if(i=e.indexOf(":"),t=n.trim(e.substr(0,i)).toLowerCase(),r=n.trim(e.substr(i+1)),t){if(a[t]&&o.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([r]):a[t]?a[t]+", "+r:r}}),a):a}},{"./../utils":40}],39:[function(e,t,r){"use strict";t.exports=function(e){return function(t){return e.apply(null,t)}}},{}],40:[function(e,t,r){"use strict";function n(e){return"[object Array]"===x.call(e)}function o(e){return"[object ArrayBuffer]"===x.call(e)}function i(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function c(e){return"number"==typeof e}function u(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function d(e){return"[object Date]"===x.call(e)}function f(e){return"[object File]"===x.call(e)}function p(e){return"[object Blob]"===x.call(e)}function h(e){return"[object Function]"===x.call(e)}function m(e){return l(e)&&h(e.pipe)}function v(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function g(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)}function b(e,t){if(null!==e&&void 0!==e)if("object"!=typeof e&&(e=[e]),n(e))for(var r=0,o=e.length;r<o;r++)t.call(null,e[r],r,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}function _(){function e(e,r){"object"==typeof t[r]&&"object"==typeof e?t[r]=_(t[r],e):t[r]=e}for(var t={},r=0,n=arguments.length;r<n;r++)b(arguments[r],e);return t}function w(e,t,r){return b(t,function(t,n){e[n]=r&&"function"==typeof t?k(t,r):t}),e}var k=e("./helpers/bind"),P=e("is-buffer"),x=Object.prototype.toString;t.exports={isArray:n,isArrayBuffer:o,isBuffer:P,isFormData:i,isArrayBufferView:a,isString:s,isNumber:c,isObject:l,isUndefined:u,isDate:d,isFile:f,isBlob:p,isFunction:h,isStream:m,isURLSearchParams:v,isStandardBrowserEnv:g,forEach:b,merge:_,extend:w,trim:y}},{"./helpers/bind":30,"is-buffer":162}],41:[function(e,t,r){t.exports={default:e("core-js/library/fn/array/from"),__esModule:!0}},{"core-js/library/fn/array/from":57}],42:[function(e,t,r){t.exports={default:e("core-js/library/fn/get-iterator"),__esModule:!0}},{"core-js/library/fn/get-iterator":58}],43:[function(e,t,r){t.exports={default:e("core-js/library/fn/map"),__esModule:!0}},{"core-js/library/fn/map":59}],44:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/assign"),__esModule:!0}},{"core-js/library/fn/object/assign":60}],45:[function(e,t,r){t.exports={default:e("core-js/library/fn/object/define-property"),__esModule:!0}},{"core-js/library/fn/object/define-property":61}],46:[function(e,t,r){t.exports={default:e("core-js/library/fn/promise"),__esModule:!0}},{"core-js/library/fn/promise":62}],47:[function(e,t,r){"use strict";r.__esModule=!0,r.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},{}],48:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/object/define-property"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},{"../core-js/object/define-property":45}],49:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/object/define-property"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=function(e,t,r){return t in e?(0,o.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},{"../core-js/object/define-property":45}],50:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/object/assign"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},{"../core-js/object/assign":44}],51:[function(e,t,r){"use strict";r.__esModule=!0;var n=e("../core-js/array/from"),o=function(e){return e&&e.__esModule?e:{default:e}}(n);r.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,o.default)(e)}},{"../core-js/array/from":41}],52:[function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function o(e){return 3*e.length/4-n(e)}function i(e){var t,r,o,i,a,s=e.length;i=n(e),a=new d(3*s/4-i),r=i>0?s-4:s;var c=0;for(t=0;t<r;t+=4)o=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],a[c++]=o>>16&255,a[c++]=o>>8&255,a[c++]=255&o;return 2===i?(o=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,a[c++]=255&o):1===i&&(o=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,a[c++]=o>>8&255,a[c++]=255&o),a}function a(e){return u[e>>18&63]+u[e>>12&63]+u[e>>6&63]+u[63&e]}function s(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16)+(e[i+1]<<8)+e[i+2],o.push(a(n));return o.join("")}function c(e){for(var t,r=e.length,n=r%3,o="",i=[],a=0,c=r-n;a<c;a+=16383)i.push(s(e,a,a+16383>c?c:a+16383));return 1===n?(t=e[r-1],o+=u[t>>2],o+=u[t<<4&63],o+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],o+=u[t>>10],o+=u[t>>4&63],o+=u[t<<2&63],o+="="),i.push(o),i.join("")}r.byteLength=o,r.toByteArray=i,r.fromByteArray=c;for(var u=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,h=f.length;p<h;++p)u[p]=f[p],l[f.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},{}],53:[function(t,r,n){!function(t,n,o){void 0!==r&&r.exports?r.exports=o():"function"==typeof e&&e.amd?e("bowser",o):t.bowser=o()}(this,0,function(){function e(e){function t(t){var r=e.match(t);return r&&r.length>1&&r[1]||""}function r(t){var r=e.match(t);return r&&r.length>1&&r[2]||""}var n,o=t(/(ipod|iphone|ipad)/i).toLowerCase(),i=/like android/i.test(e),s=!i&&/android/i.test(e),c=/nexus\s*[0-6]\s*/i.test(e),u=!c&&/nexus\s*[0-9]+/i.test(e),l=/CrOS/.test(e),d=/silk/i.test(e),f=/sailfish/i.test(e),p=/tizen/i.test(e),h=/(web|hpw)os/i.test(e),m=/windows phone/i.test(e),v=(/SamsungBrowser/i.test(e),
!m&&/windows/i.test(e)),y=!o&&!d&&/macintosh/i.test(e),g=!s&&!f&&!p&&!h&&/linux/i.test(e),b=r(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),_=t(/version\/(\d+(\.\d+)?)/i),w=/tablet/i.test(e)&&!/tablet pc/i.test(e),k=!w&&/[^-]mobi/i.test(e),P=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:a,version:_||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?n={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||_}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:a,version:_||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:a,version:_||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:a,version:_||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:m?(n={name:"Windows Phone",osname:"Windows Phone",windowsphone:a},b?(n.msedge=a,n.version=b):(n.msie=a,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?n={name:"Chrome",osname:"Chrome OS",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?n={name:"Microsoft Edge",msedge:a,version:b}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||_}:f?n={name:"Sailfish",osname:"Sailfish OS",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=a,n.osname="Firefox OS")):d?n={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",osname:"BlackBerry OS",blackberry:a,version:_||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:h?(n={name:"WebOS",osname:"WebOS",webos:a,version:_||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=a)):/bada/i.test(e)?n={name:"Bada",osname:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?n={name:"Tizen",osname:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||_}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||_}:/chromium/i.test(e)?n={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||_}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:s?n={name:"Android",version:_}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:a},_&&(n.version=_)):o?(n={name:"iphone"==o?"iPhone":"ipad"==o?"iPad":"iPod"},_&&(n.version=_)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||_}:{name:t(/^(.*)\/(.*) /),version:r(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=a):(n.name=n.name||"Webkit",n.webkit=a),!n.version&&_&&(n.version=_)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=a,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.windowsphone||!s&&!n.silk?!n.windowsphone&&o?(n[o]=a,n.ios=a,n.osname="iOS"):y?(n.mac=a,n.osname="macOS"):P?(n.xbox=a,n.osname="Xbox"):v?(n.windows=a,n.osname="Windows"):g&&(n.linux=a,n.osname="Linux"):(n.android=a,n.osname="Android");var x="";n.windows?x=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):n.windowsphone?x=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):n.mac?(x=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),x=x.replace(/[_\s]/g,".")):o?(x=t(/os (\d+([_\s]\d+)*) like mac os x/i),x=x.replace(/[_\s]/g,".")):s?x=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?x=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?x=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?x=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(x=t(/tizen[\/\s](\d+(\.\d+)*)/i)),x&&(n.osversion=x);var S=!n.windows&&x.split(".")[0];return w||u||"ipad"==o||s&&(3==S||S>=4&&!k)||n.silk?n.tablet=a:(k||"iphone"==o||"ipod"==o||s||c||n.blackberry||n.webos||n.bada)&&(n.mobile=a),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=a:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=a:n.x=a,n}function t(e){return e.split(".").length}function r(e,t){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r++)n.push(t(e[r]));return n}function n(e){for(var n=Math.max(t(e[0]),t(e[1])),o=r(e,function(e){var o=n-t(e);return e+=new Array(o+1).join(".0"),r(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--n>=0;){if(o[0][n]>o[1][n])return 1;if(o[0][n]!==o[1][n])return-1;if(0===n)return 0}}function o(t,r,o){var i=s;"string"==typeof r&&(o=r,r=void 0),void 0===r&&(r=!1),o&&(i=e(o));var a=""+i.version;for(var c in t)if(t.hasOwnProperty(c)&&i[c]){if("string"!=typeof t[c])throw new Error("Browser version in the minVersion map should be a string: "+c+": "+String(t));return n([a,t[c]])<0}return r}function i(e,t,r){return!o(e,t,r)}var a=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var r=e[t];if("string"==typeof r&&r in s)return!0}return!1},s.isUnsupportedBrowser=o,s.compareVersions=n,s.check=i,s._detect=e,s.detect=e,s})},{}],54:[function(e,t,r){},{}],55:[function(e,t,r){(function(t){"use strict";function n(){return i.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return i.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=i.prototype):(null===e&&(e=new i(t)),e.length=t),e}function i(e,t,r){if(!(i.TYPED_ARRAY_SUPPORT||this instanceof i))return new i(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?f(e,t,r,n):"string"==typeof t?l(e,t,r):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,r,n){return s(t),t<=0?o(e,t):void 0!==r?"string"==typeof n?o(e,t).fill(r,n):o(e,t).fill(r):o(e,t)}function u(e,t){if(s(t),e=o(e,t<0?0:0|h(t)),!i.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!i.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(t,r);e=o(e,n);var a=e.write(t,r);return a!==n&&(e=e.slice(0,a)),e}function d(e,t){var r=t.length<0?0:0|h(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function f(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),i.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=i.prototype):e=d(e,t),e}function p(e,t){if(i.isBuffer(t)){var r=0|h(t.length);return e=o(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?o(e,0):d(e,t);if("Buffer"===t.type&&Q(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function m(e){return+e!=e&&(e=0),i.alloc(+e)}function v(e,t){if(i.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Y(e).length;default:if(n)return z(e).length;t=(""+t).toLowerCase(),n=!0}}function y(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return C(this,t,r);case"ascii":return j(this,t,r);case"latin1":case"binary":return O(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=i.from(t,n)),i.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,o);if("number"==typeof t)return t&=255,i.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):_(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,o){function i(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,r/=2}var u;if(o){var l=-1;for(u=r;u<s;u++)if(i(e,u)===i(t,-1===l?0:u-l)){if(-1===l&&(l=u),u-l+1===c)return l*a}else-1!==l&&(u-=u-l),l=-1}else for(r+c>s&&(r=s-c),u=r;u>=0;u--){for(var d=!0,f=0;f<c;f++)if(i(e,u+f)!==i(t,f)){d=!1;break}if(d)return u}return-1}function w(e,t,r,n){r=Number(r)||0;var o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=t.length;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function k(e,t,r,n){return K(z(t,e.length-r),e,r,n)}function P(e,t,r,n){return K(G(t),e,r,n)}function x(e,t,r,n){return P(e,t,r,n)}function S(e,t,r,n){return K(Y(t),e,r,n)}function E(e,t,r,n){return K(V(t,e.length-r),e,r,n)}function T(e,t,r){return 0===t&&r===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,r))}function C(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i=e[o],a=null,s=i>239?4:i>223?3:i>191?2:1;if(o+s<=r){var c,u,l,d;switch(s){case 1:i<128&&(a=i);break;case 2:c=e[o+1],128==(192&c)&&(d=(31&i)<<6|63&c)>127&&(a=d);break;case 3:c=e[o+1],u=e[o+2],128==(192&c)&&128==(192&u)&&(d=(15&i)<<12|(63&c)<<6|63&u)>2047&&(d<55296||d>57343)&&(a=d);break;case 4:c=e[o+1],u=e[o+2],l=e[o+3],128==(192&c)&&128==(192&u)&&128==(192&l)&&(d=(15&i)<<18|(63&c)<<12|(63&u)<<6|63&l)>65535&&d<1114112&&(a=d)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),o+=s}return R(n)}function R(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function j(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function O(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function A(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=t;i<r;++i)o+=H(e[i]);return o}function D(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function I(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,o,a){if(!i.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,n){t<0&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-r,2);o<i;++o)e[r+o]=(t&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function L(e,t,r,n){t<0&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-r,4);o<i;++o)e[r+o]=t>>>8*(n?o:3-o)&255}function F(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function U(e,t,r,n,o){return o||F(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,r,n,23,4),r+4}function B(e,t,r,n,o){return o||F(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,r,n,52,8),r+8}function q(e){if(e=W(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function W(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function G(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function V(e,t){for(var r,n,o,i=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i}function Y(e){return X.toByteArray(q(e))}function K(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function $(e){return e!==e}var X=e("base64-js"),J=e("ieee754"),Q=e("isarray");r.Buffer=i,r.SlowBuffer=m,r.INSPECT_MAX_BYTES=50,i.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),r.kMaxLength=n(),i.poolSize=8192,i._augment=function(e){return e.__proto__=i.prototype,e},i.from=function(e,t,r){return a(null,e,t,r)},i.TYPED_ARRAY_SUPPORT&&(i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0})),i.alloc=function(e,t,r){return c(null,e,t,r)},i.allocUnsafe=function(e){return u(null,e)},i.allocUnsafeSlow=function(e){return u(null,e)},i.isBuffer=function(e){return!(null==e||!e._isBuffer)},i.compare=function(e,t){if(!i.isBuffer(e)||!i.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,o=0,a=Math.min(r,n);o<a;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},i.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return i.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=i.allocUnsafe(t),o=0;for(r=0;r<e.length;++r){var a=e[r];if(!i.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},i.byteLength=v,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},i.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},i.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},i.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?C(this,0,e):y.apply(this,arguments)},i.prototype.equals=function(e){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===i.compare(this,e)},i.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},i.prototype.compare=function(e,t,r,n,o){if(!i.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,o>>>=0,this===e)return 0;for(var a=o-n,s=r-t,c=Math.min(a,s),u=this.slice(n,o),l=e.slice(t,r),d=0;d<c;++d)if(u[d]!==l[d]){a=u[d],s=l[d];break}return a<s?-1:s<a?1:0},i.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},i.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},i.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},i.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":return P(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;i.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(i.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=i.prototype;else{var o=t-e;n=new i(o,void 0);for(var a=0;a<o;++a)n[a]=this[a+e]}return n},i.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},i.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e+--t],o=1;t>0&&(o*=256);)n+=this[e+--t]*o;return n},i.prototype.readUInt8=function(e,t){return t||I(e,1,this.length),this[e]},i.prototype.readUInt16LE=function(e,t){return t||I(e,2,this.length),this[e]|this[e+1]<<8},i.prototype.readUInt16BE=function(e,t){return t||I(e,2,this.length),this[e]<<8|this[e+1]},i.prototype.readUInt32LE=function(e,t){return t||I(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},i.prototype.readUInt32BE=function(e,t){return t||I(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},i.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},i.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||I(e,t,this.length);for(var n=t,o=1,i=this[e+--n];n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},i.prototype.readInt8=function(e,t){return t||I(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},i.prototype.readInt16LE=function(e,t){t||I(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt16BE=function(e,t){t||I(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},i.prototype.readInt32LE=function(e,t){return t||I(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},i.prototype.readInt32BE=function(e,t){return t||I(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},i.prototype.readFloatLE=function(e,t){return t||I(e,4,this.length),J.read(this,e,!0,23,4)},i.prototype.readFloatBE=function(e,t){return t||I(e,4,this.length),J.read(this,e,!1,23,4)},i.prototype.readDoubleLE=function(e,t){return t||I(e,8,this.length),J.read(this,e,!0,52,8)},i.prototype.readDoubleBE=function(e,t){return t||I(e,8,this.length),J.read(this,e,!1,52,8)},i.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},i.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}var o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},i.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,255,0),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},i.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},i.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,65535,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},i.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},i.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,4294967295,0),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},i.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);M(this,e,t,r,o-1,-o)}var i=0,a=1,s=0;for(this[t]=255&e;++i<r&&(a*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},i.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var o=Math.pow(2,8*r-1);M(this,e,t,r,o-1,-o)}var i=r-1,a=1,s=0;for(this[t+i]=255&e;--i>=0&&(a*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/a>>0)-s&255;return t+r},i.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,1,127,-128),i.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},i.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},i.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,2,32767,-32768),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},i.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),i.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},i.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),i.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},i.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},i.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},i.prototype.writeDoubleLE=function(e,t,r){return B(this,e,t,!0,r)},i.prototype.writeDoubleBE=function(e,t,r){return B(this,e,t,!1,r)},i.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var o,a=n-r;if(this===e&&r<t&&t<n)for(o=a-1;o>=0;--o)e[o+t]=this[o+r];else if(a<1e3||!i.TYPED_ARRAY_SUPPORT)for(o=0;o<a;++o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},i.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var o=e.charCodeAt(0);o<256&&(e=o)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!i.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=i.isBuffer(e)?e:z(new i(e,n).toString()),c=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":52,ieee754:160,isarray:163}],56:[function(e,t,r){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],57:[function(e,t,r){e("../../modules/es6.string.iterator"),e("../../modules/es6.array.from"),t.exports=e("../../modules/_core").Array.from},{"../../modules/_core":77,"../../modules/es6.array.from":141,"../../modules/es6.string.iterator":148}],58:[function(e,t,r){e("../modules/web.dom.iterable"),e("../modules/es6.string.iterator"),t.exports=e("../modules/core.get-iterator")},{"../modules/core.get-iterator":140,"../modules/es6.string.iterator":148,"../modules/web.dom.iterable":154}],59:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.map"),e("../modules/es7.map.to-json"),e("../modules/es7.map.of"),e("../modules/es7.map.from"),t.exports=e("../modules/_core").Map},{"../modules/_core":77,"../modules/es6.map":143,"../modules/es6.object.to-string":146,"../modules/es6.string.iterator":148,"../modules/es7.map.from":149,"../modules/es7.map.of":150,"../modules/es7.map.to-json":151,"../modules/web.dom.iterable":154}],60:[function(e,t,r){e("../../modules/es6.object.assign"),t.exports=e("../../modules/_core").Object.assign},{"../../modules/_core":77,"../../modules/es6.object.assign":144}],61:[function(e,t,r){e("../../modules/es6.object.define-property");var n=e("../../modules/_core").Object;t.exports=function(e,t,r){return n.defineProperty(e,t,r)}},{"../../modules/_core":77,"../../modules/es6.object.define-property":145}],62:[function(e,t,r){e("../modules/es6.object.to-string"),e("../modules/es6.string.iterator"),e("../modules/web.dom.iterable"),e("../modules/es6.promise"),e("../modules/es7.promise.finally"),e("../modules/es7.promise.try"),t.exports=e("../modules/_core").Promise},{"../modules/_core":77,"../modules/es6.object.to-string":146,"../modules/es6.promise":147,"../modules/es6.string.iterator":148,"../modules/es7.promise.finally":152,"../modules/es7.promise.try":153,"../modules/web.dom.iterable":154}],63:[function(e,t,r){t.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},{}],64:[function(e,t,r){t.exports=function(){}},{}],65:[function(e,t,r){t.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},{}],66:[function(e,t,r){var n=e("./_is-object");t.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},{"./_is-object":96}],67:[function(e,t,r){var n=e("./_for-of");t.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},{"./_for-of":86}],68:[function(e,t,r){var n=e("./_to-iobject"),o=e("./_to-length"),i=e("./_to-absolute-index");t.exports=function(e){return function(t,r,a){var s,c=n(t),u=o(c.length),l=i(a,u);if(e&&r!=r){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}}},{"./_to-absolute-index":130,"./_to-iobject":132,"./_to-length":133}],69:[function(e,t,r){var n=e("./_ctx"),o=e("./_iobject"),i=e("./_to-object"),a=e("./_to-length"),s=e("./_array-species-create");t.exports=function(e,t){var r=1==e,c=2==e,u=3==e,l=4==e,d=6==e,f=5==e||d,p=t||s;return function(t,s,h){for(var m,v,y=i(t),g=o(y),b=n(s,h,3),_=a(g.length),w=0,k=r?p(t,_):c?p(t,0):void 0;_>w;w++)if((f||w in g)&&(m=g[w],v=b(m,w,y),e))if(r)k[w]=v;else if(v)switch(e){case 3:return!0;case 5:return m;case 6:return w;case 2:k.push(m)}else if(l)return!1;return d?-1:u||l?l:k}}},{"./_array-species-create":71,"./_ctx":79,"./_iobject":93,"./_to-length":133,"./_to-object":134}],70:[function(e,t,r){var n=e("./_is-object"),o=e("./_is-array"),i=e("./_wks")("species");t.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),n(t)&&null===(t=t[i])&&(t=void 0)),void 0===t?Array:t}},{"./_is-array":95,
"./_is-object":96,"./_wks":138}],71:[function(e,t,r){var n=e("./_array-species-constructor");t.exports=function(e,t){return new(n(e))(t)}},{"./_array-species-constructor":70}],72:[function(e,t,r){var n=e("./_cof"),o=e("./_wks")("toStringTag"),i="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};t.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),o))?r:i?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},{"./_cof":73,"./_wks":138}],73:[function(e,t,r){var n={}.toString;t.exports=function(e){return n.call(e).slice(8,-1)}},{}],74:[function(e,t,r){"use strict";var n=e("./_object-dp").f,o=e("./_object-create"),i=e("./_redefine-all"),a=e("./_ctx"),s=e("./_an-instance"),c=e("./_for-of"),u=e("./_iter-define"),l=e("./_iter-step"),d=e("./_set-species"),f=e("./_descriptors"),p=e("./_meta").fastKey,h=e("./_validate-collection"),m=f?"_s":"size",v=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};t.exports={getConstructor:function(e,t,r,u){var l=e(function(e,n){s(e,l,t,"_i"),e._t=t,e._i=o(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=n&&c(n,r,e[u],e)});return i(l.prototype,{clear:function(){for(var e=h(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=h(this,t),n=v(r,e);if(n){var o=n.n,i=n.p;delete r._i[n.i],n.r=!0,i&&(i.n=o),o&&(o.p=i),r._f==n&&(r._f=o),r._l==n&&(r._l=i),r[m]--}return!!n},forEach:function(e){h(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!v(h(this,t),e)}}),f&&n(l.prototype,"size",{get:function(){return h(this,t)[m]}}),l},def:function(e,t,r){var n,o,i=v(e,t);return i?i.v=r:(e._l=i={i:o=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=i),n&&(n.n=i),e[m]++,"F"!==o&&(e._i[o]=i)),e},getEntry:v,setStrong:function(e,t,r){u(e,t,function(e,r){this._t=h(e,t),this._k=r,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?l(0,r.k):"values"==t?l(0,r.v):l(0,[r.k,r.v]):(e._t=void 0,l(1))},r?"entries":"values",!r,!0),d(t)}}},{"./_an-instance":65,"./_ctx":79,"./_descriptors":81,"./_for-of":86,"./_iter-define":99,"./_iter-step":101,"./_meta":104,"./_object-create":108,"./_object-dp":109,"./_redefine-all":119,"./_set-species":123,"./_validate-collection":137}],75:[function(e,t,r){var n=e("./_classof"),o=e("./_array-from-iterable");t.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return o(this)}}},{"./_array-from-iterable":67,"./_classof":72}],76:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_export"),i=e("./_meta"),a=e("./_fails"),s=e("./_hide"),c=e("./_redefine-all"),u=e("./_for-of"),l=e("./_an-instance"),d=e("./_is-object"),f=e("./_set-to-string-tag"),p=e("./_object-dp").f,h=e("./_array-methods")(0),m=e("./_descriptors");t.exports=function(e,t,r,v,y,g){var b=n[e],_=b,w=y?"set":"add",k=_&&_.prototype,P={};return m&&"function"==typeof _&&(g||k.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,r){l(t,_,e,"_c"),t._c=new b,void 0!=r&&u(r,y,t[w],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in k&&(!g||"clear"!=e)&&s(_.prototype,e,function(r,n){if(l(this,_,e),!t&&g&&!d(r))return"get"==e&&void 0;var o=this._c[e](0===r?0:r,n);return t?this:o})}),g||p(_.prototype,"size",{get:function(){return this._c.size}})):(_=v.getConstructor(t,e,y,w),c(_.prototype,r),i.NEED=!0),f(_,e),P[e]=_,o(o.G+o.W+o.F,P),g||v.setStrong(_,e,y),_}},{"./_an-instance":65,"./_array-methods":69,"./_descriptors":81,"./_export":84,"./_fails":85,"./_for-of":86,"./_global":87,"./_hide":89,"./_is-object":96,"./_meta":104,"./_object-dp":109,"./_redefine-all":119,"./_set-to-string-tag":124}],77:[function(e,t,r){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},{}],78:[function(e,t,r){"use strict";var n=e("./_object-dp"),o=e("./_property-desc");t.exports=function(e,t,r){t in e?n.f(e,t,o(0,r)):e[t]=r}},{"./_object-dp":109,"./_property-desc":118}],79:[function(e,t,r){var n=e("./_a-function");t.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},{"./_a-function":63}],80:[function(e,t,r){t.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},{}],81:[function(e,t,r){t.exports=!e("./_fails")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{"./_fails":85}],82:[function(e,t,r){var n=e("./_is-object"),o=e("./_global").document,i=n(o)&&n(o.createElement);t.exports=function(e){return i?o.createElement(e):{}}},{"./_global":87,"./_is-object":96}],83:[function(e,t,r){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],84:[function(e,t,r){var n=e("./_global"),o=e("./_core"),i=e("./_ctx"),a=e("./_hide"),s=function(e,t,r){var c,u,l,d=e&s.F,f=e&s.G,p=e&s.S,h=e&s.P,m=e&s.B,v=e&s.W,y=f?o:o[t]||(o[t]={}),g=y.prototype,b=f?n:p?n[t]:(n[t]||{}).prototype;f&&(r=t);for(c in r)(u=!d&&b&&void 0!==b[c])&&c in y||(l=u?b[c]:r[c],y[c]=f&&"function"!=typeof b[c]?r[c]:m&&u?i(l,n):v&&b[c]==l?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):h&&"function"==typeof l?i(Function.call,l):l,h&&((y.virtual||(y.virtual={}))[c]=l,e&s.R&&g&&!g[c]&&a(g,c,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},{"./_core":77,"./_ctx":79,"./_global":87,"./_hide":89}],85:[function(e,t,r){t.exports=function(e){try{return!!e()}catch(e){return!0}}},{}],86:[function(e,t,r){var n=e("./_ctx"),o=e("./_iter-call"),i=e("./_is-array-iter"),a=e("./_an-object"),s=e("./_to-length"),c=e("./core.get-iterator-method"),u={},l={},r=t.exports=function(e,t,r,d,f){var p,h,m,v,y=f?function(){return e}:c(e),g=n(r,d,t?2:1),b=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(i(y)){for(p=s(e.length);p>b;b++)if((v=t?g(a(h=e[b])[0],h[1]):g(e[b]))===u||v===l)return v}else for(m=y.call(e);!(h=m.next()).done;)if((v=o(m,g,h.value,t))===u||v===l)return v};r.BREAK=u,r.RETURN=l},{"./_an-object":66,"./_ctx":79,"./_is-array-iter":94,"./_iter-call":97,"./_to-length":133,"./core.get-iterator-method":139}],87:[function(e,t,r){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],88:[function(e,t,r){var n={}.hasOwnProperty;t.exports=function(e,t){return n.call(e,t)}},{}],89:[function(e,t,r){var n=e("./_object-dp"),o=e("./_property-desc");t.exports=e("./_descriptors")?function(e,t,r){return n.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},{"./_descriptors":81,"./_object-dp":109,"./_property-desc":118}],90:[function(e,t,r){var n=e("./_global").document;t.exports=n&&n.documentElement},{"./_global":87}],91:[function(e,t,r){t.exports=!e("./_descriptors")&&!e("./_fails")(function(){return 7!=Object.defineProperty(e("./_dom-create")("div"),"a",{get:function(){return 7}}).a})},{"./_descriptors":81,"./_dom-create":82,"./_fails":85}],92:[function(e,t,r){t.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},{}],93:[function(e,t,r){var n=e("./_cof");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},{"./_cof":73}],94:[function(e,t,r){var n=e("./_iterators"),o=e("./_wks")("iterator"),i=Array.prototype;t.exports=function(e){return void 0!==e&&(n.Array===e||i[o]===e)}},{"./_iterators":102,"./_wks":138}],95:[function(e,t,r){var n=e("./_cof");t.exports=Array.isArray||function(e){return"Array"==n(e)}},{"./_cof":73}],96:[function(e,t,r){t.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},{}],97:[function(e,t,r){var n=e("./_an-object");t.exports=function(e,t,r,o){try{return o?t(n(r)[0],r[1]):t(r)}catch(t){var i=e.return;throw void 0!==i&&n(i.call(e)),t}}},{"./_an-object":66}],98:[function(e,t,r){"use strict";var n=e("./_object-create"),o=e("./_property-desc"),i=e("./_set-to-string-tag"),a={};e("./_hide")(a,e("./_wks")("iterator"),function(){return this}),t.exports=function(e,t,r){e.prototype=n(a,{next:o(1,r)}),i(e,t+" Iterator")}},{"./_hide":89,"./_object-create":108,"./_property-desc":118,"./_set-to-string-tag":124,"./_wks":138}],99:[function(e,t,r){"use strict";var n=e("./_library"),o=e("./_export"),i=e("./_redefine"),a=e("./_hide"),s=e("./_has"),c=e("./_iterators"),u=e("./_iter-create"),l=e("./_set-to-string-tag"),d=e("./_object-gpo"),f=e("./_wks")("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(e,t,r,m,v,y,g){u(r,t,m);var b,_,w,k=function(e){if(!p&&e in E)return E[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},P=t+" Iterator",x="values"==v,S=!1,E=e.prototype,T=E[f]||E["@@iterator"]||v&&E[v],C=!p&&T||k(v),R=v?x?k("entries"):C:void 0,j="Array"==t?E.entries||T:T;if(j&&(w=d(j.call(new e)))!==Object.prototype&&w.next&&(l(w,P,!0),n||s(w,f)||a(w,f,h)),x&&T&&"values"!==T.name&&(S=!0,C=function(){return T.call(this)}),n&&!g||!p&&!S&&E[f]||a(E,f,C),c[t]=C,c[P]=h,v)if(b={values:x?C:k("values"),keys:y?C:k("keys"),entries:R},g)for(_ in b)_ in E||i(E,_,b[_]);else o(o.P+o.F*(p||S),t,b);return b}},{"./_export":84,"./_has":88,"./_hide":89,"./_iter-create":98,"./_iterators":102,"./_library":103,"./_object-gpo":112,"./_redefine":120,"./_set-to-string-tag":124,"./_wks":138}],100:[function(e,t,r){var n=e("./_wks")("iterator"),o=!1;try{var i=[7][n]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(e){}t.exports=function(e,t){if(!t&&!o)return!1;var r=!1;try{var i=[7],a=i[n]();a.next=function(){return{done:r=!0}},i[n]=function(){return a},e(i)}catch(e){}return r}},{"./_wks":138}],101:[function(e,t,r){t.exports=function(e,t){return{value:t,done:!!e}}},{}],102:[function(e,t,r){t.exports={}},{}],103:[function(e,t,r){t.exports=!0},{}],104:[function(e,t,r){var n=e("./_uid")("meta"),o=e("./_is-object"),i=e("./_has"),a=e("./_object-dp").f,s=0,c=Object.isExtensible||function(){return!0},u=!e("./_fails")(function(){return c(Object.preventExtensions({}))}),l=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!i(e,n)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[n].i},f=function(e,t){if(!i(e,n)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[n].w},p=function(e){return u&&h.NEED&&c(e)&&!i(e,n)&&l(e),e},h=t.exports={KEY:n,NEED:!1,fastKey:d,getWeak:f,onFreeze:p}},{"./_fails":85,"./_has":88,"./_is-object":96,"./_object-dp":109,"./_uid":136}],105:[function(e,t,r){var n=e("./_global"),o=e("./_task").set,i=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,c="process"==e("./_cof")(a);t.exports=function(){var e,t,r,u=function(){var n,o;for(c&&(n=a.domain)&&n.exit();e;){o=e.fn,e=e.next;try{o()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(c)r=function(){a.nextTick(u)};else if(!i||n.navigator&&n.navigator.standalone)if(s&&s.resolve){var l=s.resolve();r=function(){l.then(u)}}else r=function(){o.call(n,u)};else{var d=!0,f=document.createTextNode("");new i(u).observe(f,{characterData:!0}),r=function(){f.data=d=!d}}return function(n){var o={fn:n,next:void 0};t&&(t.next=o),e||(e=o,r()),t=o}}},{"./_cof":73,"./_global":87,"./_task":129}],106:[function(e,t,r){"use strict";function n(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw TypeError("Bad Promise constructor");t=e,r=n}),this.resolve=o(t),this.reject=o(r)}var o=e("./_a-function");t.exports.f=function(e){return new n(e)}},{"./_a-function":63}],107:[function(e,t,r){"use strict";var n=e("./_object-keys"),o=e("./_object-gops"),i=e("./_object-pie"),a=e("./_to-object"),s=e("./_iobject"),c=Object.assign;t.exports=!c||e("./_fails")(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=c({},e)[r]||Object.keys(c({},t)).join("")!=n})?function(e,t){for(var r=a(e),c=arguments.length,u=1,l=o.f,d=i.f;c>u;)for(var f,p=s(arguments[u++]),h=l?n(p).concat(l(p)):n(p),m=h.length,v=0;m>v;)d.call(p,f=h[v++])&&(r[f]=p[f]);return r}:c},{"./_fails":85,"./_iobject":93,"./_object-gops":111,"./_object-keys":114,"./_object-pie":115,"./_to-object":134}],108:[function(e,t,r){var n=e("./_an-object"),o=e("./_object-dps"),i=e("./_enum-bug-keys"),a=e("./_shared-key")("IE_PROTO"),s=function(){},c=function(){var t,r=e("./_dom-create")("iframe"),n=i.length;for(r.style.display="none",e("./_html").appendChild(r),r.src="javascript:",t=r.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;n--;)delete c.prototype[i[n]];return c()};t.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=c(),void 0===t?r:o(r,t)}},{"./_an-object":66,"./_dom-create":82,"./_enum-bug-keys":83,"./_html":90,"./_object-dps":110,"./_shared-key":125}],109:[function(e,t,r){var n=e("./_an-object"),o=e("./_ie8-dom-define"),i=e("./_to-primitive"),a=Object.defineProperty;r.f=e("./_descriptors")?Object.defineProperty:function(e,t,r){if(n(e),t=i(t,!0),n(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},{"./_an-object":66,"./_descriptors":81,"./_ie8-dom-define":91,"./_to-primitive":135}],110:[function(e,t,r){var n=e("./_object-dp"),o=e("./_an-object"),i=e("./_object-keys");t.exports=e("./_descriptors")?Object.defineProperties:function(e,t){o(e);for(var r,a=i(t),s=a.length,c=0;s>c;)n.f(e,r=a[c++],t[r]);return e}},{"./_an-object":66,"./_descriptors":81,"./_object-dp":109,"./_object-keys":114}],111:[function(e,t,r){r.f=Object.getOwnPropertySymbols},{}],112:[function(e,t,r){var n=e("./_has"),o=e("./_to-object"),i=e("./_shared-key")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,i)?e[i]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},{"./_has":88,"./_shared-key":125,"./_to-object":134}],113:[function(e,t,r){var n=e("./_has"),o=e("./_to-iobject"),i=e("./_array-includes")(!1),a=e("./_shared-key")("IE_PROTO");t.exports=function(e,t){var r,s=o(e),c=0,u=[];for(r in s)r!=a&&n(s,r)&&u.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~i(u,r)||u.push(r));return u}},{"./_array-includes":68,"./_has":88,"./_shared-key":125,"./_to-iobject":132}],114:[function(e,t,r){var n=e("./_object-keys-internal"),o=e("./_enum-bug-keys");t.exports=Object.keys||function(e){return n(e,o)}},{"./_enum-bug-keys":83,"./_object-keys-internal":113}],115:[function(e,t,r){r.f={}.propertyIsEnumerable},{}],116:[function(e,t,r){t.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},{}],117:[function(e,t,r){var n=e("./_an-object"),o=e("./_is-object"),i=e("./_new-promise-capability");t.exports=function(e,t){if(n(e),o(t)&&t.constructor===e)return t;var r=i.f(e);return(0,r.resolve)(t),r.promise}},{"./_an-object":66,"./_is-object":96,"./_new-promise-capability":106}],118:[function(e,t,r){t.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},{}],119:[function(e,t,r){var n=e("./_hide");t.exports=function(e,t,r){for(var o in t)r&&e[o]?e[o]=t[o]:n(e,o,t[o]);return e}},{"./_hide":89}],120:[function(e,t,r){t.exports=e("./_hide")},{"./_hide":89}],121:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_a-function"),i=e("./_ctx"),a=e("./_for-of");t.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,c=arguments[1];return o(this),t=void 0!==c,t&&o(c),void 0==e?new this:(r=[],t?(n=0,s=i(c,arguments[2],2),a(e,!1,function(e){r.push(s(e,n++))})):a(e,!1,r.push,r),new this(r))}})}},{"./_a-function":63,"./_ctx":79,"./_export":84,"./_for-of":86}],122:[function(e,t,r){"use strict";var n=e("./_export");t.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},{"./_export":84}],123:[function(e,t,r){"use strict";var n=e("./_global"),o=e("./_core"),i=e("./_object-dp"),a=e("./_descriptors"),s=e("./_wks")("species");t.exports=function(e){var t="function"==typeof o[e]?o[e]:n[e];a&&t&&!t[s]&&i.f(t,s,{configurable:!0,get:function(){return this}})}},{"./_core":77,"./_descriptors":81,"./_global":87,"./_object-dp":109,"./_wks":138}],124:[function(e,t,r){var n=e("./_object-dp").f,o=e("./_has"),i=e("./_wks")("toStringTag");t.exports=function(e,t,r){e&&!o(e=r?e:e.prototype,i)&&n(e,i,{configurable:!0,value:t})}},{"./_has":88,"./_object-dp":109,"./_wks":138}],125:[function(e,t,r){var n=e("./_shared")("keys"),o=e("./_uid");t.exports=function(e){return n[e]||(n[e]=o(e))}},{"./_shared":126,"./_uid":136}],126:[function(e,t,r){var n=e("./_global"),o=n["__core-js_shared__"]||(n["__core-js_shared__"]={});t.exports=function(e){return o[e]||(o[e]={})}},{"./_global":87}],127:[function(e,t,r){var n=e("./_an-object"),o=e("./_a-function"),i=e("./_wks")("species");t.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[i])?t:o(r)}},{"./_a-function":63,"./_an-object":66,"./_wks":138}],128:[function(e,t,r){var n=e("./_to-integer"),o=e("./_defined");t.exports=function(e){return function(t,r){var i,a,s=String(o(t)),c=n(r),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c),i<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536)}}},{"./_defined":80,"./_to-integer":131}],129:[function(e,t,r){var n,o,i,a=e("./_ctx"),s=e("./_invoke"),c=e("./_html"),u=e("./_dom-create"),l=e("./_global"),d=l.process,f=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,m=l.Dispatch,v=0,y={},g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},b=function(e){g.call(e.data)};f&&p||(f=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},p=function(e){delete y[e]},"process"==e("./_cof")(d)?n=function(e){d.nextTick(a(g,e,1))}:m&&m.now?n=function(e){m.now(a(g,e,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=b,n=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):n="onreadystatechange"in u("script")?function(e){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),t.exports={set:f,clear:p}},{"./_cof":73,"./_ctx":79,"./_dom-create":82,"./_global":87,"./_html":90,"./_invoke":92}],130:[function(e,t,r){var n=e("./_to-integer"),o=Math.max,i=Math.min;t.exports=function(e,t){return e=n(e),e<0?o(e+t,0):i(e,t)}},{"./_to-integer":131}],131:[function(e,t,r){var n=Math.ceil,o=Math.floor;t.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},{}],132:[function(e,t,r){var n=e("./_iobject"),o=e("./_defined");t.exports=function(e){return n(o(e))}},{"./_defined":80,"./_iobject":93}],133:[function(e,t,r){var n=e("./_to-integer"),o=Math.min;t.exports=function(e){return e>0?o(n(e),9007199254740991):0}},{"./_to-integer":131}],134:[function(e,t,r){var n=e("./_defined");t.exports=function(e){return Object(n(e))}},{"./_defined":80}],135:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},{"./_is-object":96}],136:[function(e,t,r){var n=0,o=Math.random();t.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},{}],137:[function(e,t,r){var n=e("./_is-object");t.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},{"./_is-object":96}],138:[function(e,t,r){var n=e("./_shared")("wks"),o=e("./_uid"),i=e("./_global").Symbol,a="function"==typeof i;(t.exports=function(e){return n[e]||(n[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=n},{"./_global":87,"./_shared":126,"./_uid":136}],139:[function(e,t,r){var n=e("./_classof"),o=e("./_wks")("iterator"),i=e("./_iterators");t.exports=e("./_core").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[n(e)]}},{"./_classof":72,"./_core":77,"./_iterators":102,"./_wks":138}],140:[function(e,t,r){var n=e("./_an-object"),o=e("./core.get-iterator-method");t.exports=e("./_core").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},{"./_an-object":66,"./_core":77,"./core.get-iterator-method":139}],141:[function(e,t,r){"use strict";var n=e("./_ctx"),o=e("./_export"),i=e("./_to-object"),a=e("./_iter-call"),s=e("./_is-array-iter"),c=e("./_to-length"),u=e("./_create-property"),l=e("./core.get-iterator-method");o(o.S+o.F*!e("./_iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,o,d,f=i(e),p="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,y=0,g=l(f);if(v&&(m=n(m,h>2?arguments[2]:void 0,2)),void 0==g||p==Array&&s(g))for(t=c(f.length),r=new p(t);t>y;y++)u(r,y,v?m(f[y],y):f[y]);else for(d=g.call(f),r=new p;!(o=d.next()).done;y++)u(r,y,v?a(d,m,[o.value,y],!0):o.value);return r.length=y,r}})},{"./_create-property":78,"./_ctx":79,"./_export":84,"./_is-array-iter":94,"./_iter-call":97,"./_iter-detect":100,"./_to-length":133,"./_to-object":134,"./core.get-iterator-method":139}],142:[function(e,t,r){"use strict";var n=e("./_add-to-unscopables"),o=e("./_iter-step"),i=e("./_iterators"),a=e("./_to-iobject");t.exports=e("./_iter-define")(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,r):"values"==t?o(0,e[r]):o(0,[r,e[r]])},"values"),i.Arguments=i.Array,n("keys"),n("values"),n("entries")},{"./_add-to-unscopables":64,"./_iter-define":99,"./_iter-step":101,"./_iterators":102,"./_to-iobject":132}],143:[function(e,t,r){"use strict";var n=e("./_collection-strong"),o=e("./_validate-collection");t.exports=e("./_collection")("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=n.getEntry(o(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(o(this,"Map"),0===e?0:e,t)}},n,!0)},{"./_collection":76,"./_collection-strong":74,"./_validate-collection":137}],144:[function(e,t,r){var n=e("./_export");n(n.S+n.F,"Object",{assign:e("./_object-assign")})},{"./_export":84,"./_object-assign":107}],145:[function(e,t,r){var n=e("./_export");n(n.S+n.F*!e("./_descriptors"),"Object",{defineProperty:e("./_object-dp").f})},{"./_descriptors":81,"./_export":84,"./_object-dp":109}],146:[function(e,t,r){arguments[4][54][0].apply(r,arguments)},{dup:54}],147:[function(e,t,r){"use strict";var n,o,i,a,s=e("./_library"),c=e("./_global"),u=e("./_ctx"),l=e("./_classof"),d=e("./_export"),f=e("./_is-object"),p=e("./_a-function"),h=e("./_an-instance"),m=e("./_for-of"),v=e("./_species-constructor"),y=e("./_task").set,g=e("./_microtask")(),b=e("./_new-promise-capability"),_=e("./_perform"),w=e("./_promise-resolve"),k=c.TypeError,P=c.process,x=c.Promise,S="process"==l(P),E=function(){},T=o=b.f,C=!!function(){try{var t=x.resolve(1),r=(t.constructor={})[e("./_wks")("species")]=function(e){e(E,E)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(E)instanceof r}catch(e){}}(),R=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var r=e._c;g(function(){for(var n=e._v,o=1==e._s,i=0;r.length>i;)!function(t){var r,i,a=o?t.ok:t.fail,s=t.resolve,c=t.reject,u=t.domain;try{a?(o||(2==e._h&&D(e),e._h=1),!0===a?r=n:(u&&u.enter(),r=a(n),u&&u.exit()),r===t.promise?c(k("Promise-chain cycle")):(i=R(r))?i.call(r,s,c):s(r)):c(n)}catch(e){c(e)}}(r[i++]);e._c=[],e._n=!1,t&&!e._h&&O(e)})}},O=function(e){y.call(c,function(){var t,r,n,o=e._v,i=A(e);if(i&&(t=_(function(){S?P.emit("unhandledRejection",o,e):(r=c.onunhandledrejection)?r({promise:e,reason:o}):(n=c.console)&&n.error&&n.error("Unhandled promise rejection",o)}),e._h=S||A(e)?2:1),e._a=void 0,i&&t.e)throw t.v})},A=function(e){return 1!==e._h&&0===(e._a||e._c).length},D=function(e){y.call(c,function(){var t;S?P.emit("rejectionHandled",e):(t=c.onrejectionhandled)&&t({promise:e,reason:e._v})})},I=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},M=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw k("Promise can't be resolved itself");(t=R(e))?g(function(){var n={_w:r,_d:!1};try{t.call(e,u(M,n,1),u(I,n,1))}catch(e){I.call(n,e)}}):(r._v=e,r._s=1,j(r,!1))}catch(e){I.call({_w:r,_d:!1},e)}}};C||(x=function(e){h(this,x,"Promise","_h"),p(e),n.call(this);try{e(u(M,this,1),u(I,this,1))}catch(e){I.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=e("./_redefine-all")(x.prototype,{then:function(e,t){var r=T(v(this,x));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=S?P.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&j(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),i=function(){var e=new n;this.promise=e,this.resolve=u(M,e,1),this.reject=u(I,e,1)},b.f=T=function(e){return e===x||e===a?new i(e):o(e)}),d(d.G+d.W+d.F*!C,{Promise:x}),e("./_set-to-string-tag")(x,"Promise"),e("./_set-species")("Promise"),a=e("./_core").Promise,d(d.S+d.F*!C,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),d(d.S+d.F*(s||!C),"Promise",{resolve:function(e){return w(s&&this===a?x:this,e)}}),d(d.S+d.F*!(C&&e("./_iter-detect")(function(e){x.all(e).catch(E)})),"Promise",{all:function(e){var t=this,r=T(t),n=r.resolve,o=r.reject,i=_(function(){var r=[],i=0,a=1;m(e,!1,function(e){var s=i++,c=!1;r.push(void 0),a++,t.resolve(e).then(function(e){c||(c=!0,r[s]=e,--a||n(r))},o)}),--a||n(r)});return i.e&&o(i.v),r.promise},race:function(e){var t=this,r=T(t),n=r.reject,o=_(function(){m(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return o.e&&n(o.v),r.promise}})},{"./_a-function":63,"./_an-instance":65,"./_classof":72,"./_core":77,"./_ctx":79,"./_export":84,"./_for-of":86,"./_global":87,"./_is-object":96,"./_iter-detect":100,"./_library":103,"./_microtask":105,"./_new-promise-capability":106,"./_perform":116,"./_promise-resolve":117,"./_redefine-all":119,"./_set-species":123,"./_set-to-string-tag":124,"./_species-constructor":127,"./_task":129,"./_wks":138}],148:[function(e,t,r){"use strict";var n=e("./_string-at")(!0);e("./_iter-define")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},{"./_iter-define":99,"./_string-at":128}],149:[function(e,t,r){e("./_set-collection-from")("Map")},{"./_set-collection-from":121}],150:[function(e,t,r){e("./_set-collection-of")("Map")},{"./_set-collection-of":122}],151:[function(e,t,r){var n=e("./_export");n(n.P+n.R,"Map",{toJSON:e("./_collection-to-json")("Map")})},{"./_collection-to-json":75,"./_export":84}],152:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_core"),i=e("./_global"),a=e("./_species-constructor"),s=e("./_promise-resolve");n(n.P+n.R,"Promise",{finally:function(e){var t=a(this,o.Promise||i.Promise),r="function"==typeof e;return this.then(r?function(r){return s(t,e()).then(function(){return r})}:e,r?function(r){return s(t,e()).then(function(){throw r})}:e)}})},{"./_core":77,"./_export":84,"./_global":87,"./_promise-resolve":117,"./_species-constructor":127}],153:[function(e,t,r){"use strict";var n=e("./_export"),o=e("./_new-promise-capability"),i=e("./_perform");n(n.S,"Promise",{try:function(e){var t=o.f(this),r=i(e);return(r.e?t.reject:t.resolve)(r.v),t.promise}})},{"./_export":84,"./_new-promise-capability":106,"./_perform":116}],154:[function(e,t,r){e("./es6.array.iterator");for(var n=e("./_global"),o=e("./_hide"),i=e("./_iterators"),a=e("./_wks")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var u=s[c],l=n[u],d=l&&l.prototype;d&&!d[a]&&o(d,a,u),i[u]=i.Array}},{"./_global":87,"./_hide":89,"./_iterators":102,"./_wks":138,"./es6.array.iterator":142}],155:[function(e,t,r){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===v(e)}function n(e){return"boolean"==typeof e}function o(e){return null===e}function i(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function c(e){return"symbol"==typeof e}function u(e){return void 0===e}function l(e){return"[object RegExp]"===v(e)}function d(e){return"object"==typeof e&&null!==e}function f(e){return"[object Date]"===v(e)}function p(e){return"[object Error]"===v(e)||e instanceof Error}function h(e){return"function"==typeof e}function m(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function v(e){return Object.prototype.toString.call(e)}r.isArray=t,r.isBoolean=n,r.isNull=o,r.isNullOrUndefined=i,r.isNumber=a,r.isString=s,r.isSymbol=c,r.isUndefined=u,r.isRegExp=l,r.isObject=d,r.isDate=f,r.isError=p,r.isFunction=h,r.isPrimitive=m,r.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":162}],156:[function(e,t,r){(function(n){function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function i(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+r.humanize(this.diff),t){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(o++,"%c"===e&&(i=o))}),e.splice(i,0,n)}}function a(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(e){try{null==e?r.storage.removeItem("debug"):r.storage.debug=e}catch(e){}}function c(){var e;try{e=r.storage.debug}catch(e){}
return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}r=t.exports=e("./debug"),r.log=a,r.formatArgs=i,r.save=s,r.load=c,r.useColors=o,r.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},r.enable(c())}).call(this,e("_process"))},{"./debug":157,_process:204}],157:[function(e,t,r){function n(e){var t,n=0;for(t in e)n=(n<<5)-n+e.charCodeAt(t),n|=0;return r.colors[Math.abs(n)%r.colors.length]}function o(e){function t(){if(t.enabled){var e=t,n=+new Date,i=n-(o||n);e.diff=i,e.prev=o,e.curr=n,o=n;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=r.coerce(a[0]),"string"!=typeof a[0]&&a.unshift("%O");var c=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(t,n){if("%%"===t)return t;c++;var o=r.formatters[n];if("function"==typeof o){var i=a[c];t=o.call(e,i),a.splice(c,1),c--}return t}),r.formatArgs.call(e,a);(t.log||r.log||console.log.bind(console)).apply(e,a)}}var o;return t.namespace=e,t.enabled=r.enabled(e),t.useColors=r.useColors(),t.color=n(e),t.destroy=i,"function"==typeof r.init&&r.init(t),r.instances.push(t),t}function i(){var e=r.instances.indexOf(this);return-1!==e&&(r.instances.splice(e,1),!0)}function a(e){r.save(e),r.names=[],r.skips=[];var t,n=("string"==typeof e?e:"").split(/[\s,]+/),o=n.length;for(t=0;t<o;t++)n[t]&&(e=n[t].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.substr(1)+"$")):r.names.push(new RegExp("^"+e+"$")));for(t=0;t<r.instances.length;t++){var i=r.instances[t];i.enabled=r.enabled(i.namespace)}}function s(){r.enable("")}function c(e){if("*"===e[e.length-1])return!0;var t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function u(e){return e instanceof Error?e.stack||e.message:e}r=t.exports=o.debug=o.default=o,r.coerce=u,r.disable=s,r.enable=a,r.enabled=c,r.humanize=e("ms"),r.instances=[],r.names=[],r.skips=[],r.formatters={}},{ms:201}],158:[function(e,t,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,r,n,i,c,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(r=this._events[e],s(r))return!1;if(o(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),r.apply(this,i)}else if(a(r))for(i=Array.prototype.slice.call(arguments,1),u=r.slice(),n=u.length,c=0;c<n;c++)u[c].apply(this,i);return!0},n.prototype.addListener=function(e,t){var r;if(!o(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,o(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function r(){this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}if(!o(t))throw TypeError("listener must be a function");var n=!1;return r.listener=t,this.on(e,r),this},n.prototype.removeListener=function(e,t){var r,n,i,s;if(!o(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,n=-1,r===t||o(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(r)){for(s=i;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){n=s;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],o(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){return this._events&&this._events[e]?o(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(o(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],159:[function(e,t,r){var n=e("http"),o=t.exports;for(var i in n)n.hasOwnProperty(i)&&(o[i]=n[i]);o.request=function(e,t){return e||(e={}),e.scheme="https",e.protocol="https:",n.request.call(this,e,t)}},{http:258}],160:[function(e,t,r){r.read=function(e,t,r,n,o){var i,a,s=8*o-n-1,c=(1<<s)-1,u=c>>1,l=-7,d=r?o-1:0,f=r?-1:1,p=e[t+d];for(d+=f,i=p&(1<<-l)-1,p>>=-l,l+=s;l>0;i=256*i+e[t+d],d+=f,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+e[t+d],d+=f,l-=8);if(0===i)i=1-u;else{if(i===c)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=u}return(p?-1:1)*a*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var a,s,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,h=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),t+=a+d>=1?f/c:f*Math.pow(2,1-d),t*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,o),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,o),a=0));o>=8;e[r+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[r+p]=255&a,p+=h,a/=256,u-=8);e[r+p-h]|=128*m}},{}],161:[function(e,t,r){"function"==typeof Object.create?t.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],162:[function(e,t,r){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function o(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||o(e)||!!e._isBuffer)}},{}],163:[function(e,t,r){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],164:[function(t,r,n){!function(e,t){"use strict";"object"==typeof r&&"object"==typeof r.exports?r.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(t,r){"use strict";function n(e,t,r){t=t||se;var n,o=t.createElement("script");if(o.text=e,r)for(n in we)r[n]&&(o[n]=r[n]);t.head.appendChild(o).parentNode.removeChild(o)}function o(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?pe[he.call(e)]||"object":typeof e}function i(e){var t=!!e&&"length"in e&&e.length,r=o(e);return!be(e)&&!_e(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function a(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}function s(e,t,r){return be(t)?ke.grep(e,function(e,n){return!!t.call(e,n,e)!==r}):t.nodeType?ke.grep(e,function(e){return e===t!==r}):"string"!=typeof t?ke.grep(e,function(e){return fe.call(t,e)>-1!==r}):ke.filter(t,e,r)}function c(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function u(e){var t={};return ke.each(e.match(De)||[],function(e,r){t[r]=!0}),t}function l(e){return e}function d(e){throw e}function f(e,t,r,n){var o;try{e&&be(o=e.promise)?o.call(e).done(t).fail(r):e&&be(o=e.then)?o.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}function p(){se.removeEventListener("DOMContentLoaded",p),t.removeEventListener("load",p),ke.ready()}function h(e,t){return t.toUpperCase()}function m(e){return e.replace(Le,"ms-").replace(Fe,h)}function v(){this.expando=ke.expando+v.uid++}function y(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:We.test(e)?JSON.parse(e):e)}function g(e,t,r){var n;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(He,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r=y(r)}catch(e){}qe.set(e,t,r)}else r=void 0;return r}function b(e,t,r,n){var o,i,a=20,s=n?function(){return n.cur()}:function(){return ke.css(e,t,"")},c=s(),u=r&&r[3]||(ke.cssNumber[t]?"":"px"),l=(ke.cssNumber[t]||"px"!==u&&+c)&&Ge.exec(ke.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;a--;)ke.style(e,t,l+u),(1-i)*(1-(i=s()/c||.5))<=0&&(a=0),l/=i;l*=2,ke.style(e,t,l+u),r=r||[]}return r&&(l=+l||+c||0,o=r[1]?l+(r[1]+1)*r[2]:+r[2],n&&(n.unit=u,n.start=l,n.end=o)),o}function _(e){var t,r=e.ownerDocument,n=e.nodeName,o=$e[n];return o||(t=r.body.appendChild(r.createElement(n)),o=ke.css(t,"display"),t.parentNode.removeChild(t),"none"===o&&(o="block"),$e[n]=o,o)}function w(e,t){for(var r,n,o=[],i=0,a=e.length;i<a;i++)n=e[i],n.style&&(r=n.style.display,t?("none"===r&&(o[i]=Be.get(n,"display")||null,o[i]||(n.style.display="")),""===n.style.display&&Ye(n)&&(o[i]=_(n))):"none"!==r&&(o[i]="none",Be.set(n,"display",r)));for(i=0;i<a;i++)null!=o[i]&&(e[i].style.display=o[i]);return e}function k(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&a(e,t)?ke.merge([e],r):r}function P(e,t){for(var r=0,n=e.length;r<n;r++)Be.set(e[r],"globalEval",!t||Be.get(t[r],"globalEval"))}function x(e,t,r,n,i){for(var a,s,c,u,l,d,f=t.createDocumentFragment(),p=[],h=0,m=e.length;h<m;h++)if((a=e[h])||0===a)if("object"===o(a))ke.merge(p,a.nodeType?[a]:a);else if(et.test(a)){for(s=s||f.appendChild(t.createElement("div")),c=(Je.exec(a)||["",""])[1].toLowerCase(),u=Ze[c]||Ze._default,s.innerHTML=u[1]+ke.htmlPrefilter(a)+u[2],d=u[0];d--;)s=s.lastChild;ke.merge(p,s.childNodes),s=f.firstChild,s.textContent=""}else p.push(t.createTextNode(a));for(f.textContent="",h=0;a=p[h++];)if(n&&ke.inArray(a,n)>-1)i&&i.push(a);else if(l=ke.contains(a.ownerDocument,a),s=k(f.appendChild(a),"script"),l&&P(s),r)for(d=0;a=s[d++];)Qe.test(a.type||"")&&r.push(a);return f}function S(){return!0}function E(){return!1}function T(){try{return se.activeElement}catch(e){}}function C(e,t,r,n,o,i){var a,s;if("object"==typeof t){"string"!=typeof r&&(n=n||r,r=void 0);for(s in t)C(e,s,r,n,t[s],i);return e}if(null==n&&null==o?(o=r,n=r=void 0):null==o&&("string"==typeof r?(o=n,n=void 0):(o=n,n=r,r=void 0)),!1===o)o=E;else if(!o)return e;return 1===i&&(a=o,o=function(e){return ke().off(e),a.apply(this,arguments)},o.guid=a.guid||(a.guid=ke.guid++)),e.each(function(){ke.event.add(this,t,o,n,r)})}function R(e,t){return a(e,"table")&&a(11!==t.nodeType?t:t.firstChild,"tr")?ke(e).children("tbody")[0]||e:e}function j(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function O(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function A(e,t){var r,n,o,i,a,s,c,u;if(1===t.nodeType){if(Be.hasData(e)&&(i=Be.access(e),a=Be.set(t,i),u=i.events)){delete a.handle,a.events={};for(o in u)for(r=0,n=u[o].length;r<n;r++)ke.event.add(t,o,u[o][r])}qe.hasData(e)&&(s=qe.access(e),c=ke.extend({},s),qe.set(t,c))}}function D(e,t){var r=t.nodeName.toLowerCase();"input"===r&&Xe.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function I(e,t,r,o){t=le.apply([],t);var i,a,s,c,u,l,d=0,f=e.length,p=f-1,h=t[0],m=be(h);if(m||f>1&&"string"==typeof h&&!ge.checkClone&&st.test(h))return e.each(function(n){var i=e.eq(n);m&&(t[0]=h.call(this,n,i.html())),I(i,t,r,o)});if(f&&(i=x(t,e[0].ownerDocument,!1,e,o),a=i.firstChild,1===i.childNodes.length&&(i=a),a||o)){for(s=ke.map(k(i,"script"),j),c=s.length;d<f;d++)u=i,d!==p&&(u=ke.clone(u,!0,!0),c&&ke.merge(s,k(u,"script"))),r.call(e[d],u,d);if(c)for(l=s[s.length-1].ownerDocument,ke.map(s,O),d=0;d<c;d++)u=s[d],Qe.test(u.type||"")&&!Be.access(u,"globalEval")&&ke.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?ke._evalUrl&&ke._evalUrl(u.src):n(u.textContent.replace(ct,""),l,u))}return e}function M(e,t,r){for(var n,o=t?ke.filter(t,e):e,i=0;null!=(n=o[i]);i++)r||1!==n.nodeType||ke.cleanData(k(n)),n.parentNode&&(r&&ke.contains(n.ownerDocument,n)&&P(k(n,"script")),n.parentNode.removeChild(n));return e}function N(e,t,r){var n,o,i,a,s=e.style;return r=r||lt(e),r&&(a=r.getPropertyValue(t)||r[t],""!==a||ke.contains(e.ownerDocument,e)||(a=ke.style(e,t)),!ge.pixelBoxStyles()&&ut.test(a)&&dt.test(t)&&(n=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=r.width,s.width=n,s.minWidth=o,s.maxWidth=i)),void 0!==a?a+"":a}function L(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function F(e){if(e in yt)return e;for(var t=e[0].toUpperCase()+e.slice(1),r=vt.length;r--;)if((e=vt[r]+t)in yt)return e}function U(e){var t=ke.cssProps[e];return t||(t=ke.cssProps[e]=F(e)||e),t}function B(e,t,r){var n=Ge.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function q(e,t,r,n,o,i){var a="width"===t?1:0,s=0,c=0;if(r===(n?"border":"content"))return 0;for(;a<4;a+=2)"margin"===r&&(c+=ke.css(e,r+Ve[a],!0,o)),n?("content"===r&&(c-=ke.css(e,"padding"+Ve[a],!0,o)),"margin"!==r&&(c-=ke.css(e,"border"+Ve[a]+"Width",!0,o))):(c+=ke.css(e,"padding"+Ve[a],!0,o),"padding"!==r?c+=ke.css(e,"border"+Ve[a]+"Width",!0,o):s+=ke.css(e,"border"+Ve[a]+"Width",!0,o));return!n&&i>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-i-c-s-.5))),c}function W(e,t,r){var n=lt(e),o=N(e,t,n),i="border-box"===ke.css(e,"boxSizing",!1,n),a=i;if(ut.test(o)){if(!r)return o;o="auto"}return a=a&&(ge.boxSizingReliable()||o===e.style[t]),("auto"===o||!parseFloat(o)&&"inline"===ke.css(e,"display",!1,n))&&(o=e["offset"+t[0].toUpperCase()+t.slice(1)],a=!0),(o=parseFloat(o)||0)+q(e,t,r||(i?"border":"content"),a,n,o)+"px"}function H(e,t,r,n,o){return new H.prototype.init(e,t,r,n,o)}function z(){bt&&(!1===se.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(z):t.setTimeout(z,ke.fx.interval),ke.fx.tick())}function G(){return t.setTimeout(function(){gt=void 0}),gt=Date.now()}function V(e,t){var r,n=0,o={height:e};for(t=t?1:0;n<4;n+=2-t)r=Ve[n],o["margin"+r]=o["padding"+r]=e;return t&&(o.opacity=o.width=e),o}function Y(e,t,r){for(var n,o=(X.tweeners[t]||[]).concat(X.tweeners["*"]),i=0,a=o.length;i<a;i++)if(n=o[i].call(r,t,e))return n}function K(e,t,r){var n,o,i,a,s,c,u,l,d="width"in t||"height"in t,f=this,p={},h=e.style,m=e.nodeType&&Ye(e),v=Be.get(e,"fxshow");r.queue||(a=ke._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,ke.queue(e,"fx").length||a.empty.fire()})}));for(n in t)if(o=t[n],_t.test(o)){if(delete t[n],i=i||"toggle"===o,o===(m?"hide":"show")){if("show"!==o||!v||void 0===v[n])continue;m=!0}p[n]=v&&v[n]||ke.style(e,n)}if((c=!ke.isEmptyObject(t))||!ke.isEmptyObject(p)){d&&1===e.nodeType&&(r.overflow=[h.overflow,h.overflowX,h.overflowY],u=v&&v.display,null==u&&(u=Be.get(e,"display")),l=ke.css(e,"display"),"none"===l&&(u?l=u:(w([e],!0),u=e.style.display||u,l=ke.css(e,"display"),w([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===ke.css(e,"float")&&(c||(f.done(function(){h.display=u}),null==u&&(l=h.display,u="none"===l?"":l)),h.display="inline-block")),r.overflow&&(h.overflow="hidden",f.always(function(){h.overflow=r.overflow[0],h.overflowX=r.overflow[1],h.overflowY=r.overflow[2]})),c=!1;for(n in p)c||(v?"hidden"in v&&(m=v.hidden):v=Be.access(e,"fxshow",{display:u}),i&&(v.hidden=!m),m&&w([e],!0),f.done(function(){m||w([e]),Be.remove(e,"fxshow");for(n in p)ke.style(e,n,p[n])})),c=Y(m?v[n]:0,n,f),n in v||(v[n]=c.start,m&&(c.end=c.start,c.start=0))}}function $(e,t){var r,n,o,i,a;for(r in e)if(n=m(r),o=t[n],i=e[r],Array.isArray(i)&&(o=i[1],i=e[r]=i[0]),r!==n&&(e[n]=i,delete e[r]),(a=ke.cssHooks[n])&&"expand"in a){i=a.expand(i),delete e[n];for(r in i)r in e||(e[r]=i[r],t[r]=o)}else t[n]=o}function X(e,t,r){var n,o,i=0,a=X.prefilters.length,s=ke.Deferred().always(function(){delete c.elem}),c=function(){if(o)return!1;for(var t=gt||G(),r=Math.max(0,u.startTime+u.duration-t),n=r/u.duration||0,i=1-n,a=0,c=u.tweens.length;a<c;a++)u.tweens[a].run(i);return s.notifyWith(e,[u,i,r]),i<1&&c?r:(c||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ke.extend({},t),opts:ke.extend(!0,{specialEasing:{},easing:ke.easing._default},r),originalProperties:t,originalOptions:r,startTime:gt||G(),duration:r.duration,tweens:[],createTween:function(t,r){var n=ke.Tween(e,u.opts,t,r,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(n),n},stop:function(t){var r=0,n=t?u.tweens.length:0;if(o)return this;for(o=!0;r<n;r++)u.tweens[r].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for($(l,u.opts.specialEasing);i<a;i++)if(n=X.prefilters[i].call(u,e,l,u.opts))return be(n.stop)&&(ke._queueHooks(u.elem,u.opts.queue).stop=n.stop.bind(n)),n;return ke.map(l,Y,u),be(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),ke.fx.timer(ke.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}function J(e){return(e.match(De)||[]).join(" ")}function Q(e){return e.getAttribute&&e.getAttribute("class")||""}function Z(e){return Array.isArray(e)?e:"string"==typeof e?e.match(De)||[]:[]}function ee(e,t,r,n){var i;if(Array.isArray(t))ke.each(t,function(t,o){r||At.test(e)?n(e,o):ee(e+"["+("object"==typeof o&&null!=o?t:"")+"]",o,r,n)});else if(r||"object"!==o(t))n(e,t);else for(i in t)ee(e+"["+i+"]",t[i],r,n)}function te(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var n,o=0,i=t.toLowerCase().match(De)||[];if(be(r))for(;n=i[o++];)"+"===n[0]?(n=n.slice(1)||"*",(e[n]=e[n]||[]).unshift(r)):(e[n]=e[n]||[]).push(r)}}function re(e,t,r,n){function o(s){var c;return i[s]=!0,ke.each(e[s]||[],function(e,s){var u=s(t,r,n);return"string"!=typeof u||a||i[u]?a?!(c=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),c}var i={},a=e===zt;return o(t.dataTypes[0])||!i["*"]&&o("*")}function ne(e,t){var r,n,o=ke.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((o[r]?e:n||(n={}))[r]=t[r]);return n&&ke.extend(!0,e,n),e}function oe(e,t,r){for(var n,o,i,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(o in s)if(s[o]&&s[o].test(n)){c.unshift(o);break}if(c[0]in r)i=c[0];else{for(o in r){if(!c[0]||e.converters[o+" "+c[0]]){i=o;break}a||(a=o)}i=i||a}if(i)return i!==c[0]&&c.unshift(i),r[i]}function ie(e,t,r,n){var o,i,a,s,c,u={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(i=l.shift();i;)if(e.responseFields[i]&&(r[e.responseFields[i]]=t),!c&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=i,i=l.shift())if("*"===i)i=c;else if("*"!==c&&c!==i){if(!(a=u[c+" "+i]||u["* "+i]))for(o in u)if(s=o.split(" "),s[1]===i&&(a=u[c+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[o]:!0!==u[o]&&(i=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+i}}}return{state:"success",data:t}}var ae=[],se=t.document,ce=Object.getPrototypeOf,ue=ae.slice,le=ae.concat,de=ae.push,fe=ae.indexOf,pe={},he=pe.toString,me=pe.hasOwnProperty,ve=me.toString,ye=ve.call(Object),ge={},be=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},_e=function(e){return null!=e&&e===e.window},we={type:!0,src:!0,noModule:!0},ke=function(e,t){return new ke.fn.init(e,t)},Pe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;ke.fn=ke.prototype={jquery:"3.3.1",constructor:ke,length:0,toArray:function(){return ue.call(this)},get:function(e){return null==e?ue.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=ke.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return ke.each(this,e)},map:function(e){return this.pushStack(ke.map(this,function(t,r){return e.call(t,r,t)}))},slice:function(){return this.pushStack(ue.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:de,sort:ae.sort,splice:ae.splice},ke.extend=ke.fn.extend=function(){var e,t,r,n,o,i,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||be(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)r=a[t],n=e[t],a!==n&&(u&&n&&(ke.isPlainObject(n)||(o=Array.isArray(n)))?(o?(o=!1,i=r&&Array.isArray(r)?r:[]):i=r&&ke.isPlainObject(r)?r:{},a[t]=ke.extend(u,i,n)):void 0!==n&&(a[t]=n));return a},ke.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==he.call(e))&&(!(t=ce(e))||"function"==typeof(r=me.call(t,"constructor")&&t.constructor)&&ve.call(r)===ye)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e){n(e)},each:function(e,t){var r,n=0;if(i(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(Pe,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(i(Object(e))?ke.merge(r,"string"==typeof e?[e]:e):de.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:fe.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,o=e.length;n<r;n++)e[o++]=t[n];return e.length=o,e},grep:function(e,t,r){for(var n=[],o=0,i=e.length,a=!r;o<i;o++)!t(e[o],o)!==a&&n.push(e[o]);return n},map:function(e,t,r){var n,o,a=0,s=[];if(i(e))for(n=e.length;a<n;a++)null!=(o=t(e[a],a,r))&&s.push(o);else for(a in e)null!=(o=t(e[a],a,r))&&s.push(o);return le.apply([],s)},guid:1,support:ge}),"function"==typeof Symbol&&(ke.fn[Symbol.iterator]=ae[Symbol.iterator]),ke.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){pe["[object "+t+"]"]=t.toLowerCase()});var xe=function(e){function t(e,t,r,n){var o,i,a,s,c,l,f,p=t&&t.ownerDocument,h=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==h&&9!==h&&11!==h)return r;if(!n&&((t?t.ownerDocument||t:U)!==O&&j(t),t=t||O,D)){if(11!==h&&(c=me.exec(e)))if(o=c[1]){if(9===h){if(!(a=t.getElementById(o)))return r;if(a.id===o)return r.push(a),r}else if(p&&(a=p.getElementById(o))&&L(t,a)&&a.id===o)return r.push(a),r}else{if(c[2])return X.apply(r,t.getElementsByTagName(e)),r;if((o=c[3])&&_.getElementsByClassName&&t.getElementsByClassName)return X.apply(r,t.getElementsByClassName(o)),r}if(_.qsa&&!z[e+" "]&&(!I||!I.test(e))){if(1!==h)p=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(be,_e):t.setAttribute("id",s=F),l=x(e),i=l.length;i--;)l[i]="#"+s+" "+d(l[i]);f=l.join(","),p=ve.test(e)&&u(t.parentNode)||t}if(f)try{return X.apply(r,p.querySelectorAll(f)),r}catch(e){}finally{s===F&&t.removeAttribute("id")}}}return E(e.replace(ie,"$1"),t,r,n)}function r(){function e(r,n){return t.push(r+" ")>w.cacheLength&&delete e[t.shift()],e[r+" "]=n}var t=[];return e}function n(e){return e[F]=!0,e}function o(e){var t=O.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var r=e.split("|"),n=r.length;n--;)w.attrHandle[r[n]]=t}function a(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function s(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ke(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function c(e){return n(function(t){return t=+t,n(function(r,n){for(var o,i=e([],r.length,t),a=i.length;a--;)r[o=i[a]]&&(r[o]=!(n[o]=r[o]))})})}function u(e){return e&&void 0!==e.getElementsByTagName&&e}function l(){}function d(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function f(e,t,r){var n=t.dir,o=t.next,i=o||n,a=r&&"parentNode"===i,s=q++;return t.first?function(t,r,o){for(;t=t[n];)if(1===t.nodeType||a)return e(t,r,o);return!1}:function(t,r,c){var u,l,d,f=[B,s];if(c){for(;t=t[n];)if((1===t.nodeType||a)&&e(t,r,c))return!0}else for(;t=t[n];)if(1===t.nodeType||a)if(d=t[F]||(t[F]={}),l=d[t.uniqueID]||(d[t.uniqueID]={}),o&&o===t.nodeName.toLowerCase())t=t[n]||t;else{if((u=l[i])&&u[0]===B&&u[1]===s)return f[2]=u[2];if(l[i]=f,f[2]=e(t,r,c))return!0}return!1}}function p(e){return e.length>1?function(t,r,n){for(var o=e.length;o--;)if(!e[o](t,r,n))return!1;return!0}:e[0]}function h(e,r,n){for(var o=0,i=r.length;o<i;o++)t(e,r[o],n);return n}function m(e,t,r,n,o){for(var i,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(i=e[s])&&(r&&!r(i,n,o)||(a.push(i),u&&t.push(s)));return a}function v(e,t,r,o,i,a){return o&&!o[F]&&(o=v(o)),i&&!i[F]&&(i=v(i,a)),n(function(n,a,s,c){var u,l,d,f=[],p=[],v=a.length,y=n||h(t||"*",s.nodeType?[s]:s,[]),g=!e||!n&&t?y:m(y,f,e,s,c),b=r?i||(n?e:v||o)?[]:a:g;if(r&&r(g,b,s,c),o)for(u=m(b,p),o(u,[],s,c),l=u.length;l--;)(d=u[l])&&(b[p[l]]=!(g[p[l]]=d));if(n){if(i||e){if(i){for(u=[],l=b.length;l--;)(d=b[l])&&u.push(g[l]=d);i(null,b=[],u,c)}for(l=b.length;l--;)(d=b[l])&&(u=i?Q(n,d):f[l])>-1&&(n[u]=!(a[u]=d))}}else b=m(b===a?b.splice(v,b.length):b),i?i(null,a,b,c):X.apply(a,b)})}function y(e){for(var t,r,n,o=e.length,i=w.relative[e[0].type],a=i||w.relative[" "],s=i?1:0,c=f(function(e){return e===t},a,!0),u=f(function(e){return Q(t,e)>-1},a,!0),l=[function(e,r,n){var o=!i&&(n||r!==T)||((t=r).nodeType?c(e,r,n):u(e,r,n));return t=null,o}];s<o;s++)if(r=w.relative[e[s].type])l=[f(p(l),r)];else{if(r=w.filter[e[s].type].apply(null,e[s].matches),r[F]){for(n=++s;n<o&&!w.relative[e[n].type];n++);return v(s>1&&p(l),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ie,"$1"),r,s<n&&y(e.slice(s,n)),n<o&&y(e=e.slice(n)),n<o&&d(e))}l.push(r)}return p(l)}function g(e,r){var o=r.length>0,i=e.length>0,a=function(n,a,s,c,u){var l,d,f,p=0,h="0",v=n&&[],y=[],g=T,b=n||i&&w.find.TAG("*",u),_=B+=null==g?1:Math.random()||.1,k=b.length;for(u&&(T=a===O||a||u);h!==k&&null!=(l=b[h]);h++){if(i&&l){for(d=0,a||l.ownerDocument===O||(j(l),s=!D);f=e[d++];)if(f(l,a||O,s)){c.push(l);break}u&&(B=_)}o&&((l=!f&&l)&&p--,n&&v.push(l))}if(p+=h,o&&h!==p){for(d=0;f=r[d++];)f(v,y,a,s);if(n){if(p>0)for(;h--;)v[h]||y[h]||(y[h]=K.call(c));y=m(y)}X.apply(c,y),u&&!n&&y.length>0&&p+r.length>1&&t.uniqueSort(c)}return u&&(B=_,T=g),v};return o?n(a):a}var b,_,w,k,P,x,S,E,T,C,R,j,O,A,D,I,M,N,L,F="sizzle"+1*new Date,U=e.document,B=0,q=0,W=r(),H=r(),z=r(),G=function(e,t){return e===t&&(R=!0),0},V={}.hasOwnProperty,Y=[],K=Y.pop,$=Y.push,X=Y.push,J=Y.slice,Q=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ee="[\\x20\\t\\r\\n\\f]",te="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",re="\\["+ee+"*("+te+")(?:"+ee+"*([*^$|!~]?=)"+ee+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+te+"))|)"+ee+"*\\]",ne=":("+te+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",oe=new RegExp(ee+"+","g"),ie=new RegExp("^"+ee+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ee+"+$","g"),ae=new RegExp("^"+ee+"*,"+ee+"*"),se=new RegExp("^"+ee+"*([>+~]|"+ee+")"+ee+"*"),ce=new RegExp("="+ee+"*([^\\]'\"]*?)"+ee+"*\\]","g"),ue=new RegExp(ne),le=new RegExp("^"+te+"$"),de={ID:new RegExp("^#("+te+")"),CLASS:new RegExp("^\\.("+te+")"),TAG:new RegExp("^("+te+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ne),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ee+"*(even|odd|(([+-]|)(\\d*)n|)"+ee+"*(?:([+-]|)"+ee+"*(\\d+)|))"+ee+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+ee+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ee+"*((?:-\\d)?\\d*)"+ee+"*\\)|)(?=[^-]|$)","i")},fe=/^(?:input|select|textarea|button)$/i,pe=/^h\d$/i,he=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,ye=new RegExp("\\\\([\\da-f]{1,6}"+ee+"?|("+ee+")|.)","ig"),ge=function(e,t,r){var n="0x"+t-65536;return n!==n||r?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_e=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},we=function(){j()},ke=f(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{X.apply(Y=J.call(U.childNodes),U.childNodes),Y[U.childNodes.length].nodeType}catch(e){X={apply:Y.length?function(e,t){$.apply(e,J.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}_=t.support={},P=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},j=t.setDocument=function(e){var t,r,n=e?e.ownerDocument||e:U;return n!==O&&9===n.nodeType&&n.documentElement?(O=n,A=O.documentElement,D=!P(O),U!==O&&(r=O.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",we,!1):r.attachEvent&&r.attachEvent("onunload",we)),_.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),_.getElementsByTagName=o(function(e){return e.appendChild(O.createComment("")),!e.getElementsByTagName("*").length}),_.getElementsByClassName=he.test(O.getElementsByClassName),_.getById=o(function(e){return A.appendChild(e).id=F,!O.getElementsByName||!O.getElementsByName(F).length}),_.getById?(w.filter.ID=function(e){var t=e.replace(ye,ge);return function(e){return e.getAttribute("id")===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&D){var r=t.getElementById(e);return r?[r]:[]}}):(w.filter.ID=function(e){
var t=e.replace(ye,ge);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},w.find.ID=function(e,t){if(void 0!==t.getElementById&&D){var r,n,o,i=t.getElementById(e);if(i){if((r=i.getAttributeNode("id"))&&r.value===e)return[i];for(o=t.getElementsByName(e),n=0;i=o[n++];)if((r=i.getAttributeNode("id"))&&r.value===e)return[i]}return[]}}),w.find.TAG=_.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):_.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;r=i[o++];)1===r.nodeType&&n.push(r);return n}return i},w.find.CLASS=_.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&D)return t.getElementsByClassName(e)},M=[],I=[],(_.qsa=he.test(O.querySelectorAll))&&(o(function(e){A.appendChild(e).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+ee+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||I.push("\\["+ee+"*(?:value|"+Z+")"),e.querySelectorAll("[id~="+F+"-]").length||I.push("~="),e.querySelectorAll(":checked").length||I.push(":checked"),e.querySelectorAll("a#"+F+"+*").length||I.push(".#.+[+~]")}),o(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=O.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&I.push("name"+ee+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&I.push(":enabled",":disabled"),A.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&I.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),I.push(",.*:")})),(_.matchesSelector=he.test(N=A.matches||A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.msMatchesSelector))&&o(function(e){_.disconnectedMatch=N.call(e,"*"),N.call(e,"[s!='']:x"),M.push("!=",ne)}),I=I.length&&new RegExp(I.join("|")),M=M.length&&new RegExp(M.join("|")),t=he.test(A.compareDocumentPosition),L=t||he.test(A.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(r.contains?r.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return R=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!_.sortDetached&&t.compareDocumentPosition(e)===r?e===O||e.ownerDocument===U&&L(U,e)?-1:t===O||t.ownerDocument===U&&L(U,t)?1:C?Q(C,e)-Q(C,t):0:4&r?-1:1)}:function(e,t){if(e===t)return R=!0,0;var r,n=0,o=e.parentNode,i=t.parentNode,s=[e],c=[t];if(!o||!i)return e===O?-1:t===O?1:o?-1:i?1:C?Q(C,e)-Q(C,t):0;if(o===i)return a(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)c.unshift(r);for(;s[n]===c[n];)n++;return n?a(s[n],c[n]):s[n]===U?-1:c[n]===U?1:0},O):O},t.matches=function(e,r){return t(e,null,null,r)},t.matchesSelector=function(e,r){if((e.ownerDocument||e)!==O&&j(e),r=r.replace(ce,"='$1']"),_.matchesSelector&&D&&!z[r+" "]&&(!M||!M.test(r))&&(!I||!I.test(r)))try{var n=N.call(e,r);if(n||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return t(r,O,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==O&&j(e),L(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==O&&j(e);var r=w.attrHandle[t.toLowerCase()],n=r&&V.call(w.attrHandle,t.toLowerCase())?r(e,t,!D):void 0;return void 0!==n?n:_.attributes||!D?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},t.escape=function(e){return(e+"").replace(be,_e)},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,r=[],n=0,o=0;if(R=!_.detectDuplicates,C=!_.sortStable&&e.slice(0),e.sort(G),R){for(;t=e[o++];)t===e[o]&&(n=r.push(o));for(;n--;)e.splice(r[n],1)}return C=null,e},k=t.getText=function(e){var t,r="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=k(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n++];)r+=k(t);return r},w=t.selectors={cacheLength:50,createPseudo:n,match:de,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ye,ge),e[3]=(e[3]||e[4]||e[5]||"").replace(ye,ge),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return de.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&ue.test(r)&&(t=x(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ye,ge).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=W[e+" "];return t||(t=new RegExp("(^|"+ee+")"+e+"("+ee+"|$)"))&&W(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,r,n){return function(o){var i=t.attr(o,e);return null==i?"!="===r:!r||(i+="","="===r?i===n:"!="===r?i!==n:"^="===r?n&&0===i.indexOf(n):"*="===r?n&&i.indexOf(n)>-1:"$="===r?n&&i.slice(-n.length)===n:"~="===r?(" "+i.replace(oe," ")+" ").indexOf(n)>-1:"|="===r&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,r,n,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===n&&0===o?function(e){return!!e.parentNode}:function(t,r,c){var u,l,d,f,p,h,m=i!==a?"nextSibling":"previousSibling",v=t.parentNode,y=s&&t.nodeName.toLowerCase(),g=!c&&!s,b=!1;if(v){if(i){for(;m;){for(f=t;f=f[m];)if(s?f.nodeName.toLowerCase()===y:1===f.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&g){for(f=v,d=f[F]||(f[F]={}),l=d[f.uniqueID]||(d[f.uniqueID]={}),u=l[e]||[],p=u[0]===B&&u[1],b=p&&u[2],f=p&&v.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||h.pop();)if(1===f.nodeType&&++b&&f===t){l[e]=[B,p,b];break}}else if(g&&(f=t,d=f[F]||(f[F]={}),l=d[f.uniqueID]||(d[f.uniqueID]={}),u=l[e]||[],p=u[0]===B&&u[1],b=p),!1===b)for(;(f=++p&&f&&f[m]||(b=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==y:1!==f.nodeType)||!++b||(g&&(d=f[F]||(f[F]={}),l=d[f.uniqueID]||(d[f.uniqueID]={}),l[e]=[B,b]),f!==t)););return(b-=o)===n||b%n==0&&b/n>=0}}},PSEUDO:function(e,r){var o,i=w.pseudos[e]||w.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[F]?i(r):i.length>1?(o=[e,e,"",r],w.setFilters.hasOwnProperty(e.toLowerCase())?n(function(e,t){for(var n,o=i(e,r),a=o.length;a--;)n=Q(e,o[a]),e[n]=!(t[n]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:n(function(e){var t=[],r=[],o=S(e.replace(ie,"$1"));return o[F]?n(function(e,t,r,n){for(var i,a=o(e,null,n,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,n,i){return t[0]=e,o(t,null,i,r),t[0]=null,!r.pop()}}),has:n(function(e){return function(r){return t(e,r).length>0}}),contains:n(function(e){return e=e.replace(ye,ge),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:n(function(e){return le.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(ye,ge).toLowerCase(),function(t){var r;do{if(r=D?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===A},focus:function(e){return e===O.activeElement&&(!O.hasFocus||O.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:s(!1),disabled:s(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!w.pseudos.empty(e)},header:function(e){return pe.test(e.nodeName)},input:function(e){return fe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,r){return[r<0?r+t:r]}),even:c(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:c(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:c(function(e,t,r){for(var n=r<0?r+t:r;--n>=0;)e.push(n);return e}),gt:c(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}},w.pseudos.nth=w.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[b]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(b);for(b in{submit:!0,reset:!0})w.pseudos[b]=function(e){return function(t){var r=t.nodeName.toLowerCase();return("input"===r||"button"===r)&&t.type===e}}(b);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,x=t.tokenize=function(e,r){var n,o,i,a,s,c,u,l=H[e+" "];if(l)return r?0:l.slice(0);for(s=e,c=[],u=w.preFilter;s;){n&&!(o=ae.exec(s))||(o&&(s=s.slice(o[0].length)||s),c.push(i=[])),n=!1,(o=se.exec(s))&&(n=o.shift(),i.push({value:n,type:o[0].replace(ie," ")}),s=s.slice(n.length));for(a in w.filter)!(o=de[a].exec(s))||u[a]&&!(o=u[a](o))||(n=o.shift(),i.push({value:n,type:a,matches:o}),s=s.slice(n.length));if(!n)break}return r?s.length:s?t.error(e):H(e,c).slice(0)},S=t.compile=function(e,t){var r,n=[],o=[],i=z[e+" "];if(!i){for(t||(t=x(e)),r=t.length;r--;)i=y(t[r]),i[F]?n.push(i):o.push(i);i=z(e,g(o,n)),i.selector=e}return i},E=t.select=function(e,t,r,n){var o,i,a,s,c,l="function"==typeof e&&e,f=!n&&x(e=l.selector||e);if(r=r||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&9===t.nodeType&&D&&w.relative[i[1].type]){if(!(t=(w.find.ID(a.matches[0].replace(ye,ge),t)||[])[0]))return r;l&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=de.needsContext.test(e)?0:i.length;o--&&(a=i[o],!w.relative[s=a.type]);)if((c=w.find[s])&&(n=c(a.matches[0].replace(ye,ge),ve.test(i[0].type)&&u(t.parentNode)||t))){if(i.splice(o,1),!(e=n.length&&d(i)))return X.apply(r,n),r;break}}return(l||S(e,f))(n,t,!D,r,!t||ve.test(e)&&u(t.parentNode)||t),r},_.sortStable=F.split("").sort(G).join("")===F,_.detectDuplicates=!!R,j(),_.sortDetached=o(function(e){return 1&e.compareDocumentPosition(O.createElement("fieldset"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),_.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||i(Z,function(e,t,r){var n;if(!r)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),t}(t);ke.find=xe,ke.expr=xe.selectors,ke.expr[":"]=ke.expr.pseudos,ke.uniqueSort=ke.unique=xe.uniqueSort,ke.text=xe.getText,ke.isXMLDoc=xe.isXML,ke.contains=xe.contains,ke.escapeSelector=xe.escape;var Se=function(e,t,r){for(var n=[],o=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&ke(e).is(r))break;n.push(e)}return n},Ee=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},Te=ke.expr.match.needsContext,Ce=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;ke.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?ke.find.matchesSelector(n,e)?[n]:[]:ke.find.matches(e,ke.grep(t,function(e){return 1===e.nodeType}))},ke.fn.extend({find:function(e){var t,r,n=this.length,o=this;if("string"!=typeof e)return this.pushStack(ke(e).filter(function(){for(t=0;t<n;t++)if(ke.contains(o[t],this))return!0}));for(r=this.pushStack([]),t=0;t<n;t++)ke.find(e,o[t],r);return n>1?ke.uniqueSort(r):r},filter:function(e){return this.pushStack(s(this,e||[],!1))},not:function(e){return this.pushStack(s(this,e||[],!0))},is:function(e){return!!s(this,"string"==typeof e&&Te.test(e)?ke(e):e||[],!1).length}});var Re,je=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(ke.fn.init=function(e,t,r){var n,o;if(!e)return this;if(r=r||Re,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:je.exec(e))||!n[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ke?t[0]:t,ke.merge(this,ke.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:se,!0)),Ce.test(n[1])&&ke.isPlainObject(t))for(n in t)be(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return o=se.getElementById(n[2]),o&&(this[0]=o,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):be(e)?void 0!==r.ready?r.ready(e):e(ke):ke.makeArray(e,this)}).prototype=ke.fn,Re=ke(se);var Oe=/^(?:parents|prev(?:Until|All))/,Ae={children:!0,contents:!0,next:!0,prev:!0};ke.fn.extend({has:function(e){var t=ke(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(ke.contains(this,t[e]))return!0})},closest:function(e,t){var r,n=0,o=this.length,i=[],a="string"!=typeof e&&ke(e);if(!Te.test(e))for(;n<o;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(a?a.index(r)>-1:1===r.nodeType&&ke.find.matchesSelector(r,e))){i.push(r);break}return this.pushStack(i.length>1?ke.uniqueSort(i):i)},index:function(e){return e?"string"==typeof e?fe.call(ke(e),this[0]):fe.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ke.uniqueSort(ke.merge(this.get(),ke(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ke.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Se(e,"parentNode")},parentsUntil:function(e,t,r){return Se(e,"parentNode",r)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return Se(e,"nextSibling")},prevAll:function(e){return Se(e,"previousSibling")},nextUntil:function(e,t,r){return Se(e,"nextSibling",r)},prevUntil:function(e,t,r){return Se(e,"previousSibling",r)},siblings:function(e){return Ee((e.parentNode||{}).firstChild,e)},children:function(e){return Ee(e.firstChild)},contents:function(e){return a(e,"iframe")?e.contentDocument:(a(e,"template")&&(e=e.content||e),ke.merge([],e.childNodes))}},function(e,t){ke.fn[e]=function(r,n){var o=ke.map(this,t,r);return"Until"!==e.slice(-5)&&(n=r),n&&"string"==typeof n&&(o=ke.filter(n,o)),this.length>1&&(Ae[e]||ke.uniqueSort(o),Oe.test(e)&&o.reverse()),this.pushStack(o)}});var De=/[^\x20\t\r\n\f]+/g;ke.Callbacks=function(e){e="string"==typeof e?u(e):ke.extend({},e);var t,r,n,i,a=[],s=[],c=-1,l=function(){for(i=i||e.once,n=t=!0;s.length;c=-1)for(r=s.shift();++c<a.length;)!1===a[c].apply(r[0],r[1])&&e.stopOnFalse&&(c=a.length,r=!1);e.memory||(r=!1),t=!1,i&&(a=r?[]:"")},d={add:function(){return a&&(r&&!t&&(c=a.length-1,s.push(r)),function t(r){ke.each(r,function(r,n){be(n)?e.unique&&d.has(n)||a.push(n):n&&n.length&&"string"!==o(n)&&t(n)})}(arguments),r&&!t&&l()),this},remove:function(){return ke.each(arguments,function(e,t){for(var r;(r=ke.inArray(t,a,r))>-1;)a.splice(r,1),r<=c&&c--}),this},has:function(e){return e?ke.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=s=[],a=r="",this},disabled:function(){return!a},lock:function(){return i=s=[],r||t||(a=r=""),this},locked:function(){return!!i},fireWith:function(e,r){return i||(r=r||[],r=[e,r.slice?r.slice():r],s.push(r),t||l()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},ke.extend({Deferred:function(e){var r=[["notify","progress",ke.Callbacks("memory"),ke.Callbacks("memory"),2],["resolve","done",ke.Callbacks("once memory"),ke.Callbacks("once memory"),0,"resolved"],["reject","fail",ke.Callbacks("once memory"),ke.Callbacks("once memory"),1,"rejected"]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var e=arguments;return ke.Deferred(function(t){ke.each(r,function(r,n){var o=be(e[n[4]])&&e[n[4]];i[n[1]](function(){var e=o&&o.apply(this,arguments);e&&be(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[n[0]+"With"](this,o?[e]:arguments)})}),e=null}).promise()},then:function(e,n,o){function i(e,r,n,o){return function(){var s=this,c=arguments,u=function(){var t,u;if(!(e<a)){if((t=n.apply(s,c))===r.promise())throw new TypeError("Thenable self-resolution");u=t&&("object"==typeof t||"function"==typeof t)&&t.then,be(u)?o?u.call(t,i(a,r,l,o),i(a,r,d,o)):(a++,u.call(t,i(a,r,l,o),i(a,r,d,o),i(a,r,l,r.notifyWith))):(n!==l&&(s=void 0,c=[t]),(o||r.resolveWith)(s,c))}},f=o?u:function(){try{u()}catch(t){ke.Deferred.exceptionHook&&ke.Deferred.exceptionHook(t,f.stackTrace),e+1>=a&&(n!==d&&(s=void 0,c=[t]),r.rejectWith(s,c))}};e?f():(ke.Deferred.getStackHook&&(f.stackTrace=ke.Deferred.getStackHook()),t.setTimeout(f))}}var a=0;return ke.Deferred(function(t){r[0][3].add(i(0,t,be(o)?o:l,t.notifyWith)),r[1][3].add(i(0,t,be(e)?e:l)),r[2][3].add(i(0,t,be(n)?n:d))}).promise()},promise:function(e){return null!=e?ke.extend(e,o):o}},i={};return ke.each(r,function(e,t){var a=t[2],s=t[5];o[t[1]]=a.add,s&&a.add(function(){n=s},r[3-e][2].disable,r[3-e][3].disable,r[0][2].lock,r[0][3].lock),a.add(t[3].fire),i[t[0]]=function(){return i[t[0]+"With"](this===i?void 0:this,arguments),this},i[t[0]+"With"]=a.fireWith}),o.promise(i),e&&e.call(i,i),i},when:function(e){var t=arguments.length,r=t,n=Array(r),o=ue.call(arguments),i=ke.Deferred(),a=function(e){return function(r){n[e]=this,o[e]=arguments.length>1?ue.call(arguments):r,--t||i.resolveWith(n,o)}};if(t<=1&&(f(e,i.done(a(r)).resolve,i.reject,!t),"pending"===i.state()||be(o[r]&&o[r].then)))return i.then();for(;r--;)f(o[r],a(r),i.reject);return i.promise()}});var Ie=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;ke.Deferred.exceptionHook=function(e,r){t.console&&t.console.warn&&e&&Ie.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,r)},ke.readyException=function(e){t.setTimeout(function(){throw e})};var Me=ke.Deferred();ke.fn.ready=function(e){return Me.then(e).catch(function(e){ke.readyException(e)}),this},ke.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--ke.readyWait:ke.isReady)||(ke.isReady=!0,!0!==e&&--ke.readyWait>0||Me.resolveWith(se,[ke]))}}),ke.ready.then=Me.then,"complete"===se.readyState||"loading"!==se.readyState&&!se.documentElement.doScroll?t.setTimeout(ke.ready):(se.addEventListener("DOMContentLoaded",p),t.addEventListener("load",p));var Ne=function(e,t,r,n,i,a,s){var c=0,u=e.length,l=null==r;if("object"===o(r)){i=!0;for(c in r)Ne(e,t,c,r[c],!0,a,s)}else if(void 0!==n&&(i=!0,be(n)||(s=!0),l&&(s?(t.call(e,n),t=null):(l=t,t=function(e,t,r){return l.call(ke(e),r)})),t))for(;c<u;c++)t(e[c],r,s?n:n.call(e[c],c,t(e[c],r)));return i?e:l?t.call(e):u?t(e[0],r):a},Le=/^-ms-/,Fe=/-([a-z])/g,Ue=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};v.uid=1,v.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Ue(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,o=this.cache(e);if("string"==typeof t)o[m(t)]=r;else for(n in t)o[m(n)]=t[n];return o},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][m(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){Array.isArray(t)?t=t.map(m):(t=m(t),t=t in n?[t]:t.match(De)||[]),r=t.length;for(;r--;)delete n[t[r]]}(void 0===t||ke.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!ke.isEmptyObject(t)}};var Be=new v,qe=new v,We=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,He=/[A-Z]/g;ke.extend({hasData:function(e){return qe.hasData(e)||Be.hasData(e)},data:function(e,t,r){return qe.access(e,t,r)},removeData:function(e,t){qe.remove(e,t)},_data:function(e,t,r){return Be.access(e,t,r)},_removeData:function(e,t){Be.remove(e,t)}}),ke.fn.extend({data:function(e,t){var r,n,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=qe.get(i),1===i.nodeType&&!Be.get(i,"hasDataAttrs"))){for(r=a.length;r--;)a[r]&&(n=a[r].name,0===n.indexOf("data-")&&(n=m(n.slice(5)),g(i,n,o[n])));Be.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){qe.set(this,e)}):Ne(this,function(t){var r;if(i&&void 0===t){if(void 0!==(r=qe.get(i,e)))return r;if(void 0!==(r=g(i,e)))return r}else this.each(function(){qe.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){qe.remove(this,e)})}}),ke.extend({queue:function(e,t,r){var n;if(e)return t=(t||"fx")+"queue",n=Be.get(e,t),r&&(!n||Array.isArray(r)?n=Be.access(e,t,ke.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=ke.queue(e,t),n=r.length,o=r.shift(),i=ke._queueHooks(e,t),a=function(){ke.dequeue(e,t)};"inprogress"===o&&(o=r.shift(),n--),o&&("fx"===t&&r.unshift("inprogress"),delete i.stop,o.call(e,a,i)),!n&&i&&i.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return Be.get(e,r)||Be.access(e,r,{empty:ke.Callbacks("once memory").add(function(){Be.remove(e,[t+"queue",r])})})}}),ke.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?ke.queue(this[0],e):void 0===t?this:this.each(function(){var r=ke.queue(this,e,t);ke._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&ke.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ke.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,n=1,o=ke.Deferred(),i=this,a=this.length,s=function(){--n||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=Be.get(i[a],e+"queueHooks"))&&r.empty&&(n++,r.empty.add(s));return s(),o.promise(t)}});var ze=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ge=new RegExp("^(?:([+-])=|)("+ze+")([a-z%]*)$","i"),Ve=["Top","Right","Bottom","Left"],Ye=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&ke.contains(e.ownerDocument,e)&&"none"===ke.css(e,"display")},Ke=function(e,t,r,n){var o,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];o=r.apply(e,n||[]);for(i in t)e.style[i]=a[i];return o},$e={};ke.fn.extend({show:function(){return w(this,!0)},hide:function(){return w(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ye(this)?ke(this).show():ke(this).hide()})}});var Xe=/^(?:checkbox|radio)$/i,Je=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Qe=/^$|^module$|\/(?:java|ecma)script/i,Ze={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,Ze.th=Ze.td;var et=/<|&#?\w+;/;!function(){var e=se.createDocumentFragment(),t=e.appendChild(se.createElement("div")),r=se.createElement("input");r.setAttribute("type","radio"),r.setAttribute("checked","checked"),r.setAttribute("name","t"),t.appendChild(r),ge.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ge.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var tt=se.documentElement,rt=/^key/,nt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ot=/^([^.]*)(?:\.(.+)|)/;ke.event={global:{},add:function(e,t,r,n,o){var i,a,s,c,u,l,d,f,p,h,m,v=Be.get(e);if(v)for(r.handler&&(i=r,r=i.handler,o=i.selector),o&&ke.find.matchesSelector(tt,o),r.guid||(r.guid=ke.guid++),(c=v.events)||(c=v.events={}),(a=v.handle)||(a=v.handle=function(t){return void 0!==ke&&ke.event.triggered!==t.type?ke.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(De)||[""],u=t.length;u--;)s=ot.exec(t[u])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p&&(d=ke.event.special[p]||{},p=(o?d.delegateType:d.bindType)||p,d=ke.event.special[p]||{},l=ke.extend({type:p,origType:m,data:n,handler:r,guid:r.guid,selector:o,needsContext:o&&ke.expr.match.needsContext.test(o),namespace:h.join(".")},i),(f=c[p])||(f=c[p]=[],f.delegateCount=0,d.setup&&!1!==d.setup.call(e,n,h,a)||e.addEventListener&&e.addEventListener(p,a)),d.add&&(d.add.call(e,l),l.handler.guid||(l.handler.guid=r.guid)),o?f.splice(f.delegateCount++,0,l):f.push(l),ke.event.global[p]=!0)},remove:function(e,t,r,n,o){var i,a,s,c,u,l,d,f,p,h,m,v=Be.hasData(e)&&Be.get(e);if(v&&(c=v.events)){for(t=(t||"").match(De)||[""],u=t.length;u--;)if(s=ot.exec(t[u])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p){for(d=ke.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,f=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=f.length;i--;)l=f[i],!o&&m!==l.origType||r&&r.guid!==l.guid||s&&!s.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(f.splice(i,1),l.selector&&f.delegateCount--,d.remove&&d.remove.call(e,l));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,v.handle)||ke.removeEvent(e,p,v.handle),delete c[p])}else for(p in c)ke.event.remove(e,p+t[u],r,n,!0);ke.isEmptyObject(c)&&Be.remove(e,"handle events")}},dispatch:function(e){var t,r,n,o,i,a,s=ke.event.fix(e),c=new Array(arguments.length),u=(Be.get(this,"events")||{})[s.type]||[],l=ke.event.special[s.type]||{};for(c[0]=s,t=1;t<arguments.length;t++)c[t]=arguments[t];if(s.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,s)){for(a=ke.event.handlers.call(this,s,u),t=0;(o=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=o.elem,r=0;(i=o.handlers[r++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(i.namespace)||(s.handleObj=i,s.data=i.data,void 0!==(n=((ke.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,c))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,s),s.result}},handlers:function(e,t){var r,n,o,i,a,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(i=[],a={},r=0;r<c;r++)n=t[r],o=n.selector+" ",void 0===a[o]&&(a[o]=n.needsContext?ke(o,this).index(u)>-1:ke.find(o,this,null,[u]).length),a[o]&&i.push(n);i.length&&s.push({elem:u,handlers:i})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(ke.Event.prototype,e,{enumerable:!0,configurable:!0,get:be(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[ke.expando]?e:new ke.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==T()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===T()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&a(this,"input"))return this.click(),!1},_default:function(e){return a(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},ke.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},ke.Event=function(e,t){if(!(this instanceof ke.Event))return new ke.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?S:E,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&ke.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[ke.expando]=!0},ke.Event.prototype={constructor:ke.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=S,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=S,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=S,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},ke.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&rt.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&nt.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},ke.event.addProp),ke.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ke.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,n=this,o=e.relatedTarget,i=e.handleObj;return o&&(o===n||ke.contains(n,o))||(e.type=i.origType,r=i.handler.apply(this,arguments),e.type=t),r}}}),ke.fn.extend({on:function(e,t,r,n){return C(this,e,t,r,n)},one:function(e,t,r,n){return C(this,e,t,r,n,1)},off:function(e,t,r){var n,o;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,ke(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=E),this.each(function(){ke.event.remove(this,e,r,t)})}});var it=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,at=/<script|<style|<link/i,st=/checked\s*(?:[^=]|=\s*.checked.)/i,ct=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ke.extend({htmlPrefilter:function(e){return e.replace(it,"<$1></$2>")},clone:function(e,t,r){var n,o,i,a,s=e.cloneNode(!0),c=ke.contains(e.ownerDocument,e);if(!(ge.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ke.isXMLDoc(e)))for(a=k(s),i=k(e),n=0,o=i.length;n<o;n++)D(i[n],a[n]);if(t)if(r)for(i=i||k(e),a=a||k(s),n=0,o=i.length;n<o;n++)A(i[n],a[n]);else A(e,s);return a=k(s,"script"),a.length>0&&P(a,!c&&k(e,"script")),s},cleanData:function(e){for(var t,r,n,o=ke.event.special,i=0;void 0!==(r=e[i]);i++)if(Ue(r)){if(t=r[Be.expando]){if(t.events)for(n in t.events)o[n]?ke.event.remove(r,n):ke.removeEvent(r,n,t.handle);r[Be.expando]=void 0}r[qe.expando]&&(r[qe.expando]=void 0)}}}),ke.fn.extend({detach:function(e){return M(this,e,!0)},remove:function(e){return M(this,e)},text:function(e){return Ne(this,function(e){return void 0===e?ke.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return I(this,arguments,function(e){
if(1===this.nodeType||11===this.nodeType||9===this.nodeType){R(this,e).appendChild(e)}})},prepend:function(){return I(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=R(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return I(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(ke.cleanData(k(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ke.clone(this,e,t)})},html:function(e){return Ne(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!at.test(e)&&!Ze[(Je.exec(e)||["",""])[1].toLowerCase()]){e=ke.htmlPrefilter(e);try{for(;r<n;r++)t=this[r]||{},1===t.nodeType&&(ke.cleanData(k(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return I(this,arguments,function(t){var r=this.parentNode;ke.inArray(this,e)<0&&(ke.cleanData(k(this)),r&&r.replaceChild(t,this))},e)}}),ke.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ke.fn[e]=function(e){for(var r,n=[],o=ke(e),i=o.length-1,a=0;a<=i;a++)r=a===i?this:this.clone(!0),ke(o[a])[t](r),de.apply(n,r.get());return this.pushStack(n)}});var ut=new RegExp("^("+ze+")(?!px)[a-z%]+$","i"),lt=function(e){var r=e.ownerDocument.defaultView;return r&&r.opener||(r=t),r.getComputedStyle(e)},dt=new RegExp(Ve.join("|"),"i");!function(){function e(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",tt.appendChild(c).appendChild(u);var e=t.getComputedStyle(u);n="1%"!==e.top,s=12===r(e.marginLeft),u.style.right="60%",a=36===r(e.right),o=36===r(e.width),u.style.position="absolute",i=36===u.offsetWidth||"absolute",tt.removeChild(c),u=null}}function r(e){return Math.round(parseFloat(e))}var n,o,i,a,s,c=se.createElement("div"),u=se.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",ge.clearCloneStyle="content-box"===u.style.backgroundClip,ke.extend(ge,{boxSizingReliable:function(){return e(),o},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i}}))}();var ft=/^(none|table(?!-c[ea]).+)/,pt=/^--/,ht={position:"absolute",visibility:"hidden",display:"block"},mt={letterSpacing:"0",fontWeight:"400"},vt=["Webkit","Moz","ms"],yt=se.createElement("div").style;ke.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=N(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=m(t),c=pt.test(t),u=e.style;if(c||(t=U(s)),a=ke.cssHooks[t]||ke.cssHooks[s],void 0===r)return a&&"get"in a&&void 0!==(o=a.get(e,!1,n))?o:u[t];i=typeof r,"string"===i&&(o=Ge.exec(r))&&o[1]&&(r=b(e,t,o),i="number"),null!=r&&r===r&&("number"===i&&(r+=o&&o[3]||(ke.cssNumber[s]?"":"px")),ge.clearCloneStyle||""!==r||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(r=a.set(e,r,n))||(c?u.setProperty(t,r):u[t]=r))}},css:function(e,t,r,n){var o,i,a,s=m(t);return pt.test(t)||(t=U(s)),a=ke.cssHooks[t]||ke.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,r)),void 0===o&&(o=N(e,t,n)),"normal"===o&&t in mt&&(o=mt[t]),""===r||r?(i=parseFloat(o),!0===r||isFinite(i)?i||0:o):o}}),ke.each(["height","width"],function(e,t){ke.cssHooks[t]={get:function(e,r,n){if(r)return!ft.test(ke.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?W(e,t,n):Ke(e,ht,function(){return W(e,t,n)})},set:function(e,r,n){var o,i=lt(e),a="border-box"===ke.css(e,"boxSizing",!1,i),s=n&&q(e,t,n,a,i);return a&&ge.scrollboxSize()===i.position&&(s-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(i[t])-q(e,t,"border",!1,i)-.5)),s&&(o=Ge.exec(r))&&"px"!==(o[3]||"px")&&(e.style[t]=r,r=ke.css(e,t)),B(e,r,s)}}}),ke.cssHooks.marginLeft=L(ge.reliableMarginLeft,function(e,t){if(t)return(parseFloat(N(e,"marginLeft"))||e.getBoundingClientRect().left-Ke(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),ke.each({margin:"",padding:"",border:"Width"},function(e,t){ke.cssHooks[e+t]={expand:function(r){for(var n=0,o={},i="string"==typeof r?r.split(" "):[r];n<4;n++)o[e+Ve[n]+t]=i[n]||i[n-2]||i[0];return o}},"margin"!==e&&(ke.cssHooks[e+t].set=B)}),ke.fn.extend({css:function(e,t){return Ne(this,function(e,t,r){var n,o,i={},a=0;if(Array.isArray(t)){for(n=lt(e),o=t.length;a<o;a++)i[t[a]]=ke.css(e,t[a],!1,n);return i}return void 0!==r?ke.style(e,t,r):ke.css(e,t)},e,t,arguments.length>1)}}),ke.Tween=H,H.prototype={constructor:H,init:function(e,t,r,n,o,i){this.elem=e,this.prop=r,this.easing=o||ke.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=i||(ke.cssNumber[r]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,r=H.propHooks[this.prop];return this.options.duration?this.pos=t=ke.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=ke.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){ke.fx.step[e.prop]?ke.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[ke.cssProps[e.prop]]&&!ke.cssHooks[e.prop]?e.elem[e.prop]=e.now:ke.style(e.elem,e.prop,e.now+e.unit)}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ke.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},ke.fx=H.prototype.init,ke.fx.step={};var gt,bt,_t=/^(?:toggle|show|hide)$/,wt=/queueHooks$/;ke.Animation=ke.extend(X,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return b(r.elem,e,Ge.exec(t),r),r}]},tweener:function(e,t){be(e)?(t=e,e=["*"]):e=e.match(De);for(var r,n=0,o=e.length;n<o;n++)r=e[n],X.tweeners[r]=X.tweeners[r]||[],X.tweeners[r].unshift(t)},prefilters:[K],prefilter:function(e,t){t?X.prefilters.unshift(e):X.prefilters.push(e)}}),ke.speed=function(e,t,r){var n=e&&"object"==typeof e?ke.extend({},e):{complete:r||!r&&t||be(e)&&e,duration:e,easing:r&&t||t&&!be(t)&&t};return ke.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in ke.fx.speeds?n.duration=ke.fx.speeds[n.duration]:n.duration=ke.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){be(n.old)&&n.old.call(this),n.queue&&ke.dequeue(this,n.queue)},n},ke.fn.extend({fadeTo:function(e,t,r,n){return this.filter(Ye).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(e,t,r,n){var o=ke.isEmptyObject(e),i=ke.speed(t,r,n),a=function(){var t=X(this,ke.extend({},e),i);(o||Be.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||!1===i.queue?this.each(a):this.queue(i.queue,a)},stop:function(e,t,r){var n=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=ke.timers,a=Be.get(this);if(o)a[o]&&a[o].stop&&n(a[o]);else for(o in a)a[o]&&a[o].stop&&wt.test(o)&&n(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(r),t=!1,i.splice(o,1));!t&&r||ke.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,r=Be.get(this),n=r[e+"queue"],o=r[e+"queueHooks"],i=ke.timers,a=n?n.length:0;for(r.finish=!0,ke.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<a;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete r.finish})}}),ke.each(["toggle","show","hide"],function(e,t){var r=ke.fn[t];ke.fn[t]=function(e,n,o){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(V(t,!0),e,n,o)}}),ke.each({slideDown:V("show"),slideUp:V("hide"),slideToggle:V("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ke.fn[e]=function(e,r,n){return this.animate(t,e,r,n)}}),ke.timers=[],ke.fx.tick=function(){var e,t=0,r=ke.timers;for(gt=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||ke.fx.stop(),gt=void 0},ke.fx.timer=function(e){ke.timers.push(e),ke.fx.start()},ke.fx.interval=13,ke.fx.start=function(){bt||(bt=!0,z())},ke.fx.stop=function(){bt=null},ke.fx.speeds={slow:600,fast:200,_default:400},ke.fn.delay=function(e,r){return e=ke.fx?ke.fx.speeds[e]||e:e,r=r||"fx",this.queue(r,function(r,n){var o=t.setTimeout(r,e);n.stop=function(){t.clearTimeout(o)}})},function(){var e=se.createElement("input"),t=se.createElement("select"),r=t.appendChild(se.createElement("option"));e.type="checkbox",ge.checkOn=""!==e.value,ge.optSelected=r.selected,e=se.createElement("input"),e.value="t",e.type="radio",ge.radioValue="t"===e.value}();var kt,Pt=ke.expr.attrHandle;ke.fn.extend({attr:function(e,t){return Ne(this,ke.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ke.removeAttr(this,e)})}}),ke.extend({attr:function(e,t,r){var n,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return void 0===e.getAttribute?ke.prop(e,t,r):(1===i&&ke.isXMLDoc(e)||(o=ke.attrHooks[t.toLowerCase()]||(ke.expr.match.bool.test(t)?kt:void 0)),void 0!==r?null===r?void ke.removeAttr(e,t):o&&"set"in o&&void 0!==(n=o.set(e,r,t))?n:(e.setAttribute(t,r+""),r):o&&"get"in o&&null!==(n=o.get(e,t))?n:(n=ke.find.attr(e,t),null==n?void 0:n))},attrHooks:{type:{set:function(e,t){if(!ge.radioValue&&"radio"===t&&a(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,n=0,o=t&&t.match(De);if(o&&1===e.nodeType)for(;r=o[n++];)e.removeAttribute(r)}}),kt={set:function(e,t,r){return!1===t?ke.removeAttr(e,r):e.setAttribute(r,r),r}},ke.each(ke.expr.match.bool.source.match(/\w+/g),function(e,t){var r=Pt[t]||ke.find.attr;Pt[t]=function(e,t,n){var o,i,a=t.toLowerCase();return n||(i=Pt[a],Pt[a]=o,o=null!=r(e,t,n)?a:null,Pt[a]=i),o}});var xt=/^(?:input|select|textarea|button)$/i,St=/^(?:a|area)$/i;ke.fn.extend({prop:function(e,t){return Ne(this,ke.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[ke.propFix[e]||e]})}}),ke.extend({prop:function(e,t,r){var n,o,i=e.nodeType;if(3!==i&&8!==i&&2!==i)return 1===i&&ke.isXMLDoc(e)||(t=ke.propFix[t]||t,o=ke.propHooks[t]),void 0!==r?o&&"set"in o&&void 0!==(n=o.set(e,r,t))?n:e[t]=r:o&&"get"in o&&null!==(n=o.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=ke.find.attr(e,"tabindex");return t?parseInt(t,10):xt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ge.optSelected||(ke.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),ke.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ke.propFix[this.toLowerCase()]=this}),ke.fn.extend({addClass:function(e){var t,r,n,o,i,a,s,c=0;if(be(e))return this.each(function(t){ke(this).addClass(e.call(this,t,Q(this)))});if(t=Z(e),t.length)for(;r=this[c++];)if(o=Q(r),n=1===r.nodeType&&" "+J(o)+" "){for(a=0;i=t[a++];)n.indexOf(" "+i+" ")<0&&(n+=i+" ");s=J(n),o!==s&&r.setAttribute("class",s)}return this},removeClass:function(e){var t,r,n,o,i,a,s,c=0;if(be(e))return this.each(function(t){ke(this).removeClass(e.call(this,t,Q(this)))});if(!arguments.length)return this.attr("class","");if(t=Z(e),t.length)for(;r=this[c++];)if(o=Q(r),n=1===r.nodeType&&" "+J(o)+" "){for(a=0;i=t[a++];)for(;n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");s=J(n),o!==s&&r.setAttribute("class",s)}return this},toggleClass:function(e,t){var r=typeof e,n="string"===r||Array.isArray(e);return"boolean"==typeof t&&n?t?this.addClass(e):this.removeClass(e):be(e)?this.each(function(r){ke(this).toggleClass(e.call(this,r,Q(this),t),t)}):this.each(function(){var t,o,i,a;if(n)for(o=0,i=ke(this),a=Z(e);t=a[o++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else void 0!==e&&"boolean"!==r||(t=Q(this),t&&Be.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":Be.get(this,"__className__")||""))})},hasClass:function(e){var t,r,n=0;for(t=" "+e+" ";r=this[n++];)if(1===r.nodeType&&(" "+J(Q(r))+" ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g;ke.fn.extend({val:function(e){var t,r,n,o=this[0];{if(arguments.length)return n=be(e),this.each(function(r){var o;1===this.nodeType&&(o=n?e.call(this,r,ke(this).val()):e,null==o?o="":"number"==typeof o?o+="":Array.isArray(o)&&(o=ke.map(o,function(e){return null==e?"":e+""})),(t=ke.valHooks[this.type]||ke.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return(t=ke.valHooks[o.type]||ke.valHooks[o.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(o,"value"))?r:(r=o.value,"string"==typeof r?r.replace(Et,""):null==r?"":r)}}}),ke.extend({valHooks:{option:{get:function(e){var t=ke.find.attr(e,"value");return null!=t?t:J(ke.text(e))}},select:{get:function(e){var t,r,n,o=e.options,i=e.selectedIndex,s="select-one"===e.type,c=s?null:[],u=s?i+1:o.length;for(n=i<0?u:s?i:0;n<u;n++)if(r=o[n],(r.selected||n===i)&&!r.disabled&&(!r.parentNode.disabled||!a(r.parentNode,"optgroup"))){if(t=ke(r).val(),s)return t;c.push(t)}return c},set:function(e,t){for(var r,n,o=e.options,i=ke.makeArray(t),a=o.length;a--;)n=o[a],(n.selected=ke.inArray(ke.valHooks.option.get(n),i)>-1)&&(r=!0);return r||(e.selectedIndex=-1),i}}}}),ke.each(["radio","checkbox"],function(){ke.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=ke.inArray(ke(e).val(),t)>-1}},ge.checkOn||(ke.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),ge.focusin="onfocusin"in t;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};ke.extend(ke.event,{trigger:function(e,r,n,o){var i,a,s,c,u,l,d,f,p=[n||se],h=me.call(e,"type")?e.type:e,m=me.call(e,"namespace")?e.namespace.split("."):[];if(a=f=s=n=n||se,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(h+ke.event.triggered)&&(h.indexOf(".")>-1&&(m=h.split("."),h=m.shift(),m.sort()),u=h.indexOf(":")<0&&"on"+h,e=e[ke.expando]?e:new ke.Event(h,"object"==typeof e&&e),e.isTrigger=o?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),r=null==r?[e]:ke.makeArray(r,[e]),d=ke.event.special[h]||{},o||!d.trigger||!1!==d.trigger.apply(n,r))){if(!o&&!d.noBubble&&!_e(n)){for(c=d.delegateType||h,Tt.test(c+h)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||se)&&p.push(s.defaultView||s.parentWindow||t)}for(i=0;(a=p[i++])&&!e.isPropagationStopped();)f=a,e.type=i>1?c:d.bindType||h,l=(Be.get(a,"events")||{})[e.type]&&Be.get(a,"handle"),l&&l.apply(a,r),(l=u&&a[u])&&l.apply&&Ue(a)&&(e.result=l.apply(a,r),!1===e.result&&e.preventDefault());return e.type=h,o||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),r)||!Ue(n)||u&&be(n[h])&&!_e(n)&&(s=n[u],s&&(n[u]=null),ke.event.triggered=h,e.isPropagationStopped()&&f.addEventListener(h,Ct),n[h](),e.isPropagationStopped()&&f.removeEventListener(h,Ct),ke.event.triggered=void 0,s&&(n[u]=s)),e.result}},simulate:function(e,t,r){var n=ke.extend(new ke.Event,r,{type:e,isSimulated:!0});ke.event.trigger(n,null,t)}}),ke.fn.extend({trigger:function(e,t){return this.each(function(){ke.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return ke.event.trigger(e,t,r,!0)}}),ge.focusin||ke.each({focus:"focusin",blur:"focusout"},function(e,t){var r=function(e){ke.event.simulate(t,e.target,ke.event.fix(e))};ke.event.special[t]={setup:function(){var n=this.ownerDocument||this,o=Be.access(n,t);o||n.addEventListener(e,r,!0),Be.access(n,t,(o||0)+1)},teardown:function(){var n=this.ownerDocument||this,o=Be.access(n,t)-1;o?Be.access(n,t,o):(n.removeEventListener(e,r,!0),Be.remove(n,t))}}});var Rt=t.location,jt=Date.now(),Ot=/\?/;ke.parseXML=function(e){var r;if(!e||"string"!=typeof e)return null;try{r=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){r=void 0}return r&&!r.getElementsByTagName("parsererror").length||ke.error("Invalid XML: "+e),r};var At=/\[\]$/,Dt=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,Mt=/^(?:input|select|textarea|keygen)/i;ke.param=function(e,t){var r,n=[],o=function(e,t){var r=be(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(Array.isArray(e)||e.jquery&&!ke.isPlainObject(e))ke.each(e,function(){o(this.name,this.value)});else for(r in e)ee(r,e[r],t,o);return n.join("&")},ke.fn.extend({serialize:function(){return ke.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ke.prop(this,"elements");return e?ke.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ke(this).is(":disabled")&&Mt.test(this.nodeName)&&!It.test(e)&&(this.checked||!Xe.test(e))}).map(function(e,t){var r=ke(this).val();return null==r?null:Array.isArray(r)?ke.map(r,function(e){return{name:t.name,value:e.replace(Dt,"\r\n")}}):{name:t.name,value:r.replace(Dt,"\r\n")}}).get()}});var Nt=/%20/g,Lt=/#.*$/,Ft=/([?&])_=[^&]*/,Ut=/^(.*?):[ \t]*([^\r\n]*)$/gm,Bt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,qt=/^(?:GET|HEAD)$/,Wt=/^\/\//,Ht={},zt={},Gt="*/".concat("*"),Vt=se.createElement("a");Vt.href=Rt.href,ke.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Rt.href,type:"GET",isLocal:Bt.test(Rt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ke.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?ne(ne(e,ke.ajaxSettings),t):ne(ke.ajaxSettings,e)},ajaxPrefilter:te(Ht),ajaxTransport:te(zt),ajax:function(e,r){function n(e,r,n,s){var u,f,p,_,w,k=r;l||(l=!0,c&&t.clearTimeout(c),o=void 0,a=s||"",P.readyState=e>0?4:0,u=e>=200&&e<300||304===e,n&&(_=oe(h,P,n)),_=ie(h,_,P,u),u?(h.ifModified&&(w=P.getResponseHeader("Last-Modified"),w&&(ke.lastModified[i]=w),(w=P.getResponseHeader("etag"))&&(ke.etag[i]=w)),204===e||"HEAD"===h.type?k="nocontent":304===e?k="notmodified":(k=_.state,f=_.data,p=_.error,u=!p)):(p=k,!e&&k||(k="error",e<0&&(e=0))),P.status=e,P.statusText=(r||k)+"",u?y.resolveWith(m,[f,k,P]):y.rejectWith(m,[P,k,p]),P.statusCode(b),b=void 0,d&&v.trigger(u?"ajaxSuccess":"ajaxError",[P,h,u?f:p]),g.fireWith(m,[P,k]),d&&(v.trigger("ajaxComplete",[P,h]),--ke.active||ke.event.trigger("ajaxStop")))}"object"==typeof e&&(r=e,e=void 0),r=r||{};var o,i,a,s,c,u,l,d,f,p,h=ke.ajaxSetup({},r),m=h.context||h,v=h.context&&(m.nodeType||m.jquery)?ke(m):ke.event,y=ke.Deferred(),g=ke.Callbacks("once memory"),b=h.statusCode||{},_={},w={},k="canceled",P={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=Ut.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,_[e]=t),this},overrideMimeType:function(e){return null==l&&(h.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)P.always(e[P.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||k;return o&&o.abort(t),n(0,t),this}};if(y.promise(P),h.url=((e||h.url||Rt.href)+"").replace(Wt,Rt.protocol+"//"),h.type=r.method||r.type||h.method||h.type,h.dataTypes=(h.dataType||"*").toLowerCase().match(De)||[""],null==h.crossDomain){u=se.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=Vt.protocol+"//"+Vt.host!=u.protocol+"//"+u.host}catch(e){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ke.param(h.data,h.traditional)),re(Ht,h,r,P),l)return P;d=ke.event&&h.global,d&&0==ke.active++&&ke.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!qt.test(h.type),i=h.url.replace(Lt,""),h.hasContent?h.data&&h.processData&&0===(h.contentType||"").indexOf("application/x-www-form-urlencoded")&&(h.data=h.data.replace(Nt,"+")):(p=h.url.slice(i.length),h.data&&(h.processData||"string"==typeof h.data)&&(i+=(Ot.test(i)?"&":"?")+h.data,delete h.data),!1===h.cache&&(i=i.replace(Ft,"$1"),p=(Ot.test(i)?"&":"?")+"_="+jt+++p),h.url=i+p),h.ifModified&&(ke.lastModified[i]&&P.setRequestHeader("If-Modified-Since",ke.lastModified[i]),ke.etag[i]&&P.setRequestHeader("If-None-Match",ke.etag[i])),(h.data&&h.hasContent&&!1!==h.contentType||r.contentType)&&P.setRequestHeader("Content-Type",h.contentType),P.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Gt+"; q=0.01":""):h.accepts["*"]);for(f in h.headers)P.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(!1===h.beforeSend.call(m,P,h)||l))return P.abort();if(k="abort",g.add(h.complete),P.done(h.success),P.fail(h.error),o=re(zt,h,r,P)){if(P.readyState=1,d&&v.trigger("ajaxSend",[P,h]),l)return P;h.async&&h.timeout>0&&(c=t.setTimeout(function(){P.abort("timeout")},h.timeout));try{l=!1,o.send(_,n)}catch(e){if(l)throw e;n(-1,e)}}else n(-1,"No Transport");return P},getJSON:function(e,t,r){return ke.get(e,t,r,"json")},getScript:function(e,t){return ke.get(e,void 0,t,"script")}}),ke.each(["get","post"],function(e,t){ke[t]=function(e,r,n,o){return be(r)&&(o=o||n,n=r,r=void 0),ke.ajax(ke.extend({url:e,type:t,dataType:o,data:r,success:n},ke.isPlainObject(e)&&e))}}),ke._evalUrl=function(e){return ke.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ke.fn.extend({wrapAll:function(e){var t;return this[0]&&(be(e)&&(e=e.call(this[0])),t=ke(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(e){return be(e)?this.each(function(t){ke(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ke(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)})},wrap:function(e){var t=be(e);return this.each(function(r){ke(this).wrapAll(t?e.call(this,r):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){ke(this).replaceWith(this.childNodes)}),this}}),ke.expr.pseudos.hidden=function(e){return!ke.expr.pseudos.visible(e)},ke.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},ke.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Yt={0:200,1223:204},Kt=ke.ajaxSettings.xhr();ge.cors=!!Kt&&"withCredentials"in Kt,ge.ajax=Kt=!!Kt,ke.ajaxTransport(function(e){var r,n;if(ge.cors||Kt&&!e.crossDomain)return{send:function(o,i){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||o["X-Requested-With"]||(o["X-Requested-With"]="XMLHttpRequest");for(a in o)s.setRequestHeader(a,o[a]);r=function(e){return function(){r&&(r=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?i(0,"error"):i(s.status,s.statusText):i(Yt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=r(),n=s.onerror=s.ontimeout=r("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){r&&n()})},r=r("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}}),ke.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),ke.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return ke.globalEval(e),e}}}),ke.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),ke.ajaxTransport("script",function(e){if(e.crossDomain){var t,r;return{send:function(n,o){t=ke("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){t.remove(),r=null,e&&o("error"===e.type?404:200,e.type)}),se.head.appendChild(t[0])},abort:function(){r&&r()}}}});var $t=[],Xt=/(=)\?(?=&|$)|\?\?/;ke.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=$t.pop()||ke.expando+"_"+jt++;return this[e]=!0,e}}),ke.ajaxPrefilter("json jsonp",function(e,r,n){var o,i,a,s=!1!==e.jsonp&&(Xt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Xt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return o=e.jsonpCallback=be(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Xt,"$1"+o):!1!==e.jsonp&&(e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+o),e.converters["script json"]=function(){return a||ke.error(o+" was not called"),a[0]},e.dataTypes[0]="json",i=t[o],t[o]=function(){a=arguments},n.always(function(){void 0===i?ke(t).removeProp(o):t[o]=i,e[o]&&(e.jsonpCallback=r.jsonpCallback,$t.push(o)),a&&be(i)&&i(a[0]),a=i=void 0}),"script"}),ge.createHTMLDocument=function(){var e=se.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),ke.parseHTML=function(e,t,r){if("string"!=typeof e)return[];"boolean"==typeof t&&(r=t,t=!1);var n,o,i;return t||(ge.createHTMLDocument?(t=se.implementation.createHTMLDocument(""),n=t.createElement("base"),n.href=se.location.href,t.head.appendChild(n)):t=se),o=Ce.exec(e),i=!r&&[],o?[t.createElement(o[1])]:(o=x([e],t,i),i&&i.length&&ke(i).remove(),ke.merge([],o.childNodes))},ke.fn.load=function(e,t,r){var n,o,i,a=this,s=e.indexOf(" ");return s>-1&&(n=J(e.slice(s)),e=e.slice(0,s)),be(t)?(r=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&ke.ajax({url:e,type:o||"GET",dataType:"html",data:t}).done(function(e){i=arguments,a.html(n?ke("<div>").append(ke.parseHTML(e)).find(n):e)}).always(r&&function(e,t){a.each(function(){r.apply(this,i||[e.responseText,t,e])})}),this},ke.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ke.fn[t]=function(e){return this.on(t,e)}}),ke.expr.pseudos.animated=function(e){return ke.grep(ke.timers,function(t){return e===t.elem}).length},ke.offset={setOffset:function(e,t,r){var n,o,i,a,s,c,u,l=ke.css(e,"position"),d=ke(e),f={};"static"===l&&(e.style.position="relative"),s=d.offset(),i=ke.css(e,"top"),c=ke.css(e,"left"),u=("absolute"===l||"fixed"===l)&&(i+c).indexOf("auto")>-1,u?(n=d.position(),a=n.top,o=n.left):(a=parseFloat(i)||0,o=parseFloat(c)||0),be(t)&&(t=t.call(e,r,ke.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+o),"using"in t?t.using.call(e,f):d.css(f)}},ke.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ke.offset.setOffset(this,e,t)});var t,r,n=this[0];if(n)return n.getClientRects().length?(t=n.getBoundingClientRect(),r=n.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,t,r,n=this[0],o={top:0,left:0};if("fixed"===ke.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===ke.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&(o=ke(e).offset(),o.top+=ke.css(e,"borderTopWidth",!0),o.left+=ke.css(e,"borderLeftWidth",!0))}return{top:t.top-o.top-ke.css(n,"marginTop",!0),left:t.left-o.left-ke.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===ke.css(e,"position");)e=e.offsetParent;return e||tt})}}),ke.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var r="pageYOffset"===t;ke.fn[e]=function(n){return Ne(this,function(e,n,o){var i;if(_e(e)?i=e:9===e.nodeType&&(i=e.defaultView),void 0===o)return i?i[t]:e[n];i?i.scrollTo(r?i.pageXOffset:o,r?o:i.pageYOffset):e[n]=o},e,n,arguments.length)}}),ke.each(["top","left"],function(e,t){ke.cssHooks[t]=L(ge.pixelPosition,function(e,r){if(r)return r=N(e,t),ut.test(r)?ke(e).position()[t]+"px":r})}),ke.each({Height:"height",Width:"width"},function(e,t){ke.each({padding:"inner"+e,content:t,"":"outer"+e},function(r,n){ke.fn[n]=function(o,i){var a=arguments.length&&(r||"boolean"!=typeof o),s=r||(!0===o||!0===i?"margin":"border");return Ne(this,function(t,r,o){var i;return _e(t)?0===n.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===o?ke.css(t,r,s):ke.style(t,r,o,s)},t,a?o:void 0,a)}})}),ke.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,t){ke.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}),ke.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ke.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)}}),ke.proxy=function(e,t){var r,n,o;if("string"==typeof t&&(r=e[t],t=e,e=r),be(e))return n=ue.call(arguments,2),o=function(){return e.apply(t||this,n.concat(ue.call(arguments)))},o.guid=e.guid=e.guid||ke.guid++,o},ke.holdReady=function(e){e?ke.readyWait++:ke.ready(!0)},ke.isArray=Array.isArray,ke.parseJSON=JSON.parse,ke.nodeName=a,ke.isFunction=be,ke.isWindow=_e,ke.camelCase=m,ke.type=o,ke.now=Date.now,ke.isNumeric=function(e){var t=ke.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof e&&e.amd&&e("jquery",[],function(){return ke});var Jt=t.jQuery,Qt=t.$;return ke.noConflict=function(e){return t.$===ke&&(t.$=Qt),e&&t.jQuery===ke&&(t.jQuery=Jt),ke},r||(t.jQuery=t.$=ke),ke})},{}],165:[function(e,t,r){var n=e("./_root"),o=n.Symbol;t.exports=o},{"./_root":172}],166:[function(e,t,r){function n(e){return null==e?void 0===e?c:s:u&&u in Object(e)?i(e):a(e)}var o=e("./_Symbol"),i=e("./_getRawTag"),a=e("./_objectToString"),s="[object Null]",c="[object Undefined]",u=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":165,"./_getRawTag":169,"./_objectToString":170}],167:[function(e,t,r){(function(e){
var r="object"==typeof e&&e&&e.Object===Object&&e;t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],168:[function(e,t,r){var n=e("./_overArg"),o=n(Object.getPrototypeOf,Object);t.exports=o},{"./_overArg":171}],169:[function(e,t,r){function n(e){var t=a.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var o=s.call(e);return n&&(t?e[c]=r:delete e[c]),o}var o=e("./_Symbol"),i=Object.prototype,a=i.hasOwnProperty,s=i.toString,c=o?o.toStringTag:void 0;t.exports=n},{"./_Symbol":165}],170:[function(e,t,r){function n(e){return i.call(e)}var o=Object.prototype,i=o.toString;t.exports=n},{}],171:[function(e,t,r){function n(e,t){return function(r){return e(t(r))}}t.exports=n},{}],172:[function(e,t,r){var n=e("./_freeGlobal"),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();t.exports=i},{"./_freeGlobal":167}],173:[function(e,t,r){function n(e){return null!=e&&"object"==typeof e}t.exports=n},{}],174:[function(e,t,r){function n(e){if(!a(e)||o(e)!=s)return!1;var t=i(e);if(null===t)return!0;var r=d.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&l.call(r)==f}var o=e("./_baseGetTag"),i=e("./_getPrototype"),a=e("./isObjectLike"),s="[object Object]",c=Function.prototype,u=Object.prototype,l=c.toString,d=u.hasOwnProperty,f=l.call(Object);t.exports=n},{"./_baseGetTag":166,"./_getPrototype":168,"./isObjectLike":173}],175:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("events"),c=e("./Logger"),u=function(e){return e&&e.__esModule?e:{default:e}}(c),l=e("./errors"),d=new u.default("CommandQueue"),f=function(e){function t(){n(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.setMaxListeners(1/0),e._closed=!1,e._busy=!1,e._queue=[],e}return i(t,e),a(t,[{key:"close",value:function(){this._closed=!0}},{key:"push",value:function(e,t){var r=this,n=Object.assign({method:e},t);return d.debug("push() [method:%s]",e),new Promise(function(e,t){var o=r._queue;n.resolve=e,n.reject=t,o.push(n),r._handlePendingCommands()})}},{key:"_handlePendingCommands",value:function(){var e=this;if(!this._busy){var t=this._queue,r=t[0];r&&(this._busy=!0,this._handleCommand(r).then(function(){e._busy=!1,t.shift(),e._handlePendingCommands()}))}}},{key:"_handleCommand",value:function(e){var t=this;if(d.debug("_handleCommand() [method:%s]",e.method),this._closed)return e.reject(new l.InvalidStateError("closed")),Promise.resolve();var r={promise:null};return this.emit("exec",e,r),Promise.resolve().then(function(){return r.promise}).then(function(r){if(d.debug("_handleCommand() | command succeeded [method:%s]",e.method),t._closed)return void e.reject(new l.InvalidStateError("closed"));e.resolve(r)}).catch(function(t){d.error("_handleCommand() | command failed [method:%s]: %o",e.method,t),e.reject(t)})}}]),t}(s.EventEmitter);r.default=f},{"./Logger":179,"./errors":184,events:158}],176:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./Logger"),l=n(u),d=e("./EnhancedEventEmitter"),f=n(d),p=e("./errors"),h=new Set(["default","low","medium","high"]),m=1e3,v=new l.default("Consumer"),y=function(e){function t(e,r,n,a,s){o(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,v));return c._id=e,c._closed=!1,c._kind=r,c._rtpParameters=n,c._peer=a,c._appData=s,c._supported=!1,c._transport=null,c._track=null,c._locallyPaused=!1,c._remotelyPaused=!1,c._statsEnabled=!1,c._statsInterval=m,c._preferredProfile="default",c._effectiveProfile=null,c}return a(t,e),c(t,[{key:"close",value:function(){v.debug("close()"),this._closed||(this._closed=!0,this._statsEnabled&&(this._statsEnabled=!1,this.transport&&this.transport.disableConsumerStats(this)),this.emit("@close"),this.safeEmit("close","local"),this._destroy())}},{key:"remoteClose",value:function(){v.debug("remoteClose()"),this._closed||(this._closed=!0,this._transport&&this._transport.removeConsumer(this),this._destroy(),this.emit("@close"),this.safeEmit("close","remote"))}},{key:"_destroy",value:function(){this._transport=null;try{this._track.stop()}catch(e){}this._track=null}},{key:"receive",value:function(e){var t=this;return v.debug("receive() [transport:%o]",e),this._closed?Promise.reject(new p.InvalidStateError("Consumer closed")):this._supported?this._transport?Promise.reject(new Error("already handled by a Transport")):"object"!==(void 0===e?"undefined":s(e))?Promise.reject(new TypeError("invalid Transport")):(this._transport=e,e.addConsumer(this).then(function(r){return t._track=r,t.paused&&(r.enabled=!1),e.once("@close",function(){if(!t._closed&&t._transport===e){t._transport=null;try{t._track.stop()}catch(e){}t._track=null,t.safeEmit("unhandled")}}),t.safeEmit("handled"),t._statsEnabled&&e.enableConsumerStats(t,t._statsInterval),r}).catch(function(e){throw t._transport=null,e})):Promise.reject(new Error("unsupported codecs"))}},{key:"pause",value:function(e){return v.debug("pause()"),this._closed?(v.error("pause() | Consumer closed"),!1):!!this._locallyPaused||(this._locallyPaused=!0,this._track&&(this._track.enabled=!1),this._transport&&this._transport.pauseConsumer(this,e),this.safeEmit("pause","local",e),this.paused)}},{key:"remotePause",value:function(e){v.debug("remotePause()"),this._closed||this._remotelyPaused||(this._remotelyPaused=!0,this._track&&(this._track.enabled=!1),this.safeEmit("pause","remote",e))}},{key:"resume",value:function(e){return v.debug("resume()"),this._closed?(v.error("resume() | Consumer closed"),!1):!this._locallyPaused||(this._locallyPaused=!1,this._track&&!this._remotelyPaused&&(this._track.enabled=!0),this._transport&&this._transport.resumeConsumer(this,e),this.safeEmit("resume","local",e),!this.paused)}},{key:"remoteResume",value:function(e){v.debug("remoteResume()"),!this._closed&&this._remotelyPaused&&(this._remotelyPaused=!1,this._track&&!this._locallyPaused&&(this._track.enabled=!0),this.safeEmit("resume","remote",e))}},{key:"setPreferredProfile",value:function(e){if(v.debug("setPreferredProfile() [profile:%s]",e),this._closed)return void v.error("setPreferredProfile() | Consumer closed");if(e!==this._preferredProfile){if(!h.has(e))return void v.error('setPreferredProfile() | invalid profile "%s"',e);this._preferredProfile=e,this._transport&&this._transport.setConsumerPreferredProfile(this,this._preferredProfile)}}},{key:"remoteSetPreferredProfile",value:function(e){v.debug("remoteSetPreferredProfile() [profile:%s]",e),this._closed||e===this._preferredProfile||(this._preferredProfile=e)}},{key:"remoteEffectiveProfileChanged",value:function(e){v.debug("remoteEffectiveProfileChanged() [profile:%s]",e),this._closed||e===this._effectiveProfile||(this._effectiveProfile=e,this.safeEmit("effectiveprofilechange",this._effectiveProfile))}},{key:"enableStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;if(v.debug("enableStats() [interval:%s]",e),this._closed)return void v.error("enableStats() | Consumer closed");this._statsEnabled||(this._statsInterval="number"!=typeof e||e<1e3?m:e,this._statsEnabled=!0,this._transport&&this._transport.enableConsumerStats(this,this._statsInterval))}},{key:"disableStats",value:function(){if(v.debug("disableStats()"),this._closed)return void v.error("disableStats() | Consumer closed");this._statsEnabled&&(this._statsEnabled=!1,this._transport&&this._transport.disableConsumerStats(this))}},{key:"setSupported",value:function(e){this._supported=e}},{key:"remoteStats",value:function(e){this.safeEmit("stats",e)}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"kind",get:function(){return this._kind}},{key:"rtpParameters",get:function(){return this._rtpParameters}},{key:"peer",get:function(){return this._peer}},{key:"appData",get:function(){return this._appData}},{key:"supported",get:function(){return this._supported}},{key:"transport",get:function(){return this._transport}},{key:"track",get:function(){return this._track}},{key:"locallyPaused",get:function(){return this._locallyPaused}},{key:"remotelyPaused",get:function(){return this._remotelyPaused}},{key:"paused",get:function(){return this._locallyPaused||this._remotelyPaused}},{key:"preferredProfile",get:function(){return this._preferredProfile}},{key:"effectiveProfile",get:function(){return this._effectiveProfile}}]),t}(f.default);r.default=y},{"./EnhancedEventEmitter":178,"./Logger":179,"./errors":184}],177:[function(e,t,r){(function(t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("bowser"),s=n(a),c=e("./Logger"),u=n(c),l=e("./handlers/Chrome55"),d=n(l),f=e("./handlers/Chrome67"),p=n(f),h=e("./handlers/Safari11"),m=n(h),v=e("./handlers/Firefox50"),y=n(v),g=e("./handlers/Firefox59"),b=n(g),_=e("./handlers/Edge11"),w=n(_),k=e("./handlers/ReactNative"),P=n(k),x=new u.default("Device"),S=function(){function e(){o(this,e)}return i(e,null,[{key:"getFlag",value:function(){return e._detected||e._detect(),e._flag}},{key:"getName",value:function(){return e._detected||e._detect(),e._name}},{key:"getVersion",value:function(){return e._detected||e._detect(),e._version}},{key:"getBowser",value:function(){return e._detected||e._detect(),e._bowser}},{key:"isSupported",value:function(){return e._detected||e._detect(),Boolean(e._handlerClass)}},{key:"_detect",value:function(){if(e._detected=!0,t.navigator&&"ReactNative"===t.navigator.product)e._flag="react-native",e._name="ReactNative",e._version=void 0,e._bowser={},e._handlerClass=P.default;else if(t.navigator&&"string"==typeof t.navigator.userAgent){var r=t.navigator.userAgent,n=s.default.detect(r);e._flag=void 0,e._name=n.name||void 0,e._version=n.version||void 0,e._bowser=n,e._handlerClass=null,s.default.check({chrome:"67",chromium:"67"},!0,r)?(e._flag="chrome",e._handlerClass=p.default):s.default.check({chrome:"55",chromium:"55"},!0,r)?(e._flag="chrome",e._handlerClass=d.default):s.default.check({firefox:"59"},!0,r)?(e._flag="firefox",e._handlerClass=b.default):s.default.check({firefox:"50"},!0,r)?(e._flag="firefox",e._handlerClass=y.default):s.default.check({safari:"11"},!0,r)?(e._flag="safari",e._handlerClass=m.default):s.default.check({msedge:"11"},!0,r)&&(e._flag="msedge",e._handlerClass=w.default),s.default.check({opera:"44"},!0,r)&&(e._flag="opera",e._handlerClass=d.default),e.isSupported()?x.debug('browser supported [flag:%s, name:"%s", version:%s, handler:%s]',e._flag,e._name,e._version,e._handlerClass.tag):x.warn("browser not supported [name:%s, version:%s]",e._name,e._version)}else x.warn("device not supported")}},{key:"Handler",get:function(){return e._detected||e._detect(),e._handlerClass}}]),e}();r.default=S,S._detected=!1,S._flag=void 0,S._name=void 0,S._version=void 0,S._bowser=void 0,S._handlerClass=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./Logger":179,"./handlers/Chrome55":185,"./handlers/Chrome67":186,"./handlers/Edge11":187,"./handlers/Firefox50":188,"./handlers/Firefox59":189,"./handlers/ReactNative":190,"./handlers/Safari11":191,bowser:53}],178:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("events"),c=e("./Logger"),u=function(e){return e&&e.__esModule?e:{default:e}}(c),l=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.setMaxListeners(1/0),r._logger=e||new u.default("EnhancedEventEmitter"),r}return i(t,e),a(t,[{key:"safeEmit",value:function(e){try{for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e].concat(r))}catch(t){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",e,t)}}},{key:"safeEmitAsPromise",value:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return new Promise(function(r,o){var i=function(e){r(e)},a=function(r){t._logger.error("safeEmitAsPromise() | errback called [event:%s]:%o",e,r),o(r)};t.safeEmit.apply(t,[e].concat(n,[i,a]))})}}]),t}(s.EventEmitter);r.default=l},{"./Logger":179,events:158}],179:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("debug"),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s="mediasoup-client",c=function(){function e(t){n(this,e),t?(this._debug=(0,a.default)(s+":"+t),this._warn=(0,a.default)(s+":WARN:"+t),this._error=(0,a.default)(s+":ERROR:"+t)):(this._debug=(0,a.default)(s),this._warn=(0,a.default)(s+":WARN"),this._error=(0,a.default)(s+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return o(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();r.default=c},{debug:156}],180:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./Logger"),u=n(c),l=e("./EnhancedEventEmitter"),d=n(l),f=new u.default("Peer"),p=function(e){function t(e,r){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f));return n._name=e,n._closed=!1,n._appData=r,n._consumers=new Map,n}return a(t,e),s(t,[{key:"close",value:function(){if(f.debug("close()"),!this._closed){this._closed=!0,this.emit("@close"),this.safeEmit("close","local");var e=!0,t=!1,r=void 0;try{for(var n,o=this._consumers.values()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.close()}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}}},{key:"remoteClose",value:function(e){if(f.debug("remoteClose()"),!this._closed){this._closed=!0,this.emit("@close"),this.safeEmit("close","remote",e);var t=!0,r=!1,n=void 0;try{for(var o,i=this._consumers.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.remoteClose()}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}}},{key:"getConsumerById",value:function(e){return this._consumers.get(e)}},{key:"addConsumer",value:function(e){var t=this;if(this._consumers.has(e.id))throw new Error("Consumer already exists [id:"+e.id+"]");this._consumers.set(e.id,e),e.on("@close",function(){t._consumers.delete(e.id)}),this.safeEmit("newconsumer",e)}},{key:"name",get:function(){return this._name}},{key:"closed",get:function(){return this._closed}},{key:"appData",get:function(){return this._appData}},{key:"consumers",get:function(){return Array.from(this._consumers.values())}}]),t}(d.default);r.default=p},{"./EnhancedEventEmitter":178,"./Logger":179}],181:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./Logger"),l=n(u),d=e("./EnhancedEventEmitter"),f=n(d),p=e("./errors"),h=e("./utils"),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(h),v=1e3,y={low:1e5,medium:3e5,high:15e5},g=new l.default("Producer"),b=function(e){function t(e,r,n){o(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,g));a._id=m.randomNumber(),a._closed=!1,a._originalTrack=e;try{a._track=e.clone()}catch(t){a._track=e}return a._appData=n,a._simulcast=!1,"object"===s(r.simulcast)?a._simulcast=Object.assign({},y,r.simulcast):!0===r.simulcast&&(a._simulcast=Object.assign({},y)),a._transport=null,a._rtpParameters=null,a._locallyPaused=!a._track.enabled,a._remotelyPaused=!1,a._statsEnabled=!1,a._statsInterval=v,a._handleTrack(),a}return a(t,e),c(t,[{key:"close",value:function(e){g.debug("close()"),this._closed||(this._closed=!0,this._statsEnabled&&(this._statsEnabled=!1,this.transport&&this.transport.disableProducerStats(this)),this._transport&&this._transport.removeProducer(this,"local",e),this._destroy(),this.emit("@close","local",e),this.safeEmit("close","local",e))}},{key:"remoteClose",value:function(e){g.debug("remoteClose()"),this._closed||(this._closed=!0,this._transport&&this._transport.removeProducer(this,"remote",e),this._destroy(),this.emit("@close","remote",e),this.safeEmit("close","remote",e))}},{key:"_destroy",value:function(){this._transport=!1,this._rtpParameters=null;try{this._track.stop()}catch(e){}}},{key:"send",value:function(e){var t=this;return g.debug("send() [transport:%o]",e),this._closed?Promise.reject(new p.InvalidStateError("Producer closed")):this._transport?Promise.reject(new Error("already handled by a Transport")):"object"!==(void 0===e?"undefined":s(e))?Promise.reject(new TypeError("invalid Transport")):(this._transport=e,e.addProducer(this).then(function(){e.once("@close",function(){t._closed||t._transport!==e||(t._transport.removeProducer(t,"local"),t._transport=null,t._rtpParameters=null,t.safeEmit("unhandled"))}),t.safeEmit("handled"),t._statsEnabled&&e.enableProducerStats(t,t._statsInterval)}).catch(function(e){throw t._transport=null,e}))}},{key:"pause",value:function(e){return g.debug("pause()"),this._closed?(g.error("pause() | Producer closed"),!1):!!this._locallyPaused||(this._locallyPaused=!0,this._track.enabled=!1,this._transport&&this._transport.pauseProducer(this,e),this.safeEmit("pause","local",e),this.paused)}},{key:"remotePause",value:function(e){g.debug("remotePause()"),this._closed||this._remotelyPaused||(this._remotelyPaused=!0,this._track.enabled=!1,this.safeEmit("pause","remote",e))}},{key:"resume",value:function(e){return g.debug("resume()"),this._closed?(g.error("resume() | Producer closed"),!1):!this._locallyPaused||(this._locallyPaused=!1,this._remotelyPaused||(this._track.enabled=!0),this._transport&&this._transport.resumeProducer(this,e),this.safeEmit("resume","local",e),!this.paused)}},{key:"remoteResume",value:function(e){g.debug("remoteResume()"),!this._closed&&this._remotelyPaused&&(this._remotelyPaused=!1,this._locallyPaused||(this._track.enabled=!0),this.safeEmit("resume","remote",e))}},{key:"replaceTrack",value:function(e){var t=this;if(g.debug("replaceTrack() [track:%o]",e),this._closed)return Promise.reject(new p.InvalidStateError("Producer closed"));if(!(e instanceof MediaStreamTrack))return Promise.reject(new TypeError("track is not a MediaStreamTrack"));if("ended"===e.readyState)return Promise.reject(new Error('track.readyState is "ended"'));var r=void 0;try{r=e.clone()}catch(t){r=e}return Promise.resolve().then(function(){if(t._transport)return t._transport.replaceProducerTrack(t,r)}).then(function(){try{t._track.onended=null,t._track.stop()}catch(e){}return t.paused?r.enabled=!1:r.enabled=!0,t._originalTrack=e,t._track=r,t._handleTrack(),t._track})}},{key:"setRtpParameters",value:function(e){this._rtpParameters=e}},{key:"enableStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v;if(g.debug("enableStats() [interval:%s]",e),this._closed)return void g.error("enableStats() | Producer closed");this._statsEnabled||(this._statsInterval="number"!=typeof e||e<1e3?v:e,this._statsEnabled=!0,this._transport&&this._transport.enableProducerStats(this,this._statsInterval))}},{key:"disableStats",value:function(){if(g.debug("disableStats()"),this._closed)return void g.error("disableStats() | Producer closed");this._statsEnabled&&(this._statsEnabled=!1,this._transport&&this._transport.disableProducerStats(this))}},{key:"remoteStats",value:function(e){this.safeEmit("stats",e)}},{key:"_handleTrack",value:function(){var e=this;this._track.onended=function(){e._closed||(g.warn('track "ended" event'),e.safeEmit("trackended"))}}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"kind",get:function(){return this._track.kind}},{key:"track",get:function(){return this._track}},{key:"originalTrack",get:function(){return this._originalTrack}},{key:"simulcast",get:function(){return this._simulcast}},{key:"appData",get:function(){return this._appData}},{key:"transport",get:function(){return this._transport}},{key:"rtpParameters",get:function(){return this._rtpParameters}},{key:"locallyPaused",get:function(){return this._locallyPaused}},{key:"remotelyPaused",get:function(){return this._remotelyPaused}},{key:"paused",get:function(){return this._locallyPaused||this._remotelyPaused}}]),t}(f.default);r.default=b},{"./EnhancedEventEmitter":178,"./Logger":179,"./errors":184,"./utils":200}],182:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("./Logger"),l=n(u),d=e("./EnhancedEventEmitter"),f=n(d),p=e("./errors"),h=e("./ortc"),m=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(h),v=e("./Device"),y=n(v),g=e("./Transport"),b=n(g),_=e("./Producer"),w=n(_),k=e("./Peer"),P=n(k),x=e("./Consumer"),S=n(x),E=new l.default("Room"),T={new:"new",joining:"joining",joined:"joined",closed:"closed"},C=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,E));if(E.debug("constructor() [options:%o]",e),!y.default.isSupported())throw new Error("current browser/device not supported");return e=e||{},r._settings={roomSettings:e.roomSettings,requestTimeout:e.requestTimeout||1e4,transportOptions:e.transportOptions||{},turnServers:e.turnServers||[]},r._state=T.new,r._peerName=null,r._transports=new Map,r._producers=new Map,r._peers=new Map,r._extendedRtpCapabilities=null,r._canSendByKind={audio:!1,video:!1},r}return a(t,e),c(t,[{key:"getTransportById",value:function(e){return this._transports.get(e)}},{key:"getProducerById",value:function(e){return this._producers.get(e)}},{key:"getPeerByName",value:function(e){return this._peers.get(e)}},{key:"join",value:function(e,t){var r=this;if(E.debug('join() [peerName:"%s"]',e),"string"!=typeof e)return Promise.reject(new TypeError("invalid peerName"));if(this._state!==T.new&&this._state!==T.closed)return Promise.reject(new p.InvalidStateError('invalid state "'+this._state+'"'));this._peerName=e,this._state=T.joining;var n=void 0;return Promise.resolve().then(function(){return r._settings.roomSettings?void(n=r._settings.roomSettings):r._sendRequest("queryRoom",{target:"room"}).then(function(e){n=e,E.debug("join() | got Room settings:%o",n)})}).then(function(){return y.default.Handler.getNativeRtpCapabilities()}).then(function(e){E.debug("join() | native RTP capabilities:%o",e),r._extendedRtpCapabilities=m.getExtendedRtpCapabilities(e,n.rtpCapabilities),E.debug("join() | extended RTP capabilities:%o",r._extendedRtpCapabilities);var o=m.getUnsupportedCodecs(n.rtpCapabilities,n.mandatoryCodecPayloadTypes,r._extendedRtpCapabilities);if(o.length>0)throw E.error("%s mandatory room codecs not supported:%o",o.length,o),new p.UnsupportedError("mandatory room codecs not supported",o);r._canSendByKind.audio=m.canSend("audio",r._extendedRtpCapabilities),r._canSendByKind.video=m.canSend("video",r._extendedRtpCapabilities);var i=m.getRtpCapabilities(r._extendedRtpCapabilities);E.debug("join() | effective local RTP capabilities for receiving:%o",i);var a={target:"room",peerName:r._peerName,rtpCapabilities:i,appData:t};return r._sendRequest("join",a).then(function(e){return e.peers})}).then(function(e){var t=!0,n=!1,o=void 0;try{for(var i,a=(e||[])[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var s=i.value;try{r._handlePeerData(s)}catch(e){E.error("join() | error handling Peer:%o",e)}}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}return r._state=T.joined,E.debug("join() | joined the Room"),r.peers}).catch(function(e){throw r._state=T.new,e})}},{key:"leave",value:function(e){if(E.debug("leave()"),!this.closed){this._sendNotification("leave",{appData:e}),this._state=T.closed,this.safeEmit("close","local",e);var t=!0,r=!1,n=void 0;try{for(var o,i=this._transports.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.close()}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}var a=!0,s=!1,c=void 0;try{for(var u,l=this._producers.values()[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){u.value.close()}}catch(e){s=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}var d=!0,f=!1,p=void 0;try{for(var h,m=this._peers.values()[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){h.value.close()}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}}}},{key:"remoteClose",value:function(e){if(E.debug("remoteClose()"),!this.closed){this._state=T.closed,this.safeEmit("close","remote",e);var t=!0,r=!1,n=void 0;try{for(var o,i=this._transports.values()[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){o.value.remoteClose()}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}var a=!0,s=!1,c=void 0;try{for(var u,l=this._producers.values()[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){u.value.remoteClose()}}catch(e){s=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}var d=!0,f=!1,p=void 0;try{for(var h,m=this._peers.values()[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){h.value.remoteClose()}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}}}},{key:"canSend",value:function(e){if(!this.joined)throw new p.InvalidStateError('invalid state "'+this._state+'"');if("audio"!==e&&"video"!==e)throw new TypeError('invalid kind "'+e+'"');return this._canSendByKind[e]}},{key:"createTransport",value:function(e,t){var r=this;if(E.debug("createTransport() [direction:%s]",e),!this.joined)throw new p.InvalidStateError('invalid state "'+this._state+'"')
;if("send"!==e&&"recv"!==e)throw new TypeError('invalid direction "'+e+'"');var n=new b.default(e,this._extendedRtpCapabilities,this._settings,t);return this._transports.set(n.id,n),n.on("@request",function(e,t,n,o){r._sendRequest(e,t).then(n).catch(o)}),n.on("@notify",function(e,t){r._sendNotification(e,t)}),n.on("@close",function(){r._transports.delete(n.id)}),n}},{key:"createProducer",value:function(e,t,r){var n=this;if(E.debug("createProducer() [track:%o, options:%o]",e,t),!this.joined)throw new p.InvalidStateError('invalid state "'+this._state+'"');if(!(e instanceof MediaStreamTrack))throw new TypeError("track is not a MediaStreamTrack");if(!this._canSendByKind[e.kind])throw new Error("cannot send "+e.kind);if("ended"===e.readyState)throw new Error('track.readyState is "ended"');t=t||{};var o=new w.default(e,t,r);return this._producers.set(o.id,o),o.on("@close",function(){n._producers.delete(o.id)}),o}},{key:"restartIce",value:function(){if(!this.joined)throw new p.InvalidStateError('invalid state "'+this._state+'"');var e=!0,t=!1,r=void 0;try{for(var n,o=this._transports.values()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){n.value.restartIce()}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}}},{key:"receiveNotification",value:function(e){var t=this;if(this.closed)return Promise.reject(new p.InvalidStateError("Room closed"));if("object"!==(void 0===e?"undefined":s(e)))return Promise.reject(new TypeError("wrong notification Object"));if(!0!==e.notification)return Promise.reject(new TypeError("not a notification"));if("string"!=typeof e.method)return Promise.reject(new TypeError("wrong/missing notification method"));var r=e.method;return E.debug("receiveNotification() [method:%s, notification:%o]",r,e),Promise.resolve().then(function(){switch(r){case"closed":var n=e.appData;t.remoteClose(n);break;case"transportClosed":var o=e.id,i=e.appData,a=t._transports.get(o);if(!a)throw new Error('Transport not found [id:"'+o+'"]');a.remoteClose(i);break;case"transportStats":var s=e.id,c=e.stats,u=t._transports.get(s);if(!u)throw new Error("transport not found [id:"+s+"]");u.remoteStats(c);break;case"newPeer":var l=e.name;if(t._peers.has(l))throw new Error('Peer already exists [name:"'+l+'"]');var d=e;t._handlePeerData(d);break;case"peerClosed":var f=e.name,p=e.appData,h=t._peers.get(f);if(!h)throw new Error('no Peer found [name:"'+f+'"]');h.remoteClose(p);break;case"producerPaused":var m=e.id,v=e.appData,y=t._producers.get(m);if(!y)throw new Error("Producer not found [id:"+m+"]");y.remotePause(v);break;case"producerResumed":var g=e.id,b=e.appData,_=t._producers.get(g);if(!_)throw new Error("Producer not found [id:"+g+"]");_.remoteResume(b);break;case"producerClosed":var w=e.id,k=e.appData,P=t._producers.get(w);if(!P)throw new Error("Producer not found [id:"+w+"]");P.remoteClose(k);break;case"producerStats":var x=e.id,S=e.stats,E=t._producers.get(x);if(!E)throw new Error("Producer not found [id:"+x+"]");E.remoteStats(S);break;case"newConsumer":var T=e.peerName,C=t._peers.get(T);if(!C)throw new Error('no Peer found [name:"'+T+'"]');var R=e;t._handleConsumerData(R,C);break;case"consumerClosed":var j=e.id,O=e.peerName,A=e.appData,D=t._peers.get(O);if(!D)throw new Error('no Peer found [name:"'+O+'"]');var I=D.getConsumerById(j);if(!I)throw new Error("Consumer not found [id:"+j+"]");I.remoteClose(A);break;case"consumerPaused":var M=e.id,N=e.peerName,L=e.appData,F=t._peers.get(N);if(!F)throw new Error('no Peer found [name:"'+N+'"]');var U=F.getConsumerById(M);if(!U)throw new Error("Consumer not found [id:"+M+"]");U.remotePause(L);break;case"consumerResumed":var B=e.id,q=e.peerName,W=e.appData,H=t._peers.get(q);if(!H)throw new Error('no Peer found [name:"'+q+'"]');var z=H.getConsumerById(B);if(!z)throw new Error("Consumer not found [id:"+B+"]");z.remoteResume(W);break;case"consumerPreferredProfileSet":var G=e.id,V=e.peerName,Y=e.profile,K=t._peers.get(V);if(!K)throw new Error('no Peer found [name:"'+V+'"]');var $=K.getConsumerById(G);if(!$)throw new Error("Consumer not found [id:"+G+"]");$.remoteSetPreferredProfile(Y);break;case"consumerEffectiveProfileChanged":var X=e.id,J=e.peerName,Q=e.profile,Z=t._peers.get(J);if(!Z)throw new Error('no Peer found [name:"'+J+'"]');var ee=Z.getConsumerById(X);if(!ee)throw new Error("Consumer not found [id:"+X+"]");ee.remoteEffectiveProfileChanged(Q);break;case"consumerStats":var te=e.id,re=e.peerName,ne=e.stats,oe=t._peers.get(re);if(!oe)throw new Error('no Peer found [name:"'+re+'"]');var ie=oe.getConsumerById(te);if(!ie)throw new Error("Consumer not found [id:"+te+"]");ie.remoteStats(ne);break;default:throw new Error('unknown notification method "'+r+'"')}}).catch(function(t){E.error("receiveNotification() failed [notification:%o]: %s",e,t)})}},{key:"_sendRequest",value:function(e,t){var r=this,n=Object.assign({method:e,target:"peer"},t);return this.closed?(E.error("_sendRequest() | Room closed [method:%s, request:%o]",e,n),Promise.reject(new p.InvalidStateError("Room closed"))):(E.debug("_sendRequest() [method:%s, request:%o]",e,n),new Promise(function(t,o){var i=!1,a=setTimeout(function(){E.error("request failed [method:%s]: timeout",e),i=!0,o(new p.TimeoutError("timeout"))},r._settings.requestTimeout),s=function(n){if(!i){if(i=!0,clearTimeout(a),r.closed)return E.error("request failed [method:%s]: Room closed",e),void o(new Error("Room closed"));E.debug("request succeeded [method:%s, response:%o]",e,n),t(n)}},c=function(t){if(!i){if(i=!0,clearTimeout(a),r.closed)return E.error("request failed [method:%s]: Room closed",e),void o(new Error("Room closed"));t instanceof Error||(t=new Error(String(t))),E.error("request failed [method:%s]:%o",e,t),o(t)}};r.safeEmit("request",n,s,c)}))}},{key:"_sendNotification",value:function(e,t){if(!this.closed){var r=Object.assign({method:e,target:"peer",notification:!0},t);E.debug("_sendNotification() [method:%s, notification:%o]",e,r),this.safeEmit("notify",r)}}},{key:"_handlePeerData",value:function(e){var t=this,r=e.name,n=e.consumers,o=e.appData,i=new P.default(r,o);this._peers.set(i.name,i),i.on("@close",function(){t._peers.delete(i.name)});var a=!0,s=!1,c=void 0;try{for(var u,l=n[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var d=u.value;try{this._handleConsumerData(d,i)}catch(e){E.error("error handling existing Consumer in Peer:%o",e)}}}catch(e){s=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}this.joined&&this.safeEmit("newpeer",i)}},{key:"_handleConsumerData",value:function(e,t){var r=e.id,n=e.kind,o=e.rtpParameters,i=e.paused,a=e.appData,s=new S.default(r,n,o,t,a);m.canReceive(s.rtpParameters,this._extendedRtpCapabilities)&&s.setSupported(!0),i&&s.remotePause(),t.addConsumer(s)}},{key:"joined",get:function(){return this._state===T.joined}},{key:"closed",get:function(){return this._state===T.closed}},{key:"peerName",get:function(){return this._peerName}},{key:"transports",get:function(){return Array.from(this._transports.values())}},{key:"producers",get:function(){return Array.from(this._producers.values())}},{key:"peers",get:function(){return Array.from(this._peers.values())}}]),t}(f.default);r.default=C},{"./Consumer":176,"./Device":177,"./EnhancedEventEmitter":178,"./Logger":179,"./Peer":180,"./Producer":181,"./Transport":183,"./errors":184,"./ortc":199}],183:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./Logger"),u=n(c),l=e("./EnhancedEventEmitter"),d=n(l),f=e("./errors"),p=e("./utils"),h=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(p),m=e("./Device"),v=n(m),y=e("./CommandQueue"),g=n(y),b=new u.default("Transport"),_=function(e){function t(e,r,n,a){o(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b));return b.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",e,r),s._id=h.randomNumber(),s._closed=!1,s._direction=e,s._settings=n,s._appData=a,s._statsEnabled=!1,s._commandQueue=new g.default,s._handler=new v.default.Handler(e,r,n),s._connectionState="new",s._commandQueue.on("exec",s._execCommand.bind(s)),s._handleHandler(),s}return a(t,e),s(t,[{key:"close",value:function(e){b.debug("close()"),this._closed||(this._closed=!0,this._statsEnabled&&(this._statsEnabled=!1,this.disableStats()),this.safeEmit("@notify","closeTransport",{id:this._id,appData:e}),this.emit("@close"),this.safeEmit("close","local",e),this._destroy())}},{key:"remoteClose",value:function(e){b.debug("remoteClose()"),this._closed||(this._closed=!0,this.emit("@close"),this.safeEmit("close","remote",e),this._destroy())}},{key:"_destroy",value:function(){this._commandQueue.close(),this._handler.close()}},{key:"restartIce",value:function(){var e=this;b.debug("restartIce()"),this._closed||"new"!==this._connectionState&&Promise.resolve().then(function(){var t={id:e._id};return e.safeEmitAsPromise("@request","restartTransport",t)}).then(function(t){var r=t.iceParameters;return e._commandQueue.push("restartIce",{remoteIceParameters:r})}).catch(function(e){b.error("restartIce() | failed: %o",e)})}},{key:"enableStats",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;b.debug("enableStats() [interval:%s]",e),("number"!=typeof e||e<1e3)&&(e=1e3),this._statsEnabled=!0;var t={id:this._id,interval:e};this.safeEmit("@notify","enableTransportStats",t)}},{key:"disableStats",value:function(){b.debug("disableStats()"),this._statsEnabled=!1;var e={id:this._id};this.safeEmit("@notify","disableTransportStats",e)}},{key:"_handleHandler",value:function(){var e=this,t=this._handler;t.on("@connectionstatechange",function(t){e._connectionState!==t&&(b.debug("Transport connection state changed to %s",t),e._connectionState=t,e._closed||e.safeEmit("connectionstatechange",t))}),t.on("@needcreatetransport",function(t,r,n){var o={id:e._id,direction:e._direction,options:e._settings.transportOptions,appData:e._appData};t&&(o.dtlsParameters=t.dtlsParameters),e.safeEmit("@request","createTransport",o,r,n)}),t.on("@needupdatetransport",function(t){var r={id:e._id,dtlsParameters:t.dtlsParameters};e.safeEmit("@notify","updateTransport",r)}),t.on("@needupdateproducer",function(t,r){var n={id:t.id,rtpParameters:r};t.setRtpParameters(r),e.safeEmit("@notify","updateProducer",n)})}},{key:"addProducer",value:function(e){return b.debug("addProducer() [producer:%o]",e),this._closed?Promise.reject(new f.InvalidStateError("Transport closed")):"send"!==this._direction?Promise.reject(new Error("not a sending Transport")):this._commandQueue.push("addProducer",{producer:e})}},{key:"removeProducer",value:function(e,t,r){b.debug("removeProducer() [producer:%o]",e),this._closed||this._commandQueue.push("removeProducer",{producer:e}).catch(function(){}),"local"===t&&this.safeEmit("@notify","closeProducer",{id:e.id,appData:r})}},{key:"pauseProducer",value:function(e,t){b.debug("pauseProducer() [producer:%o]",e);var r={id:e.id,appData:t};this.safeEmit("@notify","pauseProducer",r)}},{key:"resumeProducer",value:function(e,t){b.debug("resumeProducer() [producer:%o]",e);var r={id:e.id,appData:t};this.safeEmit("@notify","resumeProducer",r)}},{key:"replaceProducerTrack",value:function(e,t){return b.debug("replaceProducerTrack() [producer:%o]",e),this._commandQueue.push("replaceProducerTrack",{producer:e,track:t})}},{key:"enableProducerStats",value:function(e,t){b.debug("enableProducerStats() [producer:%o]",e);var r={id:e.id,interval:t};this.safeEmit("@notify","enableProducerStats",r)}},{key:"disableProducerStats",value:function(e){b.debug("disableProducerStats() [producer:%o]",e);var t={id:e.id};this.safeEmit("@notify","disableProducerStats",t)}},{key:"addConsumer",value:function(e){return b.debug("addConsumer() [consumer:%o]",e),this._closed?Promise.reject(new f.InvalidStateError("Transport closed")):"recv"!==this._direction?Promise.reject(new Error("not a receiving Transport")):this._commandQueue.push("addConsumer",{consumer:e})}},{key:"removeConsumer",value:function(e){b.debug("removeConsumer() [consumer:%o]",e),this._commandQueue.push("removeConsumer",{consumer:e}).catch(function(){})}},{key:"pauseConsumer",value:function(e,t){b.debug("pauseConsumer() [consumer:%o]",e);var r={id:e.id,appData:t};this.safeEmit("@notify","pauseConsumer",r)}},{key:"resumeConsumer",value:function(e,t){b.debug("resumeConsumer() [consumer:%o]",e);var r={id:e.id,appData:t};this.safeEmit("@notify","resumeConsumer",r)}},{key:"setConsumerPreferredProfile",value:function(e,t){b.debug("setConsumerPreferredProfile() [consumer:%o]",e);var r={id:e.id,profile:t};this.safeEmit("@notify","setConsumerPreferredProfile",r)}},{key:"enableConsumerStats",value:function(e,t){b.debug("enableConsumerStats() [consumer:%o]",e);var r={id:e.id,interval:t};this.safeEmit("@notify","enableConsumerStats",r)}},{key:"disableConsumerStats",value:function(e){b.debug("disableConsumerStats() [consumer:%o]",e);var t={id:e.id};this.safeEmit("@notify","disableConsumerStats",t)}},{key:"remoteStats",value:function(e){this.safeEmit("stats",e)}},{key:"_execCommand",value:function(e,t){var r=void 0;try{switch(e.method){case"addProducer":var n=e.producer;r=this._execAddProducer(n);break;case"removeProducer":var o=e.producer;r=this._execRemoveProducer(o);break;case"replaceProducerTrack":var i=e.producer,a=e.track;r=this._execReplaceProducerTrack(i,a);break;case"addConsumer":var s=e.consumer;r=this._execAddConsumer(s);break;case"removeConsumer":var c=e.consumer;r=this._execRemoveConsumer(c);break;case"restartIce":var u=e.remoteIceParameters;r=this._execRestartIce(u);break;default:r=Promise.reject(new Error('unknown command method "'+e.method+'"'))}}catch(e){r=Promise.reject(e)}t.promise=r}},{key:"_execAddProducer",value:function(e){var t=this;b.debug("_execAddProducer()");var r=void 0;return Promise.resolve().then(function(){return t._handler.addProducer(e)}).then(function(n){r=n;var o={id:e.id,kind:e.kind,transportId:t._id,rtpParameters:n,paused:e.locallyPaused,appData:e.appData};return t.safeEmitAsPromise("@request","createProducer",o)}).then(function(){e.setRtpParameters(r)})}},{key:"_execRemoveProducer",value:function(e){return b.debug("_execRemoveProducer()"),this._handler.removeProducer(e)}},{key:"_execReplaceProducerTrack",value:function(e,t){return b.debug("_execReplaceProducerTrack()"),this._handler.replaceProducerTrack(e,t)}},{key:"_execAddConsumer",value:function(e){var t=this;b.debug("_execAddConsumer()");var r=void 0;return Promise.resolve().then(function(){return t._handler.addConsumer(e)}).then(function(n){r=n;var o={id:e.id,transportId:t.id,paused:e.locallyPaused,preferredProfile:e.preferredProfile};return t.safeEmitAsPromise("@request","enableConsumer",o)}).then(function(t){var n=t.paused,o=t.preferredProfile,i=t.effectiveProfile;return n&&e.remotePause(),o&&e.remoteSetPreferredProfile(o),i&&e.remoteEffectiveProfileChanged(i),r})}},{key:"_execRemoveConsumer",value:function(e){return b.debug("_execRemoveConsumer()"),this._handler.removeConsumer(e)}},{key:"_execRestartIce",value:function(e){return b.debug("_execRestartIce()"),this._handler.restartIce(e)}},{key:"id",get:function(){return this._id}},{key:"closed",get:function(){return this._closed}},{key:"direction",get:function(){return this._direction}},{key:"appData",get:function(){return this._appData}},{key:"connectionState",get:function(){return this._connectionState}}]),t}(d.default);r.default=_},{"./CommandQueue":175,"./Device":177,"./EnhancedEventEmitter":178,"./Logger":179,"./errors":184,"./utils":200}],184:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e){var t=e.getPrototypeOf||function(e){return e.__proto__},r=e.setPrototypeOf||function(e,t){return e.__proto__=t,e},n="object"===("undefined"==typeof Reflect?"undefined":a(Reflect))?Reflect.construct:function(e,t,n){var o,i=[null];return i.push.apply(i,t),o=e.bind.apply(e,i),r(new o,n.prototype)};return function(e){var o=t(e);return r(e,r(function(){return n(o,arguments,t(this).constructor)},o))}}(Object),c=r.InvalidStateError=s(function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(r,t):r.stack=new Error(e).stack,r}return i(t,e),t}(Error));r.TimeoutError=s(function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.name="TimeoutError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(r,c):r.stack=new Error(e).stack,r}return i(t,e),t}(Error)),r.UnsupportedError=s(function(e){function t(e,r){n(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(i,c):i.stack=new Error(e).stack,i.data=r,i}return i(t,e),t}(Error))},{}],185:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("sdp-transform"),l=o(u),d=e("../Logger"),f=o(d),p=e("../EnhancedEventEmitter"),h=o(p),m=e("../utils"),v=n(m),y=e("../ortc"),g=n(y),b=e("./sdp/commonUtils"),_=n(b),w=e("./sdp/planBUtils"),k=n(w),P=e("./sdp/RemotePlanBSdp"),x=o(P),S=new f.default("Chrome55"),E=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,S));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new x.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return s(t,e),c(t,[{key:"close",value:function(){S.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(h.default),T=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"send",e,r));return n._transportReady=!1,n._stream=new MediaStream,n}return s(t,e),c(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(S.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._stream.getTrackById(r.id))return Promise.reject(new Error("track already added"));var n=void 0;return Promise.resolve().then(function(){return t._stream.addTrack(r),t._pc.addStream(t._stream),t._pc.createOffer()}).then(function(n){if(e.simulcast){S.debug("addProducer() | enabling simulcast");var o=l.default.parse(n.sdp);k.addSimulcastForTrack(o,r);n={type:"offer",sdp:l.default.write(o)}}return S.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",n),t._pc.setLocalDescription(n)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){n=l.default.parse(t._pc.localDescription.sdp);var e=t._remoteSdp.createAnswerSdp(n),r={type:"answer",sdp:e};return S.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){var o=v.clone(t._rtpParametersByKind[e.kind]);return k.fillRtpParametersForTrack(o,n,r),o}).catch(function(e){throw t._stream.removeTrack(r),t._pc.addStream(t._stream),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return S.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),Promise.resolve().then(function(){return t._stream.removeTrack(r),t._pc.addStream(t._stream),t._pc.createOffer()}).then(function(e){return S.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).catch(function(e){if(0===t._stream.getTracks().length)return void S.warn("removeProducer() | ignoring expected error due no sending tracks: %s",e.toString());throw e}).then(function(){if("stable"!==t._pc.signalingState){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)}})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;S.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id);var n=e.track,o=void 0;return Promise.resolve().then(function(){return r._stream.removeTrack(n),r._stream.addTrack(t),r._pc.addStream(r._stream),r._pc.createOffer()}).then(function(n){if(e.simulcast){S.debug("addProducer() | enabling simulcast");var o=l.default.parse(n.sdp);k.addSimulcastForTrack(o,t);n={type:"offer",sdp:l.default.write(o)}}return S.debug("replaceProducerTrack() | calling pc.setLocalDescription() [offer:%o]",n),r._pc.setLocalDescription(n)}).then(function(){o=l.default.parse(r._pc.localDescription.sdp);var e=r._remoteSdp.createAnswerSdp(o),t={type:"answer",sdp:e};return S.debug("replaceProducerTrack() | calling pc.setRemoteDescription() [answer:%o]",t),r._pc.setRemoteDescription(t)}).then(function(){var n=v.clone(r._rtpParametersByKind[e.kind]);k.fillRtpParametersForTrack(n,o,t),r.safeEmit("@needupdateproducer",e,n)}).catch(function(e){throw r._stream.removeTrack(t),r._stream.addTrack(n),r._pc.addStream(r._stream),e})}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=l.default.parse(r),o=_.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(E),C=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"recv",e,r));return n._transportCreated=!1,n._transportUpdated=!1,n._kinds=new Set,n._consumerInfos=new Map,n}return s(t,e),c(t,[{key:"addConsumer",value:function(e){var t=this;if(S.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return Promise.reject(new Error("Consumer already added"));var r=e.rtpParameters.encodings[0],n=e.rtpParameters.rtcp.cname,o={kind:e.kind,streamId:"recv-stream-"+e.id,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:n};return r.rtx&&r.rtx.ssrc&&(o.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,o),this._kinds.add(e.kind),Promise.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getRemoteStreams().find(function(e){return e.id===o.streamId}),r=e.getTrackById(o.trackId);if(!r)throw new Error("remote track not found");return r})}},{key:"removeConsumer",value:function(e){var t=this;return S.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id)?(this._consumerInfos.delete(e.id),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):Promise.reject(new Error("Consumer not found"))}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){S.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=l.default.parse(e),r=_.extractDtlsParameters(t),n={dtlsParameters:r};this.safeEmit("@needupdatetransport",n),this._transportUpdated=!0}}]),t}(E),R=function(){function e(t,r,n){i(this,e),S.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:g.getSendingRtpParameters("audio",r),video:g.getSendingRtpParameters("video",r)},new T(o,n);case"recv":return o={audio:g.getReceivingFullRtpParameters("audio",r),video:g.getReceivingFullRtpParameters("video",r)},new C(o,n)}}return c(e,null,[{key:"getNativeRtpCapabilities",value:function(){S.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});return e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(t){try{e.close()}catch(e){}var r=l.default.parse(t.sdp);return _.extractRtpCapabilities(r)}).catch(function(t){try{e.close()}catch(e){}throw t})}},{key:"tag",get:function(){return"Chrome55"}}]),e}();r.default=R},{"../EnhancedEventEmitter":178,"../Logger":179,"../ortc":199,"../utils":200,"./sdp/RemotePlanBSdp":193,"./sdp/commonUtils":195,"./sdp/planBUtils":196,"sdp-transform":255}],186:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("sdp-transform"),l=o(u),d=e("../Logger"),f=o(d),p=e("../EnhancedEventEmitter"),h=o(p),m=e("../utils"),v=n(m),y=e("../ortc"),g=n(y),b=e("./sdp/commonUtils"),_=n(b),w=e("./sdp/planBUtils"),k=n(w),P=e("./sdp/RemotePlanBSdp"),x=o(P),S=new f.default("Chrome67"),E=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,S));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new x.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return s(t,e),c(t,[{key:"close",value:function(){S.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(h.default),T=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"send",e,r));return n._transportReady=!1,n._stream=new MediaStream,n}return s(t,e),c(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(S.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._stream.getTrackById(r.id))return Promise.reject(new Error("track already added"))
;var n=void 0;return Promise.resolve().then(function(){return t._stream.addTrack(r),t._pc.addStream(t._stream),t._pc.createOffer()}).then(function(n){if(e.simulcast){S.debug("addProducer() | enabling simulcast");var o=l.default.parse(n.sdp);k.addSimulcastForTrack(o,r);n={type:"offer",sdp:l.default.write(o)}}return S.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",n),t._pc.setLocalDescription(n)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){n=l.default.parse(t._pc.localDescription.sdp);var e=t._remoteSdp.createAnswerSdp(n),r={type:"answer",sdp:e};return S.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){var o=v.clone(t._rtpParametersByKind[e.kind]);return k.fillRtpParametersForTrack(o,n,r),o}).catch(function(e){throw t._stream.removeTrack(r),t._pc.addStream(t._stream),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return S.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),Promise.resolve().then(function(){return t._stream.removeTrack(r),t._pc.addStream(t._stream),t._pc.createOffer()}).then(function(e){return S.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).catch(function(e){if(0===t._stream.getTracks().length)return void S.warn("removeProducer() | ignoring expected error due no sending tracks: %s",e.toString());throw e}).then(function(){if("stable"!==t._pc.signalingState){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)}})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;S.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id);var n=e.track;return Promise.resolve().then(function(){var e=r._pc.getSenders().find(function(e){return e.track===n});if(!e)throw new Error("local track not found");return e.replaceTrack(t)}).then(function(){r._stream.removeTrack(n),r._stream.addTrack(t)})}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=l.default.parse(r),o=_.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(E),C=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"recv",e,r));return n._transportCreated=!1,n._transportUpdated=!1,n._kinds=new Set,n._consumerInfos=new Map,n}return s(t,e),c(t,[{key:"addConsumer",value:function(e){var t=this;if(S.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return Promise.reject(new Error("Consumer already added"));var r=e.rtpParameters.encodings[0],n=e.rtpParameters.rtcp.cname,o={kind:e.kind,streamId:"recv-stream-"+e.id,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:n};return r.rtx&&r.rtx.ssrc&&(o.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,o),this._kinds.add(e.kind),Promise.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getRemoteStreams().find(function(e){return e.id===o.streamId}),r=e.getTrackById(o.trackId);if(!r)throw new Error("remote track not found");return r})}},{key:"removeConsumer",value:function(e){var t=this;return S.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id)?(this._consumerInfos.delete(e.id),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):Promise.reject(new Error("Consumer not found"))}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){S.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=l.default.parse(e),r=_.extractDtlsParameters(t),n={dtlsParameters:r};this.safeEmit("@needupdatetransport",n),this._transportUpdated=!0}}]),t}(E),R=function(){function e(t,r,n){i(this,e),S.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:g.getSendingRtpParameters("audio",r),video:g.getSendingRtpParameters("video",r)},new T(o,n);case"recv":return o={audio:g.getReceivingFullRtpParameters("audio",r),video:g.getReceivingFullRtpParameters("video",r)},new C(o,n)}}return c(e,null,[{key:"getNativeRtpCapabilities",value:function(){S.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});return e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(t){try{e.close()}catch(e){}var r=l.default.parse(t.sdp);return _.extractRtpCapabilities(r)}).catch(function(t){try{e.close()}catch(e){}throw t})}},{key:"tag",get:function(){return"Chrome67"}}]),e}();r.default=R},{"../EnhancedEventEmitter":178,"../Logger":179,"../ortc":199,"../utils":200,"./sdp/RemotePlanBSdp":193,"./sdp/commonUtils":195,"./sdp/planBUtils":196,"sdp-transform":255}],187:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("../Logger"),l=o(u),d=e("../EnhancedEventEmitter"),f=o(d),p=e("../utils"),h=n(p),m=e("../ortc"),v=n(m),y=e("./ortc/edgeUtils"),g=n(y),b="CNAME-EDGE-"+h.randomNumber(),_=new l.default("Edge11"),w=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,_));return _.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",e,r),o._rtpParametersByKind={audio:v.getSendingRtpParameters("audio",r),video:v.getSendingRtpParameters("video",r)},o._transportReady=!1,o._iceGatherer=null,o._iceTransport=null,o._dtlsTransport=null,o._rtpSenders=new Map,o._rtpReceivers=new Map,o._transportRemoteParameters=null,o._setIceGatherer(n),o._setIceTransport(),o._setDtlsTransport(),o}return s(t,e),c(t,null,[{key:"getNativeRtpCapabilities",value:function(){return _.debug("getNativeRtpCapabilities()"),g.getCapabilities()}},{key:"tag",get:function(){return"Edge11"}}]),c(t,[{key:"close",value:function(){_.debug("close()");try{this._iceGatherer.close()}catch(e){}try{this._iceTransport.stop()}catch(e){}try{this._dtlsTransport.stop()}catch(e){}var e=!0,t=!1,r=void 0;try{for(var n,o=this._rtpSenders.values()[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var i=n.value;try{i.stop()}catch(e){}}}catch(e){t=!0,r=e}finally{try{!e&&o.return&&o.return()}finally{if(t)throw r}}var a=!0,s=!1,c=void 0;try{for(var u,l=this._rtpReceivers.values()[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var d=u.value;try{d.stop()}catch(e){}}}catch(e){s=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}}},{key:"addProducer",value:function(e){var t=this,r=e.track;return _.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._rtpSenders.has(e.id)?Promise.reject(new Error("Producer already added")):Promise.resolve().then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){_.debug("addProducer() | calling new RTCRtpSender()");var n=new RTCRtpSender(r,t._dtlsTransport),o=h.clone(t._rtpParametersByKind[e.kind]),i={ssrc:h.randomNumber()};o.codecs.some(function(e){return"rtx"===e.name})&&(i.rtx={ssrc:h.randomNumber()}),o.encodings.push(i),o.rtcp={cname:b,reducedSize:!0,mux:!0};var a=g.mangleRtpParameters(o);return _.debug("addProducer() | calling rtpSender.send() [params:%o]",a),n.send(a),t._rtpSenders.set(e.id,n),o})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return _.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),Promise.resolve().then(function(){var r=t._rtpSenders.get(e.id);if(!r)throw new Error("RTCRtpSender not found");t._rtpSenders.delete(e.id);try{_.debug("removeProducer() | calling rtpSender.stop()"),r.stop()}catch(e){_.warn("rtpSender.stop() failed:%o",e)}})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;return _.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id),Promise.resolve().then(function(){var n=r._rtpSenders.get(e.id);if(!n)throw new Error("RTCRtpSender not found");n.setTrack(t)})}},{key:"addConsumer",value:function(e){var t=this;return _.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._rtpReceivers.has(e.id)?Promise.reject(new Error("Consumer already added")):Promise.resolve().then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){_.debug("addProducer() | calling new RTCRtpReceiver()");var r=new RTCRtpReceiver(t._dtlsTransport,e.kind);r.addEventListener("error",function(e){_.error('iceGatherer "error" event [event:%o]',e)});var n=g.mangleRtpParameters(e.rtpParameters);return _.debug("addProducer() | calling rtpReceiver.receive() [params:%o]",n),r.receive(n),t._rtpReceivers.set(e.id,r),r.track})}},{key:"removeConsumer",value:function(e){var t=this;return _.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind),Promise.resolve().then(function(){var r=t._rtpReceivers.get(e.id);if(!r)throw new Error("RTCRtpReceiver not found");t._rtpReceivers.delete(e.id);try{_.debug("removeConsumer() | calling rtpReceiver.stop()"),r.stop()}catch(e){_.warn("rtpReceiver.stop() failed:%o",e)}})}},{key:"restartIce",value:function(e){var t=this;_.debug("restartIce()"),Promise.resolve().then(function(){t._transportRemoteParameters.iceParameters=e;var r=t._transportRemoteParameters.iceCandidates;_.debug("restartIce() | calling iceTransport.start()"),t._iceTransport.start(t._iceGatherer,e,"controlling");var n=!0,o=!1,i=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;t._iceTransport.addRemoteCandidate(c)}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}t._iceTransport.addRemoteCandidate({})})}},{key:"_setIceGatherer",value:function(e){var t=new RTCIceGatherer({iceServers:e.turnServers||[],gatherPolicy:"all"});t.addEventListener("error",function(e){_.error('iceGatherer "error" event [event:%o]',e)});try{t.gather()}catch(e){_.debug("iceGatherer.gather() failed: %s",e.toString())}this._iceGatherer=t}},{key:"_setIceTransport",value:function(){var e=this,t=new RTCIceTransport(this._iceGatherer);t.addEventListener("statechange",function(){switch(t.state){case"checking":e.emit("@connectionstatechange","connecting");break;case"connected":case"completed":e.emit("@connectionstatechange","connected");break;case"failed":e.emit("@connectionstatechange","failed");break;case"disconnected":e.emit("@connectionstatechange","disconnected");break;case"closed":e.emit("@connectionstatechange","closed")}}),t.addEventListener("icestatechange",function(){switch(t.state){case"checking":e.emit("@connectionstatechange","connecting");break;case"connected":case"completed":e.emit("@connectionstatechange","connected");break;case"failed":e.emit("@connectionstatechange","failed");break;case"disconnected":e.emit("@connectionstatechange","disconnected");break;case"closed":e.emit("@connectionstatechange","closed")}}),t.addEventListener("candidatepairchange",function(e){_.debug('iceTransport "candidatepairchange" event [pair:%o]',e.pair)}),this._iceTransport=t}},{key:"_setDtlsTransport",value:function(){var e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",function(){_.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",function(){_.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state)}),e.addEventListener("error",function(e){_.error('dtlsTransport "error" event [event:%o]',e)}),this._dtlsTransport=e}},{key:"_setupTransport",value:function(){var e=this;return _.debug("_setupTransport()"),Promise.resolve().then(function(){var t={},r=e._dtlsTransport.getLocalParameters();return r.role="server",t.dtlsParameters=r,e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._transportRemoteParameters=t;var r=t.iceParameters,n=t.iceCandidates,o=t.dtlsParameters;e._iceTransport.start(e._iceGatherer,r,"controlling");var i=!0,a=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;e._iceTransport.addRemoteCandidate(l)}}catch(e){a=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(a)throw s}}e._iceTransport.addRemoteCandidate({}),o.fingerprints=o.fingerprints.filter(function(e){return"sha-256"===e.algorithm||"sha-384"===e.algorithm||"sha-512"===e.algorithm}),e._dtlsTransport.start(o),e._transportReady=!0})}}]),t}(f.default);r.default=w},{"../EnhancedEventEmitter":178,"../Logger":179,"../ortc":199,"../utils":200,"./ortc/edgeUtils":192}],188:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("sdp-transform"),l=o(u),d=e("../Logger"),f=o(d),p=e("../EnhancedEventEmitter"),h=o(p),m=e("../utils"),v=n(m),y=e("../ortc"),g=n(y),b=e("./sdp/commonUtils"),_=n(b),w=e("./sdp/unifiedPlanUtils"),k=n(w),P=e("./sdp/RemoteUnifiedPlanSdp"),x=o(P),S=new f.default("Firefox50"),E=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,S));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new x.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return s(t,e),c(t,[{key:"close",value:function(){S.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(h.default),T=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"send",e,r));return n._transportReady=!1,n._stream=new MediaStream,n._nextRid=1,n}return s(t,e),c(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(S.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._stream.getTrackById(r.id))return Promise.reject(new Error("track already added"));var n=void 0,o=void 0;return Promise.resolve().then(function(){t._stream.addTrack(r),n=t._pc.addTrack(r,t._stream)}).then(function(){if(e.simulcast){S.debug("addProducer() | enabling simulcast");var r=[];return e.simulcast.high&&r.push({rid:"high"+t._nextRid,active:!0,priority:"high",maxBitrate:e.simulcast.high}),e.simulcast.medium&&r.push({rid:"medium"+t._nextRid,active:!0,priority:"medium",maxBitrate:e.simulcast.medium}),e.simulcast.low&&r.push({rid:"low"+t._nextRid,active:!0,priority:"low",maxBitrate:e.simulcast.low}),t._nextRid++,n.setParameters({encodings:r})}}).then(function(){return t._pc.createOffer()}).then(function(e){return S.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){o=l.default.parse(t._pc.localDescription.sdp);var e=t._remoteSdp.createAnswerSdp(o),r={type:"answer",sdp:e};return S.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){var n=v.clone(t._rtpParametersByKind[e.kind]);return k.fillRtpParametersForTrack(n,o,r),n}).catch(function(e){try{t._pc.removeTrack(n)}catch(e){}throw t._stream.removeTrack(r),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return S.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),Promise.resolve().then(function(){var e=t._pc.getSenders().find(function(e){return e.track===r});if(!e)throw new Error("RTCRtpSender found");return t._pc.removeTrack(e),t._stream.removeTrack(r),Promise.resolve().then(function(){return t._pc.createOffer()}).then(function(e){return S.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)})}).then(function(){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;S.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id);var n=e.track;return Promise.resolve().then(function(){var e=r._pc.getSenders().find(function(e){return e.track===n});if(!e)throw new Error("local track not found");return e.replaceTrack(t)}).then(function(){r._stream.removeTrack(n),r._stream.addTrack(t)})}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=l.default.parse(r),o=_.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(E),C=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"recv",e,r));n._transportCreated=!1,n._transportUpdated=!1,n._consumerInfos=new Map;var o={mid:"fake-dc",kind:"application",closed:!1,cname:null};return n._consumerInfos.set(555,o),n}return s(t,e),c(t,[{key:"addConsumer",value:function(e){var t=this;if(S.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return Promise.reject(new Error("Consumer already added"));var r=e.rtpParameters.encodings[0],n=e.rtpParameters.rtcp.cname,o={mid:""+e.kind[0]+e.id,kind:e.kind,closed:e.closed,streamId:"recv-stream-"+e.id,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:n};return r.rtx&&r.rtx.ssrc&&(o.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,o),Promise.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getReceivers().find(function(e){var t=e.track;return!!t&&t.id===o.trackId});if(!e)throw new Error("remote track not found");return e.track})}},{key:"removeConsumer",value:function(e){var t=this;S.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind);var r=this._consumerInfos.get(e.id);return r?(r.closed=!0,Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):Promise.reject(new Error("Consumer not found"))}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){S.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=l.default.parse(e),r=_.extractDtlsParameters(t),n={dtlsParameters:r};this.safeEmit("@needupdatetransport",n),this._transportUpdated=!0}}]),t}(E),R=function(){function e(t,r,n){i(this,e),S.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:g.getSendingRtpParameters("audio",r),video:g.getSendingRtpParameters("video",r)},new T(o,n);case"recv":return o={audio:g.getReceivingFullRtpParameters("audio",r),video:g.getReceivingFullRtpParameters("video",r)},new C(o,n)}}return c(e,null,[{key:"getNativeRtpCapabilities",value:function(){S.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),t=document.createElement("canvas");t.getContext("2d");var r=t.captureStream(),n=r.getVideoTracks()[0];return e.addTrack(n,r).setParameters({encodings:[{rid:"RID1",maxBitrate:4e4},{rid:"RID2",maxBitrate:1e4}]}),e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(r){try{t.remove()}catch(e){}try{e.close()}catch(e){}var n=l.default.parse(r.sdp);return _.extractRtpCapabilities(n)}).catch(function(r){try{t.remove()}catch(e){}try{e.close()}catch(e){}throw r})}},{key:"tag",get:function(){return"Firefox50"}}]),e}();r.default=R},{"../EnhancedEventEmitter":178,"../Logger":179,"../ortc":199,"../utils":200,"./sdp/RemoteUnifiedPlanSdp":194,"./sdp/commonUtils":195,"./sdp/unifiedPlanUtils":197,"sdp-transform":255}],189:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("sdp-transform"),l=o(u),d=e("../Logger"),f=o(d),p=e("../EnhancedEventEmitter"),h=o(p),m=e("../utils"),v=n(m),y=e("../ortc"),g=n(y),b=e("./sdp/commonUtils"),_=n(b),w=e("./sdp/unifiedPlanUtils"),k=n(w),P=e("./sdp/RemoteUnifiedPlanSdp"),x=o(P),S=new f.default("Firefox59"),E=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,S));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new x.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return s(t,e),c(t,[{key:"close",value:function(){S.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(h.default),T=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"send",e,r));return n._transportReady=!1,n._stream=new MediaStream,n._nextRid=1,n}return s(t,e),c(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(S.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._stream.getTrackById(r.id))return Promise.reject(new Error("track already added"));var n=void 0,o=void 0;return Promise.resolve().then(function(){t._stream.addTrack(r),n=t._pc.addTrack(r,t._stream)}).then(function(){if(e.simulcast){S.debug("addProducer() | enabling simulcast");var r=[];return e.simulcast.high&&r.push({rid:"high"+t._nextRid,active:!0,priority:"high",maxBitrate:e.simulcast.high}),e.simulcast.medium&&r.push({rid:"medium"+t._nextRid,active:!0,priority:"medium",maxBitrate:e.simulcast.medium}),e.simulcast.low&&r.push({rid:"low"+t._nextRid,active:!0,priority:"low",maxBitrate:e.simulcast.low}),t._nextRid++,n.setParameters({encodings:r})}}).then(function(){return t._pc.createOffer()}).then(function(e){return S.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){o=l.default.parse(t._pc.localDescription.sdp);var e=t._remoteSdp.createAnswerSdp(o),r={type:"answer",sdp:e};return S.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){var n=v.clone(t._rtpParametersByKind[e.kind]);return k.fillRtpParametersForTrack(n,o,r),n}).catch(function(e){try{t._pc.removeTrack(n)}catch(e){}throw t._stream.removeTrack(r),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return S.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),Promise.resolve().then(function(){var e=t._pc.getSenders().find(function(e){return e.track===r});if(!e)throw new Error("RTCRtpSender found");return t._pc.removeTrack(e),t._stream.removeTrack(r),Promise.resolve().then(function(){return t._pc.createOffer()}).then(function(e){return S.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)})}).then(function(){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;S.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id);var n=e.track;return Promise.resolve().then(function(){var e=r._pc.getSenders().find(function(e){return e.track===n});if(!e)throw new Error("local track not found");return e.replaceTrack(t)}).then(function(){r._stream.removeTrack(n),r._stream.addTrack(t)})}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){
return S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=l.default.parse(r),o=_.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(E),C=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"recv",e,r));return n._transportCreated=!1,n._transportUpdated=!1,n._consumerInfos=new Map,n}return s(t,e),c(t,[{key:"addConsumer",value:function(e){var t=this;if(S.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return Promise.reject(new Error("Consumer already added"));var r=e.rtpParameters.encodings[0],n=e.rtpParameters.rtcp.cname,o={mid:""+e.kind[0]+e.id,kind:e.kind,closed:e.closed,streamId:"recv-stream-"+e.id,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:n};return r.rtx&&r.rtx.ssrc&&(o.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,o),Promise.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getTransceivers().find(function(e){var t=e.receiver;return!!t&&(!!t.track&&e.mid===o.mid)});if(!e)throw new Error("remote track not found");return e.receiver.track})}},{key:"removeConsumer",value:function(e){var t=this;S.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind);var r=this._consumerInfos.get(e.id);return r?(r.closed=!0,Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):Promise.reject(new Error("Consumer not found"))}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){S.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=l.default.parse(e),r=_.extractDtlsParameters(t),n={dtlsParameters:r};this.safeEmit("@needupdatetransport",n),this._transportUpdated=!0}}]),t}(E),R=function(){function e(t,r,n){i(this,e),S.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:g.getSendingRtpParameters("audio",r),video:g.getSendingRtpParameters("video",r)},new T(o,n);case"recv":return o={audio:g.getReceivingFullRtpParameters("audio",r),video:g.getReceivingFullRtpParameters("video",r)},new C(o,n)}}return c(e,null,[{key:"getNativeRtpCapabilities",value:function(){S.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),t=document.createElement("canvas");t.getContext("2d");var r=t.captureStream(),n=r.getVideoTracks()[0];return e.addTrack(n,r).setParameters({encodings:[{rid:"RID1",maxBitrate:4e4},{rid:"RID2",maxBitrate:1e4}]}),e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(r){try{t.remove()}catch(e){}try{e.close()}catch(e){}var n=l.default.parse(r.sdp);return _.extractRtpCapabilities(n)}).catch(function(r){try{t.remove()}catch(e){}try{e.close()}catch(e){}throw r})}},{key:"tag",get:function(){return"Firefox59"}}]),e}();r.default=R},{"../EnhancedEventEmitter":178,"../Logger":179,"../ortc":199,"../utils":200,"./sdp/RemoteUnifiedPlanSdp":194,"./sdp/commonUtils":195,"./sdp/unifiedPlanUtils":197,"sdp-transform":255}],190:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("sdp-transform"),l=o(u),d=e("../Logger"),f=o(d),p=e("../EnhancedEventEmitter"),h=o(p),m=e("../utils"),v=n(m),y=e("../ortc"),g=n(y),b=e("./sdp/commonUtils"),_=n(b),w=e("./sdp/planBUtils"),k=n(w),P=e("./sdp/RemotePlanBSdp"),x=o(P),S=new f.default("ReactNative"),E=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,S));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new x.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return s(t,e),c(t,[{key:"close",value:function(){S.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(h.default),T=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"send",e,r));return n._transportReady=!1,n._tracks=new Set,n}return s(t,e),c(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(S.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._tracks.has(r))return Promise.reject(new Error("track already added"));if(!r.streamReactTag)return Promise.reject(new Error("no track.streamReactTag property"));var n=void 0,o=void 0;return Promise.resolve().then(function(){return t._tracks.add(r),n=new MediaStream(r.streamReactTag),n.addTrack(r),t._pc.addStream(n),t._pc.createOffer()}).then(function(n){if(e.simulcast){S.debug("addProducer() | enabling simulcast");var o=l.default.parse(n.sdp);k.addSimulcastForTrack(o,r);n={type:"offer",sdp:l.default.write(o)}}S.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",n);var i=new RTCSessionDescription(n);return t._pc.setLocalDescription(i)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){o=l.default.parse(t._pc.localDescription.sdp);var e=t._remoteSdp.createAnswerSdp(o),r={type:"answer",sdp:e};S.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",r);var n=new RTCSessionDescription(r);return t._pc.setRemoteDescription(n)}).then(function(){var n=v.clone(t._rtpParametersByKind[e.kind]);return k.fillRtpParametersForTrack(n,o,r),n}).catch(function(e){throw t._tracks.delete(r),n.removeTrack(r),t._pc.addStream(n),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return S.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),r.streamReactTag?Promise.resolve().then(function(){t._tracks.delete(r);var e=new MediaStream(r.streamReactTag);return e.addTrack(r),t._pc.addStream(e),t._pc.createOffer()}).then(function(e){return S.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).catch(function(e){if(0===t._tracks.size)return void S.warn("removeProducer() | ignoring expected error due no sending tracks: %s",e.toString());throw e}).then(function(){if("stable"!==t._pc.signalingState){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};S.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",n);var o=new RTCSessionDescription(n);return t._pc.setRemoteDescription(o)}}):Promise.reject(new Error("no track.streamReactTag property"))}},{key:"replaceProducerTrack",value:function(e,t){var r=this;if(S.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id),!t.streamReactTag)return Promise.reject(new Error("no track.streamReactTag property"));var n=e.track,o=void 0,i=void 0;return Promise.resolve().then(function(){return r._tracks.add(t),r._tracks.delete(n),o=new MediaStream(t.streamReactTag),o.addTrack(t),o.removeTrack(n),r._pc.addStream(o),r._pc.createOffer()}).then(function(n){if(e.simulcast){S.debug("addProducer() | enabling simulcast");var o=l.default.parse(n.sdp);k.addSimulcastForTrack(o,t);n={type:"offer",sdp:l.default.write(o)}}S.debug("replaceProducerTrack() | calling pc.setLocalDescription() [offer:%o]",n);var i=new RTCSessionDescription(n);return r._pc.setLocalDescription(i)}).then(function(){i=l.default.parse(r._pc.localDescription.sdp);var e=r._remoteSdp.createAnswerSdp(i),t={type:"answer",sdp:e};S.debug("replaceProducerTrack() | calling pc.setRemoteDescription() [answer:%o]",t);var n=new RTCSessionDescription(t);return r._pc.setRemoteDescription(n)}).then(function(){var n=v.clone(r._rtpParametersByKind[e.kind]);k.fillRtpParametersForTrack(n,i,t),r.safeEmit("@needupdateproducer",e,n)}).catch(function(e){throw r._tracks.delete(t),o.removeTrack(t),r._pc.addStream(o),e})}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n);var o=new RTCSessionDescription(n);return t._pc.setRemoteDescription(o)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=l.default.parse(r),o=_.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(E),C=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"recv",e,r));return n._transportCreated=!1,n._transportUpdated=!1,n._kinds=new Set,n._consumerInfos=new Map,n}return s(t,e),c(t,[{key:"addConsumer",value:function(e){var t=this;if(S.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return Promise.reject(new Error("Consumer already added"));var r=e.rtpParameters.encodings[0],n=e.rtpParameters.rtcp.cname,o={kind:e.kind,streamId:"recv-stream-"+e.id,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:n};return r.rtx&&r.rtx.ssrc&&(o.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,o),this._kinds.add(e.kind),Promise.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};S.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",r);var n=new RTCSessionDescription(r);return t._pc.setRemoteDescription(n)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getRemoteStreams().find(function(e){return e.id===o.streamId}),r=e.getTrackById(o.trackId);if(r.streamReactTag=e.reactTag,!r)throw new Error("remote track not found");return r})}},{key:"removeConsumer",value:function(e){var t=this;return S.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id)?(this._consumerInfos.delete(e.id),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};S.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",r);var n=new RTCSessionDescription(r);return t._pc.setRemoteDescription(n)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):Promise.reject(new Error("Consumer not found"))}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r);var n=new RTCSessionDescription(r);return t._pc.setRemoteDescription(n)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){S.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=l.default.parse(e),r=_.extractDtlsParameters(t),n={dtlsParameters:r};this.safeEmit("@needupdatetransport",n),this._transportUpdated=!0}}]),t}(E),R=function(){function e(t,r,n){i(this,e),S.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:g.getSendingRtpParameters("audio",r),video:g.getSendingRtpParameters("video",r)},new T(o,n);case"recv":return o={audio:g.getReceivingFullRtpParameters("audio",r),video:g.getReceivingFullRtpParameters("video",r)},new C(o,n)}}return c(e,null,[{key:"getNativeRtpCapabilities",value:function(){S.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});return e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(t){try{e.close()}catch(e){}var r=l.default.parse(t.sdp);return _.extractRtpCapabilities(r)}).catch(function(t){try{e.close()}catch(e){}throw t})}},{key:"tag",get:function(){return"ReactNative"}}]),e}();r.default=R},{"../EnhancedEventEmitter":178,"../Logger":179,"../ortc":199,"../utils":200,"./sdp/RemotePlanBSdp":193,"./sdp/commonUtils":195,"./sdp/planBUtils":196,"sdp-transform":255}],191:[function(e,t,r){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=e("sdp-transform"),l=o(u),d=e("../Logger"),f=o(d),p=e("../EnhancedEventEmitter"),h=o(p),m=e("../utils"),v=n(m),y=e("../ortc"),g=n(y),b=e("./sdp/commonUtils"),_=n(b),w=e("./sdp/planBUtils"),k=n(w),P=e("./sdp/RemotePlanBSdp"),x=o(P),S=new f.default("Safari11"),E=function(e){function t(e,r,n){i(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,S));return o._pc=new RTCPeerConnection({iceServers:n.turnServers||[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),o._rtpParametersByKind=r,o._remoteSdp=new x.default(e,r),o._pc.addEventListener("iceconnectionstatechange",function(){switch(o._pc.iceConnectionState){case"checking":o.emit("@connectionstatechange","connecting");break;case"connected":case"completed":o.emit("@connectionstatechange","connected");break;case"failed":o.emit("@connectionstatechange","failed");break;case"disconnected":o.emit("@connectionstatechange","disconnected");break;case"closed":o.emit("@connectionstatechange","closed")}}),o}return s(t,e),c(t,[{key:"close",value:function(){S.debug("close()");try{this._pc.close()}catch(e){}}}]),t}(h.default),T=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"send",e,r));return n._transportReady=!1,n._stream=new MediaStream,n}return s(t,e),c(t,[{key:"addProducer",value:function(e){var t=this,r=e.track;if(S.debug("addProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),this._stream.getTrackById(r.id))return Promise.reject(new Error("track already added"));var n=void 0,o=void 0;return Promise.resolve().then(function(){return t._stream.addTrack(r),n=t._pc.addTrack(r,t._stream),t._pc.createOffer()}).then(function(e){return S.debug("addProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportReady)return t._setupTransport()}).then(function(){o=l.default.parse(t._pc.localDescription.sdp);var e=t._remoteSdp.createAnswerSdp(o),r={type:"answer",sdp:e};return S.debug("addProducer() | calling pc.setRemoteDescription() [answer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){var n=v.clone(t._rtpParametersByKind[e.kind]);return k.fillRtpParametersForTrack(n,o,r),n}).catch(function(e){try{t._pc.removeTrack(n)}catch(e){}throw t._stream.removeTrack(r),e})}},{key:"removeProducer",value:function(e){var t=this,r=e.track;return S.debug("removeProducer() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,r.id),Promise.resolve().then(function(){var e=t._pc.getSenders().find(function(e){return e.track===r});if(!e)throw new Error("RTCRtpSender found");return t._pc.removeTrack(e),t._stream.removeTrack(r),t._pc.createOffer()}).then(function(e){return S.debug("removeProducer() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).catch(function(e){if(0===t._stream.getTracks().length)return void S.warn("removeLocalTrack() | ignoring expected error due no sending tracks: %s",e.toString());throw e}).then(function(){if("stable"!==t._pc.signalingState){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("removeProducer() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)}})}},{key:"replaceProducerTrack",value:function(e,t){var r=this;S.debug("replaceProducerTrack() [id:%s, kind:%s, trackId:%s]",e.id,e.kind,t.id);var n=e.track;return Promise.resolve().then(function(){var e=r._pc.getSenders().find(function(e){return e.track===n});if(!e)throw new Error("local track not found");return e.replaceTrack(t)}).then(function(){r._stream.removeTrack(n),r._stream.addTrack(t)})}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){return t._pc.createOffer({iceRestart:!0})}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){var e=l.default.parse(t._pc.localDescription.sdp),r=t._remoteSdp.createAnswerSdp(e),n={type:"answer",sdp:r};return S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",n),t._pc.setRemoteDescription(n)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){var t={},r=e._pc.localDescription.sdp,n=l.default.parse(r),o=_.extractDtlsParameters(n);return o.role="server",t.dtlsParameters=o,e._remoteSdp.setTransportLocalParameters(t),e.safeEmitAsPromise("@needcreatetransport",t)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportReady=!0})}}]),t}(E),C=function(e){function t(e,r){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"recv",e,r));return n._transportCreated=!1,n._transportUpdated=!1,n._kinds=new Set,n._consumerInfos=new Map,n}return s(t,e),c(t,[{key:"addConsumer",value:function(e){var t=this;if(S.debug("addConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id))return Promise.reject(new Error("Consumer already added"));var r=e.rtpParameters.encodings[0],n=e.rtpParameters.rtcp.cname,o={kind:e.kind,streamId:"recv-stream-"+e.id,trackId:"consumer-"+e.kind+"-"+e.id,ssrc:r.ssrc,cname:n};return r.rtx&&r.rtx.ssrc&&(o.rtxSsrc=r.rtx.ssrc),this._consumerInfos.set(e.id,o),this._kinds.add(e.kind),Promise.resolve().then(function(){if(!t._transportCreated)return t._setupTransport()}).then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("addConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("addConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)}).then(function(){if(!t._transportUpdated)return t._updateTransport()}).then(function(){var e=t._pc.getReceivers().find(function(e){var t=e.track;return!!t&&t.id===o.trackId});if(!e)throw new Error("remote track not found");return e.track})}},{key:"removeConsumer",value:function(e){var t=this;return S.debug("removeConsumer() [id:%s, kind:%s]",e.id,e.kind),this._consumerInfos.has(e.id)?(this._consumerInfos.delete(e.id),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("removeConsumer() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("removeConsumer() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})):Promise.reject(new Error("Consumer not found"))}},{key:"restartIce",value:function(e){var t=this;return S.debug("restartIce()"),this._remoteSdp.updateTransportRemoteIceParameters(e),Promise.resolve().then(function(){var e=t._remoteSdp.createOfferSdp(Array.from(t._kinds),Array.from(t._consumerInfos.values())),r={type:"offer",sdp:e};return S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",r),t._pc.setRemoteDescription(r)}).then(function(){return t._pc.createAnswer()}).then(function(e){return S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",e),t._pc.setLocalDescription(e)})}},{key:"_setupTransport",value:function(){var e=this;return S.debug("_setupTransport()"),Promise.resolve().then(function(){return e.safeEmitAsPromise("@needcreatetransport",null)}).then(function(t){e._remoteSdp.setTransportRemoteParameters(t),e._transportCreated=!0})}},{key:"_updateTransport",value:function(){S.debug("_updateTransport()");var e=this._pc.localDescription.sdp,t=l.default.parse(e),r=_.extractDtlsParameters(t),n={dtlsParameters:r};this.safeEmit("@needupdatetransport",n),this._transportUpdated=!0}}]),t}(E),R=function(){function e(t,r,n){i(this,e),S.debug("constructor() [direction:%s, extendedRtpCapabilities:%o]",t,r);var o=void 0;switch(t){case"send":return o={audio:g.getSendingRtpParameters("audio",r),video:g.getSendingRtpParameters("video",r)},new T(o,n);case"recv":return o={audio:g.getReceivingFullRtpParameters("audio",r),video:g.getReceivingFullRtpParameters("video",r)},new C(o,n)}}return c(e,null,[{key:"getNativeRtpCapabilities",value:function(){S.debug("getNativeRtpCapabilities()");var e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});return e.addTransceiver("audio"),e.addTransceiver("video"),e.createOffer().then(function(t){try{e.close()}catch(e){}var r=l.default.parse(t.sdp);return _.extractRtpCapabilities(r)}).catch(function(t){try{e.close()}catch(e){}throw t})}},{key:"tag",get:function(){return"Safari11"}}]),e}();r.default=R},{"../EnhancedEventEmitter":178,"../Logger":179,"../ortc":199,"../utils":200,"./sdp/RemotePlanBSdp":193,"./sdp/commonUtils":195,"./sdp/planBUtils":196,"sdp-transform":255}],192:[function(e,t,r){"use strict";function n(){var e=RTCRtpReceiver.getCapabilities(),t=a.clone(e),r=!0,n=!1,o=void 0;try{for(var i,s=t.codecs[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;if(c.channels=c.numChannels,delete c.numChannels,"audio"!==c.kind?delete c.channels:c.channels||(c.channels=1),c.mimeType=c.kind+"/"+c.name,c.parameters){var u=c.parameters;u.apt&&(u.apt=Number(u.apt)),u["packetization-mode"]&&(u["packetization-mode"]=Number(u["packetization-mode"]))}var l=!0,d=!1,f=void 0;try{for(var p,h=(c.rtcpFeedback||[])[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var m=p.value;m.parameter||delete m.parameter}}catch(e){d=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return t}function o(e){var t=a.clone(e),r=!0,n=!1,o=void 0;try{for(var i,s=t.codecs[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;c.channels&&(c.numChannels=c.channels,delete c.channels),delete c.mimeType}}catch(e){n=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(n)throw o}}return t}Object.defineProperty(r,"__esModule",{value:!0}),r.getCapabilities=n,r.mangleRtpParameters=o;var i=e("../../utils"),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i)},{"../../utils":200}],193:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("sdp-transform"),u=n(c),l=e("../../Logger"),d=n(l),f=e("../../utils"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(f),h=new d.default("RemotePlanBSdp"),m=function(){function e(t){a(this,e),this._rtpParametersByKind=t,this._transportLocalParameters=null,this._transportRemoteParameters=null,this._sdpGlobalFields={id:p.randomNumber(),version:0}}return s(e,[{key:"setTransportLocalParameters",value:function(e){h.debug("setTransportLocalParameters() [transportLocalParameters:%o]",e),this._transportLocalParameters=e}},{key:"setTransportRemoteParameters",value:function(e){h.debug("setTransportRemoteParameters() [transportRemoteParameters:%o]",e),this._transportRemoteParameters=e}},{key:"updateTransportRemoteIceParameters",value:function(e){h.debug("updateTransportRemoteIceParameters() [remoteIceParameters:%o]",e),this._transportRemoteParameters.iceParameters=e}}]),e}(),v=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"createAnswerSdp",value:function(e){if(h.debug("createAnswerSdp()"),!this._transportLocalParameters)throw new Error("no transport local parameters");if(!this._transportRemoteParameters)throw new Error("no transport remote parameters");var t=this._transportRemoteParameters.iceParameters,r=this._transportRemoteParameters.iceCandidates,n=this._transportRemoteParameters.dtlsParameters,o={},i=(e.media||[]).map(function(e){return e.mid});this._sdpGlobalFields.version++,o.version=0,o.origin={address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"mediasoup-client"},o.name="-",o.timing={start:0,stop:0},o.icelite=t.iceLite?"ice-lite":null,o.msidSemantic={semantic:"WMS",token:"*"},o.groups=[{type:"BUNDLE",mids:i.join(" ")}],o.media=[];var a=n.fingerprints.length;o.fingerprint={type:n.fingerprints[a-1].algorithm,hash:n.fingerprints[a-1].value};var s=!0,c=!1,l=void 0;try{for(var d,f=(e.media||[])[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value,m=p.type,v=this._rtpParametersByKind[m].codecs,y=this._rtpParametersByKind[m].headerExtensions,g={};g.type=p.type,g.port=7,g.protocol="RTP/SAVPF",g.connection={ip:"127.0.0.1",version:4},g.mid=p.mid,g.iceUfrag=t.usernameFragment,g.icePwd=t.password,g.candidates=[];var b=!0,_=!1,w=void 0;try{for(var k,P=r[Symbol.iterator]();!(b=(k=P.next()).done);b=!0){var x=k.value,S={};S.component=1,S.foundation=x.foundation,S.ip=x.ip,S.port=x.port,S.priority=x.priority,S.transport=x.protocol,S.type=x.type,x.tcpType&&(S.tcptype=x.tcpType),g.candidates.push(S)}}catch(e){_=!0,w=e}finally{try{!b&&P.return&&P.return()}finally{if(_)throw w}}
switch(g.endOfCandidates="end-of-candidates",g.iceOptions="renomination",n.role){case"client":g.setup="active";break;case"server":g.setup="passive"}switch(p.direction){case"sendrecv":case"sendonly":g.direction="recvonly";break;case"recvonly":case"inactive":g.direction="inactive"}"video"===m&&(g.xGoogleFlag="conference"),g.rtp=[],g.rtcpFb=[],g.fmtp=[];var E=!0,T=!1,C=void 0;try{for(var R,j=v[Symbol.iterator]();!(E=(R=j.next()).done);E=!0){var O=R.value,A={payload:O.payloadType,codec:O.name,rate:O.clockRate};if(O.channels>1&&(A.encoding=O.channels),g.rtp.push(A),O.parameters){var D={payload:O.payloadType,config:""},I=!0,M=!1,N=void 0;try{for(var L,F=Object.keys(O.parameters)[Symbol.iterator]();!(I=(L=F.next()).done);I=!0){var U=L.value;D.config&&(D.config+=";"),D.config+=U+"="+O.parameters[U]}}catch(e){M=!0,N=e}finally{try{!I&&F.return&&F.return()}finally{if(M)throw N}}D.config&&g.fmtp.push(D)}if(O.rtcpFeedback){var B=!0,q=!1,W=void 0;try{for(var H,z=O.rtcpFeedback[Symbol.iterator]();!(B=(H=z.next()).done);B=!0){var G=H.value;g.rtcpFb.push({payload:O.payloadType,type:G.type,subtype:G.parameter||""})}}catch(e){q=!0,W=e}finally{try{!B&&z.return&&z.return()}finally{if(q)throw W}}}}}catch(e){T=!0,C=e}finally{try{!E&&j.return&&j.return()}finally{if(T)throw C}}g.payloads=v.map(function(e){return e.payloadType}).join(" "),g.ext=[];var V=!0,Y=!1,K=void 0;try{for(var $,X=y[Symbol.iterator]();!(V=($=X.next()).done);V=!0){var J=$.value;(function(e){if(!(p.ext||[]).find(function(t){return t.uri===e.uri}))return"continue";g.ext.push({uri:e.uri,value:e.id})})(J)}}catch(e){Y=!0,K=e}finally{try{!V&&X.return&&X.return()}finally{if(Y)throw K}}g.rtcpMux="rtcp-mux",g.rtcpRsize="rtcp-rsize",o.media.push(g)}}catch(e){c=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(c)throw l}}return u.default.write(o)}}]),t}(m),y=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"createOfferSdp",value:function(e,t){var r=this;if(h.debug("createOfferSdp()"),!this._transportRemoteParameters)throw new Error("no transport remote parameters");var n=this._transportRemoteParameters.iceParameters,o=this._transportRemoteParameters.iceCandidates,i=this._transportRemoteParameters.dtlsParameters,a={},s=e;this._sdpGlobalFields.version++,a.version=0,a.origin={address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"mediasoup-client"},a.name="-",a.timing={start:0,stop:0},a.icelite=n.iceLite?"ice-lite":null,a.msidSemantic={semantic:"WMS",token:"*"},a.groups=[{type:"BUNDLE",mids:s.join(" ")}],a.media=[];var c=i.fingerprints.length;a.fingerprint={type:i.fingerprints[c-1].algorithm,hash:i.fingerprints[c-1].value};var l=!0,d=!1,f=void 0;try{for(var p,m=e[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var v=p.value;!function(e){var i=r._rtpParametersByKind[e].codecs,s=r._rtpParametersByKind[e].headerExtensions,c={};c.type=e,c.port=7,c.protocol="RTP/SAVPF",c.connection={ip:"127.0.0.1",version:4},c.mid=e,c.iceUfrag=n.usernameFragment,c.icePwd=n.password,c.candidates=[];var u=!0,l=!1,d=void 0;try{for(var f,p=o[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value,m={};m.component=1,m.foundation=h.foundation,m.ip=h.ip,m.port=h.port,m.priority=h.priority,m.transport=h.protocol,m.type=h.type,h.tcpType&&(m.tcptype=h.tcpType),c.candidates.push(m)}}catch(e){l=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw d}}c.endOfCandidates="end-of-candidates",c.iceOptions="renomination",c.setup="actpass",t.some(function(t){return t.kind===e})?c.direction="sendonly":c.direction="inactive",c.rtp=[],c.rtcpFb=[],c.fmtp=[];var v=!0,y=!1,g=void 0;try{for(var b,_=i[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var w=b.value,k={payload:w.payloadType,codec:w.name,rate:w.clockRate};if(w.channels>1&&(k.encoding=w.channels),c.rtp.push(k),w.parameters){var P={payload:w.payloadType,config:""},x=!0,S=!1,E=void 0;try{for(var T,C=Object.keys(w.parameters)[Symbol.iterator]();!(x=(T=C.next()).done);x=!0){var R=T.value;P.config&&(P.config+=";"),P.config+=R+"="+w.parameters[R]}}catch(e){S=!0,E=e}finally{try{!x&&C.return&&C.return()}finally{if(S)throw E}}P.config&&c.fmtp.push(P)}if(w.rtcpFeedback){var j=!0,O=!1,A=void 0;try{for(var D,I=w.rtcpFeedback[Symbol.iterator]();!(j=(D=I.next()).done);j=!0){var M=D.value;c.rtcpFb.push({payload:w.payloadType,type:M.type,subtype:M.parameter||""})}}catch(e){O=!0,A=e}finally{try{!j&&I.return&&I.return()}finally{if(O)throw A}}}}}catch(e){y=!0,g=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw g}}c.payloads=i.map(function(e){return e.payloadType}).join(" "),c.ext=[];var N=!0,L=!1,F=void 0;try{for(var U,B=s[Symbol.iterator]();!(N=(U=B.next()).done);N=!0){var q=U.value;c.ext.push({uri:q.uri,value:q.id})}}catch(e){L=!0,F=e}finally{try{!N&&B.return&&B.return()}finally{if(L)throw F}}c.rtcpMux="rtcp-mux",c.rtcpRsize="rtcp-rsize",c.ssrcs=[],c.ssrcGroups=[];var W=!0,H=!1,z=void 0;try{for(var G,V=t[Symbol.iterator]();!(W=(G=V.next()).done);W=!0){var Y=G.value;Y.kind===e&&(c.ssrcs.push({id:Y.ssrc,attribute:"msid",value:Y.streamId+" "+Y.trackId}),c.ssrcs.push({id:Y.ssrc,attribute:"mslabel",value:Y.streamId}),c.ssrcs.push({id:Y.ssrc,attribute:"label",value:Y.trackId}),c.ssrcs.push({id:Y.ssrc,attribute:"cname",value:Y.cname}),Y.rtxSsrc&&(c.ssrcs.push({id:Y.rtxSsrc,attribute:"msid",value:Y.streamId+" "+Y.trackId}),c.ssrcs.push({id:Y.rtxSsrc,attribute:"mslabel",value:Y.streamId}),c.ssrcs.push({id:Y.rtxSsrc,attribute:"label",value:Y.trackId}),c.ssrcs.push({id:Y.rtxSsrc,attribute:"cname",value:Y.cname}),c.ssrcGroups.push({semantics:"FID",ssrcs:Y.ssrc+" "+Y.rtxSsrc})))}}catch(e){H=!0,z=e}finally{try{!W&&V.return&&V.return()}finally{if(H)throw z}}a.media.push(c)}(v)}}catch(e){d=!0,f=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw f}}return u.default.write(a)}}]),t}(m),g=function e(t,r){switch(a(this,e),h.debug("constructor() [direction:%s, rtpParametersByKind:%o]",t,r),t){case"send":return new v(r);case"recv":return new y(r)}};r.default=g},{"../../Logger":179,"../../utils":200,"sdp-transform":255}],194:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("sdp-transform"),u=n(c),l=e("../../Logger"),d=n(l),f=e("../../utils"),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(f),h=new d.default("RemoteUnifiedPlanSdp"),m=function(){function e(t){a(this,e),this._rtpParametersByKind=t,this._transportLocalParameters=null,this._transportRemoteParameters=null,this._sdpGlobalFields={id:p.randomNumber(),version:0}}return s(e,[{key:"setTransportLocalParameters",value:function(e){h.debug("setTransportLocalParameters() [transportLocalParameters:%o]",e),this._transportLocalParameters=e}},{key:"setTransportRemoteParameters",value:function(e){h.debug("setTransportRemoteParameters() [transportRemoteParameters:%o]",e),this._transportRemoteParameters=e}},{key:"updateTransportRemoteIceParameters",value:function(e){h.debug("updateTransportRemoteIceParameters() [remoteIceParameters:%o]",e),this._transportRemoteParameters.iceParameters=e}}]),e}(),v=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"createAnswerSdp",value:function(e){if(h.debug("createAnswerSdp()"),!this._transportLocalParameters)throw new Error("no transport local parameters");if(!this._transportRemoteParameters)throw new Error("no transport remote parameters");var t=this._transportRemoteParameters.iceParameters,r=this._transportRemoteParameters.iceCandidates,n=this._transportRemoteParameters.dtlsParameters,o={},i=(e.media||[]).filter(function(e){return e.mid}).map(function(e){return e.mid});this._sdpGlobalFields.version++,o.version=0,o.origin={address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"mediasoup-client"},o.name="-",o.timing={start:0,stop:0},o.icelite=t.iceLite?"ice-lite":null,o.msidSemantic={semantic:"WMS",token:"*"},i.length>0&&(o.groups=[{type:"BUNDLE",mids:i.join(" ")}]),o.media=[];var a=n.fingerprints.length;o.fingerprint={type:n.fingerprints[a-1].algorithm,hash:n.fingerprints[a-1].value};var s=!0,c=!1,l=void 0;try{for(var d,f=(e.media||[])[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value,m="inactive"===p.direction,v=p.type,y=this._rtpParametersByKind[v].codecs,g=this._rtpParametersByKind[v].headerExtensions,b={};b.type=p.type,b.port=7,b.protocol="RTP/SAVPF",b.connection={ip:"127.0.0.1",version:4},b.mid=p.mid,b.iceUfrag=t.usernameFragment,b.icePwd=t.password,b.candidates=[];var _=!0,w=!1,k=void 0;try{for(var P,x=r[Symbol.iterator]();!(_=(P=x.next()).done);_=!0){var S=P.value,E={};E.component=1,E.foundation=S.foundation,E.ip=S.ip,E.port=S.port,E.priority=S.priority,E.transport=S.protocol,E.type=S.type,S.tcpType&&(E.tcptype=S.tcpType),b.candidates.push(E)}}catch(e){w=!0,k=e}finally{try{!_&&x.return&&x.return()}finally{if(w)throw k}}switch(b.endOfCandidates="end-of-candidates",b.iceOptions="renomination",n.role){case"client":b.setup="active";break;case"server":b.setup="passive"}switch(p.direction){case"sendrecv":case"sendonly":b.direction="recvonly";break;case"recvonly":case"inactive":b.direction="inactive"}b.rtp=[],b.rtcpFb=[],b.fmtp=[];var T=!0,C=!1,R=void 0;try{for(var j,O=y[Symbol.iterator]();!(T=(j=O.next()).done);T=!0){var A=j.value,D={payload:A.payloadType,codec:A.name,rate:A.clockRate};if(A.channels>1&&(D.encoding=A.channels),b.rtp.push(D),A.parameters){var I={payload:A.payloadType,config:""},M=!0,N=!1,L=void 0;try{for(var F,U=Object.keys(A.parameters)[Symbol.iterator]();!(M=(F=U.next()).done);M=!0){var B=F.value;I.config&&(I.config+=";"),I.config+=B+"="+A.parameters[B]}}catch(e){N=!0,L=e}finally{try{!M&&U.return&&U.return()}finally{if(N)throw L}}I.config&&b.fmtp.push(I)}if(A.rtcpFeedback){var q=!0,W=!1,H=void 0;try{for(var z,G=A.rtcpFeedback[Symbol.iterator]();!(q=(z=G.next()).done);q=!0){var V=z.value;b.rtcpFb.push({payload:A.payloadType,type:V.type,subtype:V.parameter||""})}}catch(e){W=!0,H=e}finally{try{!q&&G.return&&G.return()}finally{if(W)throw H}}}}}catch(e){C=!0,R=e}finally{try{!T&&O.return&&O.return()}finally{if(C)throw R}}if(b.payloads=y.map(function(e){return e.payloadType}).join(" "),!m){b.ext=[];var Y=!0,K=!1,$=void 0;try{for(var X,J=g[Symbol.iterator]();!(Y=(X=J.next()).done);Y=!0){var Q=X.value;(function(e){if(!(p.ext||[]).find(function(t){return t.uri===e.uri}))return"continue";b.ext.push({uri:e.uri,value:e.id})})(Q)}}catch(e){K=!0,$=e}finally{try{!Y&&J.return&&J.return()}finally{if(K)throw $}}}if(p.simulcast_03){b.simulcast_03={value:p.simulcast_03.value.replace(/send/g,"recv")},b.rids=[];var Z=!0,ee=!1,te=void 0;try{for(var re,ne=(p.rids||[])[Symbol.iterator]();!(Z=(re=ne.next()).done);Z=!0){var oe=re.value;"send"===oe.direction&&b.rids.push({id:oe.id,direction:"recv"})}}catch(e){ee=!0,te=e}finally{try{!Z&&ne.return&&ne.return()}finally{if(ee)throw te}}}b.rtcpMux="rtcp-mux",b.rtcpRsize="rtcp-rsize",o.media.push(b)}}catch(e){c=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(c)throw l}}return u.default.write(o)}}]),t}(m),y=function(e){function t(e){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),s(t,[{key:"createOfferSdp",value:function(e){if(h.debug("createOfferSdp()"),!this._transportRemoteParameters)throw new Error("no transport remote parameters");var t=this._transportRemoteParameters.iceParameters,r=this._transportRemoteParameters.iceCandidates,n=this._transportRemoteParameters.dtlsParameters,o={},i=e.map(function(e){return e.mid});this._sdpGlobalFields.version++,o.version=0,o.origin={address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:this._sdpGlobalFields.id,sessionVersion:this._sdpGlobalFields.version,username:"mediasoup-client"},o.name="-",o.timing={start:0,stop:0},o.icelite=t.iceLite?"ice-lite":null,o.msidSemantic={semantic:"WMS",token:"*"},i.length>0&&(o.groups=[{type:"BUNDLE",mids:i.join(" ")}]),o.media=[];var a=n.fingerprints.length;o.fingerprint={type:n.fingerprints[a-1].algorithm,hash:n.fingerprints[a-1].value};var s=!0,c=!1,l=void 0;try{for(var d,f=e[Symbol.iterator]();!(s=(d=f.next()).done);s=!0){var p=d.value,m=p.closed,v=p.kind,y=void 0,g=void 0;"application"!==p.kind&&(y=this._rtpParametersByKind[v].codecs,g=this._rtpParametersByKind[v].headerExtensions);var b={};"application"!==p.kind?(b.type=v,b.port=7,b.protocol="RTP/SAVPF",b.connection={ip:"127.0.0.1",version:4},b.mid=p.mid,b.msid=p.streamId+" "+p.trackId):(b.type=v,b.port=9,b.protocol="DTLS/SCTP",b.connection={ip:"127.0.0.1",version:4},b.mid=p.mid),b.iceUfrag=t.usernameFragment,b.icePwd=t.password,b.candidates=[];var _=!0,w=!1,k=void 0;try{for(var P,x=r[Symbol.iterator]();!(_=(P=x.next()).done);_=!0){var S=P.value,E={};E.component=1,E.foundation=S.foundation,E.ip=S.ip,E.port=S.port,E.priority=S.priority,E.transport=S.protocol,E.type=S.type,S.tcpType&&(E.tcptype=S.tcpType),b.candidates.push(E)}}catch(e){w=!0,k=e}finally{try{!_&&x.return&&x.return()}finally{if(w)throw k}}if(b.endOfCandidates="end-of-candidates",b.iceOptions="renomination",b.setup="actpass","application"!==p.kind){b.direction=m?"inactive":"sendonly",b.rtp=[],b.rtcpFb=[],b.fmtp=[];var T=!0,C=!1,R=void 0;try{for(var j,O=y[Symbol.iterator]();!(T=(j=O.next()).done);T=!0){var A=j.value,D={payload:A.payloadType,codec:A.name,rate:A.clockRate};if(A.channels>1&&(D.encoding=A.channels),b.rtp.push(D),A.parameters){var I={payload:A.payloadType,config:""},M=!0,N=!1,L=void 0;try{for(var F,U=Object.keys(A.parameters)[Symbol.iterator]();!(M=(F=U.next()).done);M=!0){var B=F.value;I.config&&(I.config+=";"),I.config+=B+"="+A.parameters[B]}}catch(e){N=!0,L=e}finally{try{!M&&U.return&&U.return()}finally{if(N)throw L}}I.config&&b.fmtp.push(I)}if(A.rtcpFeedback){var q=!0,W=!1,H=void 0;try{for(var z,G=A.rtcpFeedback[Symbol.iterator]();!(q=(z=G.next()).done);q=!0){var V=z.value;b.rtcpFb.push({payload:A.payloadType,type:V.type,subtype:V.parameter||""})}}catch(e){W=!0,H=e}finally{try{!q&&G.return&&G.return()}finally{if(W)throw H}}}}}catch(e){C=!0,R=e}finally{try{!T&&O.return&&O.return()}finally{if(C)throw R}}if(b.payloads=y.map(function(e){return e.payloadType}).join(" "),!m){b.ext=[];var Y=!0,K=!1,$=void 0;try{for(var X,J=g[Symbol.iterator]();!(Y=(X=J.next()).done);Y=!0){var Q=X.value;b.ext.push({uri:Q.uri,value:Q.id})}}catch(e){K=!0,$=e}finally{try{!Y&&J.return&&J.return()}finally{if(K)throw $}}}b.rtcpMux="rtcp-mux",b.rtcpRsize="rtcp-rsize",m||(b.ssrcs=[],b.ssrcGroups=[],b.ssrcs.push({id:p.ssrc,attribute:"cname",value:p.cname}),p.rtxSsrc&&(b.ssrcs.push({id:p.rtxSsrc,attribute:"cname",value:p.cname}),b.ssrcGroups.push({semantics:"FID",ssrcs:p.ssrc+" "+p.rtxSsrc})))}else b.payloads=5e3,b.sctpmap={app:"webrtc-datachannel",maxMessageSize:256,sctpmapNumber:5e3};o.media.push(b)}}catch(e){c=!0,l=e}finally{try{!s&&f.return&&f.return()}finally{if(c)throw l}}return u.default.write(o)}}]),t}(m),g=function e(t,r){switch(a(this,e),h.debug("constructor() [direction:%s, rtpParametersByKind:%o]",t,r),t){case"send":return new v(r);case"recv":return new y(r)}};r.default=g},{"../../Logger":179,"../../utils":200,"sdp-transform":255}],195:[function(e,t,r){"use strict";function n(e){var t=new Map,r=[],n=!1,o=!1,i=!0,a=!1,c=void 0;try{for(var u,l=e.media[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value,f=d.type;switch(f){case"audio":if(n)continue;n=!0;break;case"video":if(o)continue;o=!0;break;default:continue}var p=!0,h=!1,m=void 0;try{for(var v,y=d.rtp[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var g=v.value,b={name:g.codec,mimeType:f+"/"+g.codec,kind:f,clockRate:g.rate,preferredPayloadType:g.payload,channels:g.encoding,rtcpFeedback:[],parameters:{}};"audio"!==b.kind?delete b.channels:b.channels||(b.channels=1),t.set(b.preferredPayloadType,b)}}catch(e){h=!0,m=e}finally{try{!p&&y.return&&y.return()}finally{if(h)throw m}}var _=!0,w=!1,k=void 0;try{for(var P,x=(d.fmtp||[])[Symbol.iterator]();!(_=(P=x.next()).done);_=!0){var S=P.value,E=s.default.parseFmtpConfig(S.config),b=t.get(S.payload);b&&(b.parameters=E)}}catch(e){w=!0,k=e}finally{try{!_&&x.return&&x.return()}finally{if(w)throw k}}var T=!0,C=!1,R=void 0;try{for(var j,O=(d.rtcpFb||[])[Symbol.iterator]();!(T=(j=O.next()).done);T=!0){var A=j.value,b=t.get(A.payload);if(b){var D={type:A.type,parameter:A.subtype};D.parameter||delete D.parameter,b.rtcpFeedback.push(D)}}}catch(e){C=!0,R=e}finally{try{!T&&O.return&&O.return()}finally{if(C)throw R}}var I=!0,M=!1,N=void 0;try{for(var L,F=(d.ext||[])[Symbol.iterator]();!(I=(L=F.next()).done);I=!0){var U=L.value,B={kind:f,uri:U.uri,preferredId:U.value};r.push(B)}}catch(e){M=!0,N=e}finally{try{!I&&F.return&&F.return()}finally{if(M)throw N}}}}catch(e){a=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(a)throw c}}return{codecs:Array.from(t.values()),headerExtensions:r,fecMechanisms:[]}}function o(e){var t=i(e),r=t.fingerprint||e.fingerprint,n=void 0;switch(t.setup){case"active":n="client";break;case"passive":n="server";break;case"actpass":n="auto"}return{role:n,fingerprints:[{algorithm:r.type,value:r.hash}]}}function i(e){return(e.media||[]).find(function(e){return e.iceUfrag&&0!==e.port})}Object.defineProperty(r,"__esModule",{value:!0}),r.extractRtpCapabilities=n,r.extractDtlsParameters=o;var a=e("sdp-transform"),s=function(e){return e&&e.__esModule?e:{default:e}}(a)},{"sdp-transform":255}],196:[function(e,t,r){"use strict";function n(e,t,r){var n=r.kind,o={cname:null,reducedSize:!0,mux:!0},a=(t.media||[]).find(function(e){return e.type===n});if(!a)throw new Error("m="+n+" section not found");var s=void 0,c=new Set,u=!0,l=!1,d=void 0;try{for(var f,p=(a.ssrcs||[])[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;if("msid"===h.attribute){if(h.value.split(" ")[1]===r.id){var m=h.id;c.add(m),s||(s=m)}}}}catch(e){l=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw d}}if(0===c.size)throw new Error("a=ssrc line not found for local track [track.id:"+r.id+"]");var v=new Map,y=!0,g=!1,b=void 0;try{for(var _,w=(a.ssrcGroups||[])[Symbol.iterator]();!(y=(_=w.next()).done);y=!0){var k=_.value;if("FID"===k.semantics){var P=k.ssrcs.split(/\s+/),x=i(P,2),S=x[0],E=x[1];S=Number(S),E=Number(E),c.has(S)&&(c.delete(S),c.delete(E),v.set(S,E))}}}catch(e){g=!0,b=e}finally{try{!y&&w.return&&w.return()}finally{if(g)throw b}}var T=!0,C=!1,R=void 0;try{for(var j,O=c[Symbol.iterator]();!(T=(j=O.next()).done);T=!0){var S=j.value;v.set(S,null)}}catch(e){C=!0,R=e}finally{try{!T&&O.return&&O.return()}finally{if(C)throw R}}var A=a.ssrcs.find(function(e){return"cname"===e.attribute&&e.id===s});A&&(o.cname=A.value),e.rtcp=o,e.encodings=[];var D=v.size>1,I=["low","medium","high"],M=!0,N=!1,L=void 0;try{for(var F,U=v[Symbol.iterator]();!(M=(F=U.next()).done);M=!0){var B=F.value,q=i(B,2),W=q[0],E=q[1],H={ssrc:W};E&&(H.rtx={ssrc:E}),D&&(H.profile=I.shift()),e.encodings.push(H)}}catch(e){N=!0,L=e}finally{try{!M&&U.return&&U.return()}finally{if(N)throw L}}}function o(e,t){var r=t.kind,n=(e.media||[]).find(function(e){return e.type===r});if(!n)throw new Error("m="+r+" section not found");var o=void 0,i=void 0,a=void 0;if(!(n.ssrcs||[]).find(function(e){return"msid"===e.attribute&&(e.value.split(" ")[1]===t.id?(o=e.id,a=e.value.split(" ")[0],!0):void 0)}))throw new Error("a=ssrc line not found for local track [track.id:"+t.id+"]");(n.ssrcGroups||[]).some(function(e){if("FID"===e.semantics){var t=e.ssrcs.split(/\s+/);return Number(t[0])===o?(i=Number(t[1]),!0):void 0}});var s=n.ssrcs.find(function(e){return"cname"===e.attribute&&e.id===o});if(!s)throw new Error("CNAME line not found for local track [track.id:"+t.id+"]");var c=s.value,u=o+1,l=o+2;if(n.ssrcGroups=n.ssrcGroups||[],n.ssrcGroups.push({semantics:"SIM",ssrcs:o+" "+u+" "+l}),n.ssrcs.push({id:u,attribute:"cname",value:c}),n.ssrcs.push({id:u,attribute:"msid",value:a+" "+t.id}),n.ssrcs.push({id:l,attribute:"cname",value:c}),n.ssrcs.push({id:l,attribute:"msid",value:a+" "+t.id}),i){var d=i+1,f=i+2;n.ssrcGroups.push({semantics:"FID",ssrcs:u+" "+d}),n.ssrcs.push({id:d,attribute:"cname",value:c}),n.ssrcs.push({id:d,attribute:"msid",value:a+" "+t.id}),n.ssrcGroups.push({semantics:"FID",ssrcs:l+" "+f}),n.ssrcs.push({id:f,attribute:"cname",value:c}),n.ssrcs.push({id:f,attribute:"msid",value:a+" "+t.id})}}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();r.fillRtpParametersForTrack=n,r.addSimulcastForTrack=o},{}],197:[function(e,t,r){"use strict";function n(e,t,r){var n=r.kind,o={cname:null,reducedSize:!0,mux:!0},i=(t.media||[]).find(function(e){if(e.type===n){var t=e.msid;if(t){return t.split(" ")[1]===r.id||void 0}}});if(!i)throw new Error("m="+n+" section not found");var a=(i.ssrcs||[]).find(function(e){return"cname"===e.attribute}),s=void 0;a&&(s=a.id,o.cname=a.value);var c=[],u=!0,l=!1,d=void 0;try{for(var f,p=(i.rids||[])[Symbol.iterator]();!(u=(f=p.next()).done);u=!0){var h=f.value;"send"===h.direction&&(/^low/.test(h.id)?c.push({rid:h.id,profile:"low"}):/^medium/.test(h.id)&&c.push({rid:h.id,profile:"medium"}),/^high/.test(h.id)&&c.push({rid:h.id,profile:"high"}))}}catch(e){l=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(l)throw d}}if(e.rtcp=o,e.encodings=[],0===c.length){var m={ssrc:s};e.encodings.push(m)}else{var v=!0,y=!1,g=void 0;try{for(var b,_=c[Symbol.iterator]();!(v=(b=_.next()).done);v=!0){var w=b.value,k={encodingId:w.rid,profile:w.profile};e.encodings.push(k)}}catch(e){y=!0,g=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw g}}}}Object.defineProperty(r,"__esModule",{value:!0}),r.fillRtpParametersForTrack=n},{}],198:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(){return l.default.isSupported()}function i(){return{flag:l.default.getFlag(),name:l.default.getName(),version:l.default.getVersion(),bowser:l.default.getBowser()}}function a(e){return l.default.isSupported()?l.default.Handler.getNativeRtpCapabilities().then(function(t){var r=c.getExtendedRtpCapabilities(t,e);return{audio:c.canSend("audio",r),video:c.canSend("video",r)}}):Promise.reject(new Error("current browser/device not supported"))}Object.defineProperty(r,"__esModule",{value:!0}),r.Room=void 0,r.isDeviceSupported=o,r.getDeviceInfo=i,r.checkCapabilitiesForRoom=a;var s=e("./ortc"),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(s),u=e("./Device"),l=n(u),d=e("./Room"),f=n(d);r.Room=f.default},{"./Device":177,"./Room":182,"./ortc":199}],199:[function(e,t,r){"use strict";function n(e,t){var r={codecs:[],headerExtensions:[],fecMechanisms:[]},n=!0,o=!1,i=void 0;try{for(var a,s=(t.codecs||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;(function(t){if("rtx"===t.name)return"continue";var n=(e.codecs||[]).find(function(e){return l(e,t)});if(n){var o={name:t.name,mimeType:t.mimeType,kind:t.kind,clockRate:t.clockRate,sendPayloadType:n.preferredPayloadType,sendRtxPayloadType:null,recvPayloadType:t.preferredPayloadType,recvRtxPayloadType:null,channels:t.channels,rtcpFeedback:f(n,t),parameters:t.parameters};o.channels||delete o.channels,r.codecs.push(o)}})(c)}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}var u=!0,p=!1,h=void 0;try{for(var m,v=(r.codecs||[])[Symbol.iterator]();!(u=(m=v.next()).done);u=!0){var y=m.value;!function(r){var n=(e.codecs||[]).find(function(e){return"rtx"===e.name&&e.parameters.apt===r.sendPayloadType}),o=(t.codecs||[]).find(function(e){return"rtx"===e.name&&e.parameters.apt===r.recvPayloadType});n&&o&&(r.sendRtxPayloadType=n.preferredPayloadType,r.recvRtxPayloadType=o.preferredPayloadType)}(y)}}catch(e){p=!0,h=e}finally{try{!u&&v.return&&v.return()}finally{if(p)throw h}}var g=!0,b=!1,_=void 0;try{for(var w,k=(t.headerExtensions||[])[Symbol.iterator]();!(g=(w=k.next()).done);g=!0){var P=w.value;!function(t){var n=(e.headerExtensions||[]).find(function(e){return d(e,t)});if(n){var o={kind:t.kind,uri:t.uri,sendId:n.preferredId,recvId:t.preferredId};r.headerExtensions.push(o)}}(P)}}catch(e){b=!0,_=e}finally{try{!g&&k.return&&k.return()}finally{if(b)throw _}}return r}function o(e){var t={codecs:[],headerExtensions:[],fecMechanisms:[]},r=!0,n=!1,o=void 0;try{for(var i,a=e.codecs[Symbol.iterator]();!(r=(i=a.next()).done);r=!0){var s=i.value,c={name:s.name,mimeType:s.mimeType,kind:s.kind,clockRate:s.clockRate,preferredPayloadType:s.recvPayloadType,channels:s.channels,rtcpFeedback:s.rtcpFeedback,parameters:s.parameters};if(c.channels||delete c.channels,t.codecs.push(c),s.recvRtxPayloadType){var u={name:"rtx",mimeType:s.kind+"/rtx",kind:s.kind,clockRate:s.clockRate,preferredPayloadType:s.recvRtxPayloadType,parameters:{apt:s.recvPayloadType}};t.codecs.push(u)}}}catch(e){n=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw o}}var l=!0,d=!1,f=void 0;try{for(var p,h=e.headerExtensions[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var m=p.value,v={kind:m.kind,uri:m.uri,preferredId:m.recvId};t.headerExtensions.push(v)}}catch(e){d=!0,f=e}finally{try{!l&&h.return&&h.return()}finally{if(d)throw f}}return t.fecMechanisms=e.fecMechanisms,t}function i(e,t,r){if(!Array.isArray(t))return[];var n=[],o=e.codecs,i=r.codecs,a=!0,s=!1,c=void 0;try{for(var u,l=t[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var d=u.value;!function(e){if(!i.some(function(t){return t.recvPayloadType===e})){var t=o.find(function(t){return t.preferredPayloadType===e});if(!t)throw new Error("mandatory codec PT "+e+" not found in remote codecs");n.push(t)}}(d)}}catch(e){s=!0,c=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw c}}return n}function a(e,t){return t.codecs.some(function(t){return t.kind===e})}function s(e,t){if(0===e.codecs.length)return!1;var r=e.codecs[0];return t.codecs.some(function(e){return e.recvPayloadType===r.payloadType})}function c(e,t){var r={muxId:null,codecs:[],headerExtensions:[],encodings:[],rtcp:{}},n=!0,o=!1,i=void 0;try{for(var a,s=t.codecs[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;if(c.kind===e){var u={name:c.name,mimeType:c.mimeType,clockRate:c.clockRate,payloadType:c.sendPayloadType,channels:c.channels,rtcpFeedback:c.rtcpFeedback,parameters:c.parameters};if(u.channels||delete u.channels,r.codecs.push(u),c.sendRtxPayloadType){var l={name:"rtx",mimeType:c.kind+"/rtx",clockRate:c.clockRate,payloadType:c.sendRtxPayloadType,parameters:{apt:c.sendPayloadType}};r.codecs.push(l)}break}}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}var d=!0,f=!1,p=void 0;try{for(var h,m=t.headerExtensions[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value;if(!v.kind||v.kind===e){var y={uri:v.uri,id:v.sendId};r.headerExtensions.push(y)}}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}return r}function u(e,t){var r={muxId:null,codecs:[],headerExtensions:[],encodings:[],rtcp:{}},n=!0,o=!1,i=void 0;try{for(var a,s=t.codecs[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;if(c.kind===e){var u={name:c.name,mimeType:c.mimeType,clockRate:c.clockRate,payloadType:c.recvPayloadType,channels:c.channels,rtcpFeedback:c.rtcpFeedback,parameters:c.parameters};if(u.channels||delete u.channels,r.codecs.push(u),c.recvRtxPayloadType){var l={name:"rtx",mimeType:c.kind+"/rtx",clockRate:c.clockRate,payloadType:c.recvRtxPayloadType,parameters:{apt:c.recvPayloadType}};r.codecs.push(l)}}}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}var d=!0,f=!1,p=void 0;try{for(var h,m=t.headerExtensions[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value;if(!v.kind||v.kind===e){var y={uri:v.uri,id:v.recvId};r.headerExtensions.push(y)}}}catch(e){f=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(f)throw p}}return r}function l(e,t){var r=e.mimeType.toLowerCase();if(r!==t.mimeType.toLowerCase())return!1;if(e.clockRate!==t.clockRate)return!1;if(e.channels!==t.channels)return!1;if("video/h264"===r){if(((e.parameters||{})["packetization-mode"]||0)!==((t.parameters||{})["packetization-mode"]||0))return!1}return!0}function d(e,t){return(!e.kind||!t.kind||e.kind===t.kind)&&e.uri===t.uri}function f(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=(e.rtcpFeedback||[])[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var c=a.value;!function(e){var n=(t.rtcpFeedback||[]).find(function(t){return t.type===e.type&&t.parameter===e.parameter});n&&r.push(n)}(c)}}catch(e){o=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(o)throw i}}return r}Object.defineProperty(r,"__esModule",{value:!0}),r.getExtendedRtpCapabilities=n,r.getRtpCapabilities=o,r.getUnsupportedCodecs=i,r.canSend=a,r.canReceive=s,r.getSendingRtpParameters=c,r.getReceivingFullRtpParameters=u},{}],200:[function(e,t,r){"use strict";function n(){return s()}function o(e){return JSON.parse(JSON.stringify(e))}Object.defineProperty(r,"__esModule",{value:!0}),r.randomNumber=n,r.clone=o;var i=e("random-number"),a=function(e){return e&&e.__esModule?e:{default:e}}(i),s=a.default.generator({min:1e7,max:99999999,integer:!0})},{"random-number":217}],201:[function(e,t,r){function n(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*d;case"days":case"day":case"d":return r*l;case"hours":case"hour":case"hrs":case"hr":case"h":return r*u;case"minutes":case"minute":case"mins":case"min":case"m":return r*c;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function o(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=c?Math.round(e/c)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return a(e,l,"day")||a(e,u,"hour")||a(e,c,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,c=60*s,u=60*c,l=24*u,d=365.25*l;t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return n(e);if("number"===r&&!1===isNaN(e))return t.long?i(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],202:[function(t,r,n){(function(t){function n(e){if(!e)throw"MediaStream is mandatory.";this.start=function(r){var n;"undefined"!=typeof MediaRecorder?n=u:(_||b||g)&&(-1!==this.mimeType.indexOf("video")?n=f:-1!==this.mimeType.indexOf("audio")&&(n=l)),"image/gif"===this.mimeType&&(n=h),
"audio/wav"!==this.mimeType&&"audio/pcm"!==this.mimeType||(n=l),this.recorderType&&(n=this.recorderType),t=new n(e),t.blobs=[];var o=this;t.ondataavailable=function(e){t.blobs.push(e),o.ondataavailable(e)},t.onstop=this.onstop,t.onStartedDrawingNonBlankFrames=this.onStartedDrawingNonBlankFrames,t=i(t,this),t.start(r)},this.onStartedDrawingNonBlankFrames=function(){},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.stop=function(){t&&t.stop()},this.ondataavailable=function(e){console.log("ondataavailable..",e)},this.onstop=function(e){console.warn("stopped..",e)},this.save=function(e,r){if(!e){if(!t)return;return void ConcatenateBlobs(t.blobs,t.blobs[0].type,function(e){a(e)})}a(e,r)},this.pause=function(){t&&(t.pause(),console.log("Paused recording.",this.mimeType||t.mimeType))},this.resume=function(){t&&(t.resume(),console.log("Resumed recording.",this.mimeType||t.mimeType))},this.recorderType=null,this.mimeType="video/webm",this.disableLogs=!1;var t}function o(e){if(!e)throw"MediaStream is mandatory.";var t=this,r=c();this.stream=e,this.start=function(c){function u(e){s++,t.ondataavailable(e)}o=new n(e),i=new n(e),o.mimeType="audio/ogg",i.mimeType="video/webm";for(var l in this)"function"!=typeof this[l]&&(o[l]=i[l]=this[l]);o.ondataavailable=function(e){a[s]||(a[s]={}),a[s].audio=e,a[s].video&&!a[s].onDataAvailableEventFired&&(a[s].onDataAvailableEventFired=!0,u(a[s]))},i.ondataavailable=function(e){if(r)return t.ondataavailable({video:e,audio:e});a[s]||(a[s]={}),a[s].video=e,a[s].audio&&!a[s].onDataAvailableEventFired&&(a[s].onDataAvailableEventFired=!0,u(a[s]))},i.onstop=o.onstop=function(e){t.onstop(e)},r?i.start(c):(i.onStartedDrawingNonBlankFrames=function(){i.clearOldRecordedFrames(),o.start(c)},i.start(c))},this.stop=function(){o&&o.stop(),i&&i.stop()},this.ondataavailable=function(e){console.log("ondataavailable..",e)},this.onstop=function(e){console.warn("stopped..",e)},this.pause=function(){o&&o.pause(),i&&i.pause()},this.resume=function(){o&&o.resume(),i&&i.resume()};var o,i,a={},s=0}function i(e,t){for(var r in t)"function"!=typeof t[r]&&(e[r]=t[r]);return e}function a(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var r=(e.type||"video/webm").split("/")[1];if(t&&-1!==t.indexOf(".")){var n=t.split(".");t=n[0],r=n[1]}var o=(t||Math.round(9999999999*Math.random())+888888888)+"."+r;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,o);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,o);var i=document.createElement("a");i.href=y.createObjectURL(e),i.target="_blank",i.download=o,navigator.mozGetUserMedia&&(i.onclick=function(){(document.body||document.documentElement).removeChild(i)},(document.body||document.documentElement).appendChild(i));var a=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});i.dispatchEvent(a),navigator.mozGetUserMedia||y.revokeObjectURL(i.href)}function s(e){var t=["Bytes","KB","MB","GB","TB"];if(0===e)return"0 Bytes";var r=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,r)).toPrecision(3)+" "+t[r]}function c(){var e=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=!!window.chrome&&!e;if(void 0!==window.InstallTrigger)return!0;if(!t)return!1;var r,n,o=(navigator.appVersion,navigator.userAgent),i=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10);return t&&(r=o.indexOf("Chrome"),i=o.substring(r+7)),-1!==(n=i.indexOf(";"))&&(i=i.substring(0,n)),-1!==(n=i.indexOf(" "))&&(i=i.substring(0,n)),a=parseInt(""+i,10),isNaN(a)&&(i=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10)),a>=49}function u(e){function t(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}var r=this;this.start=function(t,o){if(r.mimeType||(r.mimeType="video/webm"),-1!==r.mimeType.indexOf("audio")&&e.getVideoTracks().length&&e.getAudioTracks().length){var i;navigator.mozGetUserMedia?(i=new w,i.addTrack(e.getAudioTracks()[0])):i=new w(e.getAudioTracks()),e=i}-1!==r.mimeType.indexOf("audio")&&(r.mimeType=_?"audio/webm":"audio/ogg"),r.dontFireOnDataAvailableEvent=!1;var a={mimeType:r.mimeType};r.disableLogs||o||console.log("Passing following params over MediaRecorder API.",a),n&&(n=null),_&&!c()&&(a="video/vp8");try{n=new MediaRecorder(e,a)}catch(t){n=new MediaRecorder(e)}"canRecordMimeType"in n&&!1===n.canRecordMimeType(r.mimeType)&&(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",r.mimeType)),n.ignoreMutedMedia=r.ignoreMutedMedia||!1;var s=!1;n.ondataavailable=function(e){if(!r.dontFireOnDataAvailableEvent&&e.data&&e.data.size&&!(e.data.size<26800)&&!s){s=!0;var o=r.getNativeBlob?e.data:new Blob([e.data],{type:r.mimeType||"video/webm"});r.ondataavailable(o),r.dontFireOnDataAvailableEvent=!0,n&&(n.stop(),n=null),r.start(t,"__disableLogs")}},n.onerror=function(e){r.disableLogs||("InvalidState"===e.name?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed."):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute."):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute."):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute."):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),n&&"inactive"!==n.state&&"stopped"!==n.state&&n.stop()};try{n.start(36e5)}catch(e){n=null}setTimeout(function(){n&&"recording"===n.state&&n.requestData()},t)},this.stop=function(e){n&&"recording"===n.state&&(n.requestData(),setTimeout(function(){r.dontFireOnDataAvailableEvent=!0,n&&"recording"===n.state&&n.stop(),n=null},2e3))},this.pause=function(){n&&"recording"===n.state&&n.pause()},this.ondataavailable=function(e){console.log("recorded-blob",e)},this.resume=function(){if(this.dontFireOnDataAvailableEvent){this.dontFireOnDataAvailableEvent=!1;var e=r.disableLogs;return r.disableLogs=!0,this.record(),void(r.disableLogs=e)}n&&"paused"===n.state&&n.resume()},this.clearRecordedData=function(){n&&(this.pause(),this.dontFireOnDataAvailableEvent=!0,this.stop())};var n;!function e(){if(n)return!1===t()?void r.stop():void setTimeout(e,1e3)}()}function l(e){this.start=function(n){n=n||1e3,t=new d(e,this),t.record(),r=setInterval(function(){t.requestData()},n)},this.stop=function(){t&&(t.stop(),clearTimeout(r))},this.pause=function(){t&&t.pause()},this.resume=function(){t&&t.resume()},this.ondataavailable=function(){};var t,r}function d(e,t){function r(e,t){for(var r=e.length+t.length,n=new Float32Array(r),o=0,i=0;i<r;)n[i++]=e[o],n[i++]=t[o],o++;return n}function n(e,t){for(var r=new Float32Array(t),n=0,o=e.length,i=0;i<o;i++){var a=e[i];r.set(a,n),n+=a.length}return r}function o(e,t,r){for(var n=r.length,o=0;o<n;o++)e.setUint8(t+o,r.charCodeAt(o))}function i(e){for(var t=e.length,r=new Int16Array(t);t--;)r[t]=65535*e[t];return r.buffer}var a=44100;k.AudioContextConstructor||(k.AudioContextConstructor=new k.AudioContext),a=k.AudioContextConstructor.sampleRate;var c,u,l,d,f=[],p=[],h=!1,m=0,v=t.sampleRate||a,y=t.mimeType||"audio/wav",g=y.indexOf("audio/pcm")>-1,b=t.audioChannels||2;this.record=function(){h=!0,f.length=p.length=0,m=0},this.requestData=function(){if(!P){if(0===m)return void(w=!1);w=!0;var e=f.slice(0),a=p.slice(0),c=m;f.length=p.length=[],m=0,w=!1;var u=n(e,c),l=u;if(2===b){l=r(u,n(a,c))}if(g){var d=new Blob([i(l)],{type:"audio/pcm"});return console.debug("audio recorded blob size:",s(d.size)),void t.ondataavailable(d)}var h=new ArrayBuffer(44+2*l.length),y=new DataView(h);o(y,0,"RIFF"),y.setUint32(4,44+2*l.length-8,!0),o(y,8,"WAVE"),o(y,12,"fmt "),y.setUint32(16,16,!0),y.setUint16(20,1,!0),y.setUint16(22,b,!0),y.setUint32(24,v,!0),y.setUint32(28,v*b*2,!0),y.setUint16(32,2*b,!0),y.setUint16(34,16,!0),o(y,36,"data"),y.setUint32(40,2*l.length,!0);for(var _=l.length,k=44,x=0;x<_;x++)y.setInt16(k,32767*l[x],!0),k+=2;var d=new Blob([y],{type:"audio/wav"});console.debug("audio recorded blob size:",s(d.size)),t.ondataavailable(d)}},this.stop=function(){h=!1,this.requestData(),l.disconnect()};var d=k.AudioContextConstructor;k.VolumeGainNode=d.createGain();var u=k.VolumeGainNode;k.AudioInput=d.createMediaStreamSource(e);var l=k.AudioInput;l.connect(u);var _=t.bufferSize||2048;if(0===t.bufferSize&&(_=0),d.createJavaScriptNode)c=d.createJavaScriptNode(_,b,b);else{if(!d.createScriptProcessor)throw"WebAudio API has no support on this browser.";c=d.createScriptProcessor(_,b,b)}_=c.bufferSize,console.debug("using audio buffer-size:",_);var w=!1;window.scriptprocessornode=c,1===b&&console.debug("All right-channels are skipped.");var P=!1;this.pause=function(){P=!0},this.resume=function(){P=!1},c.onaudioprocess=function(e){if(h&&!w&&!P){var t=e.inputBuffer.getChannelData(0);if(f.push(new Float32Array(t)),2===b){var r=e.inputBuffer.getChannelData(1);p.push(new Float32Array(r))}m+=_}},u.connect(c),c.connect(d.destination)}function f(e){this.start=function(n){n=n||1e3,t=new p(e,this);for(var o in this)"function"!=typeof this[o]&&(t[o]=this[o]);t.record(),r=setInterval(function(){t.requestData()},n)},this.stop=function(){t&&(t.stop(),clearTimeout(r))},this.clearOldRecordedFrames=function(){t&&t.clearOldRecordedFrames()},this.pause=function(){t&&t.pause()},this.resume=function(){t&&t.resume()},this.ondataavailable=function(){};var t,r}function p(e,t){function r(){if(m)return l=(new Date).getTime(),void setTimeout(r,500);if(!c){if(i)return setTimeout(r,100);var e=(new Date).getTime()-l;if(!e)return r();l=(new Date).getTime(),!h.isHTMLObject&&u.paused&&u.play(),p.drawImage(u,0,0,f.width,f.height),c||d.frames.push({duration:e,image:f.toDataURL("image/webp")}),a||n(d.frames[d.frames.length-1])||(a=!0,t.onStartedDrawingNonBlankFrames()),setTimeout(r,10)}}function n(e,t,r){var n=document.createElement("canvas");n.width=f.width,n.height=f.height;var o,i,a,s=n.getContext("2d"),c={r:0,g:0,b:0},u=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),l=t&&t>=0&&t<=1?t:0,d=r&&r>=0&&r<=1?r:0,p=new Image;p.src=e.image,s.drawImage(p,0,0,f.width,f.height);var h=s.getImageData(0,0,f.width,f.height);o=0,i=h.data.length,a=h.data.length/4;for(var m=0;m<i;m+=4){var v={r:h.data[m],g:h.data[m+1],b:h.data[m+2]};Math.sqrt(Math.pow(v.r-c.r,2)+Math.pow(v.g-c.g,2)+Math.pow(v.b-c.b,2))<=u*l&&o++}return!(a-o<=a*d)}function o(e,t,r,n){var o=document.createElement("canvas");o.width=f.width,o.height=f.height;for(var i=o.getContext("2d"),a=[],s=-1===t,c=t&&t>0&&t<=e.length?t:e.length,u={r:0,g:0,b:0},l=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),d=r&&r>=0&&r<=1?r:0,p=n&&n>=0&&n<=1?n:0,h=!1,m=0;m<c;m++){var v,y,g;if(!h){var b=new Image;b.src=e[m].image,i.drawImage(b,0,0,f.width,f.height);var _=i.getImageData(0,0,f.width,f.height);v=0,y=_.data.length,g=_.data.length/4;for(var w=0;w<y;w+=4){var k={r:_.data[w],g:_.data[w+1],b:_.data[w+2]};Math.sqrt(Math.pow(k.r-u.r,2)+Math.pow(k.g-u.g,2)+Math.pow(k.b-u.b,2))<=l*d&&v++}}!h&&g-v<=g*p||(s&&(h=!0),a.push(e[m]))}return a=a.concat(e.slice(c)),a.length<=0&&a.push(e[e.length-1]),a}this.record=function(n){this.width||(this.width=320),this.height||(this.height=240),this.video&&this.video instanceof HTMLVideoElement&&(this.width||(this.width=u.videoWidth||u.clientWidth||320),this.height||(this.height=u.videoHeight||u.clientHeight||240)),this.video||(this.video={width:this.width,height:this.height}),this.canvas&&this.canvas.width&&this.canvas.height||(this.canvas={width:this.width,height:this.height}),f.width=this.canvas.width,f.height=this.canvas.height,this.video&&this.video instanceof HTMLVideoElement?(this.isHTMLObject=!0,u=this.video.cloneNode()):(u=document.createElement("video"),u.src=y.createObjectURL(e),u.width=this.video.width,u.height=this.video.height),u.muted=!0,u.play(),l=(new Date).getTime(),d=new P.Video(t.speed,t.quality),console.log("canvas resolutions",f.width,"*",f.height),console.log("video width/height",u.width||f.width,"*",u.height||f.height),r()},this.clearOldRecordedFrames=function(){d.frames=[]};var i=!1;this.requestData=function(){if(!m){if(!d.frames.length)return void(i=!1);i=!0;var e=d.frames.slice(0);d.frames=o(e,-1),d.compile(function(e){t.ondataavailable(e),console.debug("video recorded blob size:",s(e.size))}),d.frames=[],i=!1}};var a=!1,c=!1;this.stop=function(){c=!0,this.requestData()};var u,l,d,f=document.createElement("canvas"),p=f.getContext("2d"),h=this,m=!1;this.pause=function(){m=!0},this.resume=function(){m=!1}}function h(e){function t(){c=Date.now();var e=new Blob([new Uint8Array(l.stream().bin)],{type:"image/gif"});n.ondataavailable(e),l.stream().bin=[]}if("undefined"==typeof GIFEncoder)throw"Please link: https://cdn.webrtc-experiment.com/gif-recorder.js";this.start=function(e){function n(e){if(r)return void setTimeout(n,500,e);f=requestAnimationFrame(n),void 0===typeof u&&(u=e),e-u<90||(a.paused&&a.play(),i.drawImage(a,0,0,c,p),l.addFrame(i),u=e)}e=e||1e3;var c=this.videoWidth||320,p=this.videoHeight||240;o.width=a.width=c,o.height=a.height=p,l=new GIFEncoder,l.setRepeat(0),l.setDelay(this.frameRate||this.speed||200),l.setQuality(this.quality||1),l.start(),s=Date.now(),f=requestAnimationFrame(n),d=setTimeout(t,e)},this.stop=function(){f&&(cancelAnimationFrame(f),clearTimeout(d),t())};var r=!1;this.pause=function(){r=!0},this.resume=function(){r=!1},this.ondataavailable=function(){},this.onstop=function(){};var n=this,o=document.createElement("canvas"),i=o.getContext("2d"),a=document.createElement("video");a.muted=!0,a.autoplay=!0,a.src=y.createObjectURL(e),a.play();var s,c,u,l,d,f=null}void 0!==n&&(n.MultiStreamRecorder=o);var m="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";!function(e){"undefined"==typeof window&&("undefined"==typeof window&&void 0!==t&&(t.navigator={userAgent:m,getUserMedia:function(){}},e.window=t),"undefined"==typeof document&&(e.document={},document.createElement=document.captureStream=document.mozCaptureStream=function(){return{}}),"undefined"==typeof location&&(e.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(e.screen={width:0,height:0}))}(void 0!==t?t:window);var v=window.AudioContext;void 0===v&&("undefined"!=typeof webkitAudioContext&&(v=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(v=mozAudioContext)),"undefined"==typeof window&&(window={});var v=window.AudioContext;void 0===v&&("undefined"!=typeof webkitAudioContext&&(v=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(v=mozAudioContext));var y=window.URL;void 0===y&&"undefined"!=typeof webkitURL&&(y=webkitURL),"undefined"!=typeof navigator?(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia)):navigator={getUserMedia:function(){},userAgent:m};var g=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),b=!1;"undefined"!=typeof opera&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("OPR/")&&(b=!0);var _=!g&&!g&&!!navigator.webkitGetUserMedia,w=window.MediaStream;void 0===w&&"undefined"!=typeof webkitMediaStream&&(w=webkitMediaStream),void 0!==w&&("getVideoTracks"in w.prototype||(w.prototype.getVideoTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("video")&&e.push(t)}),e},w.prototype.getAudioTracks=function(){if(!this.getTracks)return[];var e=[];return this.getTracks.forEach(function(t){-1!==t.kind.toString().indexOf("audio")&&e.push(t)}),e}),"stop"in w.prototype||(w.prototype.stop=function(){this.getAudioTracks().forEach(function(e){e.stop&&e.stop()}),this.getVideoTracks().forEach(function(e){e.stop&&e.stop()})})),"undefined"!=typeof location&&0===location.href.indexOf("file:")&&console.error("Please load this HTML file on HTTP or HTTPS.");var k={AudioContext:v},k={AudioContext:window.AudioContext||window.webkitAudioContext};void 0!==n&&(n.MediaRecorderWrapper=u),void 0!==n&&(n.StereoAudioRecorder=l),void 0!==n&&(n.StereoAudioRecorderHelper=d),void 0!==n&&(n.WhammyRecorder=f),void 0!==n&&(n.WhammyRecorderHelper=p),void 0!==n&&(n.GifRecorder=h);var P=function(){function e(e,t){this.frames=[],e||(e=1),this.duration=1e3/e,this.quality=t||.8}function t(e){var t=y.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (e) {"+e.name+"(e.data);}"],{type:"application/javascript"})),r=new Worker(t);return y.revokeObjectURL(t),r}function r(e){function t(e){var t=n(e);if(!t)return[];for(var o=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:f(t.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:t.width,id:176},{data:t.height,id:186}]}]}]}]}],i=0,a=0;i<e.length;){var c=[],u=0;do{c.push(e[i]),u+=e[i].duration,i++}while(i<e.length&&u<3e4);var l={id:524531317,data:r(a,0,c)};o[1].data.push(l),a+=u}return s(o)}function r(e,t,r){return[{data:e,id:231}].concat(r.map(function(e){var r=c({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:r,id:163}}))}function n(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,r=e[0].height,n=e[0].duration,o=1;o<e.length;o++)n+=e[o].duration;return{duration:n,width:t,height:r}}function o(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function i(e){return new Uint8Array(e.split("").map(function(e){return e.charCodeAt(0)}))}function a(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var r=0;r<e.length;r+=8)t.push(parseInt(e.substr(r,8),2));return new Uint8Array(t)}function s(e){for(var t=[],r=0;r<e.length;r++){var n=e[r].data;"object"==typeof n&&(n=s(n)),"number"==typeof n&&(n=a(n.toString(2))),"string"==typeof n&&(n=i(n));var c=n.size||n.byteLength||n.length,u=Math.ceil(Math.ceil(Math.log(c)/Math.log(2))/8),l=c.toString(2),d=new Array(7*u+7+1-l.length).join("0")+l,f=new Array(u).join("0")+"1"+d;t.push(o(e[r].id)),t.push(a(f)),t.push(n)}return new Blob(t,{type:"video/webm"})}function c(e){var t=0;if(e.keyframe&&(t|=128),e.invisible&&(t|=8),e.lacing&&(t|=e.lacing<<1),e.discardable&&(t|=1),e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map(function(e){return String.fromCharCode(e)}).join("")+e.frame}function u(e){for(var t=e.RIFF[0].WEBP[0],r=t.indexOf("*"),n=0,o=[];n<4;n++)o[n]=t.charCodeAt(r+3+n);var i,a,s;return s=o[1]<<8|o[0],i=16383&s,s=o[3]<<8|o[2],a=16383&s,{width:i,height:a,data:t,riff:e}}function l(e,t){return parseInt(e.substr(t+4,4).split("").map(function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t}).join(""),2)}function d(e){for(var t=0,r={};t<e.length;){var n=e.substr(t,4),o=l(e,t),i=e.substr(t+4+4,o);t+=8+o,r[n]=r[n]||[],"RIFF"===n||"LIST"===n?r[n].push(d(i)):r[n].push(i)}return r}function f(e){return[].slice.call(new Uint8Array(new Float64Array([e]).buffer),0).map(function(e){return String.fromCharCode(e)}).reverse().join("")}var p=new t(e.map(function(e){var t=u(d(atob(e.image.slice(23))));return t.duration=e.duration,t}));postMessage(p)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var n=t(r);n.onmessage=function(t){if(t.data.error)return void console.error(t.data.error);e(t.data)},n.postMessage(this.frames)},{Video:e}}();void 0!==n&&(n.Whammy=P),function(){window.ConcatenateBlobs=function(e,t,r){function n(){if(!e[a])return o();var t=new FileReader;t.onload=function(e){i.push(e.target.result),a++,n()},t.readAsArrayBuffer(e[a])}function o(){var e=0;i.forEach(function(t){e+=t.byteLength});var n=new Uint16Array(e),o=0;i.forEach(function(e){var t=e.byteLength;t%2!=0&&(e=e.slice(0,t-1)),n.set(new Uint16Array(e),o),o+=t});var a=new Blob([n.buffer],{type:t});r(a)}var i=[],a=0;n()}}(),void 0!==r&&(r.exports=n),"function"==typeof e&&e.amd&&e("MediaStreamRecorder",[],function(){return n})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],203:[function(e,t,r){(function(e){"use strict";function r(t,r,n,o){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,n)});case 4:return e.nextTick(function(){t.call(null,r,n,o)});default:for(i=new Array(s-1),a=0;a<i.length;)i[a++]=arguments[a];return e.nextTick(function(){t.apply(null,i)})}}!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports=r:t.exports=e.nextTick}).call(this,e("_process"))},{_process:204}],204:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){v&&h&&(v=!1,h.length?m=h.concat(m):y=-1,m.length&&c())}function c(){if(!v){var e=i(s);v=!0;for(var t=m.length;t;){for(h=m,m=[];++y<t;)h&&h[y].run();y=-1,t=m.length}h=null,v=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var d,f,p=t.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var h,m=[],v=!1,y=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new u(e,t)),1!==m.length||v||i(c)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.prependListener=l,p.prependOnceListener=l,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],205:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("./logger")("Message"),s=e("./utils"),c=function(){function e(){n(this,e)}return i(e,null,[{key:"parse",value:function(e){var t=void 0,r={};try{t=JSON.parse(e)}catch(e){return void a.error("parse() | invalid JSON: %s",e)}if("object"!==(void 0===t?"undefined":o(t))||Array.isArray(t))return void a.error("parse() | not an object");if("number"!=typeof t.id)return void a.error("parse() | missing/invalid id field");if(r.id=t.id,t.request){if(r.request=!0,"string"!=typeof t.method)return void a.error("parse() | missing/invalid method field");r.method=t.method,r.data=t.data||{}}else{if(!t.response)return void a.error("parse() | missing request/response field");r.response=!0,t.ok?(r.ok=!0,r.data=t.data||{}):(r.errorCode=t.errorCode,r.errorReason=t.errorReason)}return r}},{key:"requestFactory",value:function(e,t){return{request:!0,id:s.randomNumber(),method:e,data:t||{}}}},{key:"successResponseFactory",value:function(e,t){return{response:!0,id:e.id,ok:!0,data:t||{}}}},{key:"errorResponseFactory",value:function(e,t,r){return{response:!0,id:e.id,errorCode:t,errorReason:r}}}]),e}();t.exports=c},{"./logger":208,"./utils":211}],206:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("events").EventEmitter,c=e("./logger")("Peer"),u=e("./Message"),l=function(e){function t(e){n(this,t),c.debug("constructor()");var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.setMaxListeners(1/0),r._transport=e,r._closed=!1,r._data={},r._requestHandlers=new Map,r._handleTransport(),r}return i(t,e),a(t,[{key:"send",value:function(e,t){var r=this,n=u.requestFactory(e,t);return this._transport.send(n).then(function(){return new Promise(function(e,t){var o={resolve:function(t){r._requestHandlers.delete(n.id)&&(clearTimeout(o.timer),e(t))},reject:function(e){r._requestHandlers.delete(n.id)&&(clearTimeout(o.timer),t(e))},timer:setTimeout(function(){r._requestHandlers.delete(n.id)&&t(new Error("request timeout"))},2e4),close:function(){clearTimeout(o.timer),t(new Error("peer closed"))}};r._requestHandlers.set(n.id,o)})})}},{key:"close",value:function(){c.debug("close()"),this._closed||(this._closed=!0,this._transport.close(),this._requestHandlers.forEach(function(e){return e.close()}),this.emit("close"))}},{key:"_handleTransport",value:function(){var e=this;if(this._transport.closed)return this._closed=!0,void setTimeout(function(){return e.emit("close")});this._transport.on("connecting",function(t){e.emit("connecting",t)}),this._transport.on("open",function(){e._closed||e.emit("open")}),this._transport.on("disconnected",function(){e.emit("disconnected")}),this._transport.on("failed",function(t){e.emit("failed",t)}),this._transport.on("close",function(){e._closed||(e._closed=!0,e.emit("close"))}),this._transport.on("message",function(t){t.response?e._handleResponse(t):t.request&&e._handleRequest(t)})}},{key:"_handleResponse",value:function(e){var t=this._requestHandlers.get(e.id);if(!t)return void c.error("received response does not match any sent request");if(e.ok)t.resolve(e.data);else{var r=new Error(e.errorReason);r.code=e.errorCode,t.reject(r)}}},{key:"_handleRequest",value:function(e){var t=this;this.emit("request",e,function(r){var n=u.successResponseFactory(e,r);t._transport.send(n).catch(function(e){c.warn("accept() failed, response could not be sent: %o",e)})},function(r,n){r instanceof Error?(n=r.toString(),r=500):"number"==typeof r&&n instanceof Error&&(n=n.toString());var o=u.errorResponseFactory(e,r,n);t._transport.send(o).catch(function(e){c.warn("reject() failed, response could not be sent: %o",e)})})}},{key:"data",get:function(){return this._data},set:function(e){this._data=e||{}}},{key:"closed",get:function(){return this._closed}}]),t}(s);t.exports=l},{"./Message":205,"./logger":208,events:158}],207:[function(e,t,r){"use strict";var n=e("./Peer"),o=e("./transports");t.exports={Peer:n,WebSocketTransport:o.WebSocketTransport}},{"./Peer":206,"./transports":210}],208:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e("debug"),a="protoo-client",s=function(){function e(t){n(this,e),t?(this._debug=i(a+":"+t),this._warn=i(a+":WARN:"+t),this._error=i(a+":ERROR:"+t)):(this._debug=i(a),this._warn=i(a+":WARN"),this._error=i(a+":ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return o(e,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),e}();t.exports=function(e){return new s(e)}},{debug:156}],209:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=e("events").EventEmitter,c=e("websocket").w3cwebsocket,u=e("retry"),l=e("../logger")("WebSocketTransport"),d=e("../Message"),f={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},p=function(e){function t(e,r){n(this,t),l.debug('constructor() [url:"%s", options:%o]',e,r);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.setMaxListeners(1/0),i._url=e,i._options=r||{},i._ws=null,i._closed=!1,i._setWebSocket(),i}return i(t,e),a(t,[{key:"send",value:function(e){if(this._closed)return Promise.reject(new Error("transport closed"));try{return this._ws.send(JSON.stringify(e)),Promise.resolve()}catch(e){return l.error("send() | error sending message: %o",e),Promise.reject(e)}}},{key:"close",value:function(){if(l.debug("close()"),!this._closed){this._closed=!0,this.emit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(e){l.error("close() | error closing the WebSocket: %o",e)}}}},{key:"_setWebSocket",value:function(){var e=this,t=this._options,r=u.operation(this._options.retry||f),n=!1;r.attempt(function(o){if(e._closed)return void r.stop();l.debug("_setWebSocket() [currentAttempt:%s]",o),
e._ws=new c(e._url,"protoo",t.origin,t.headers,t.requestOptions,t.clientConfig),e.emit("connecting",o),e._ws.onopen=function(){e._closed||(n=!0,e.emit("open"))},e._ws.onclose=function(t){if(!e._closed){if(l.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',t.wasClean,t.code,t.reason),4e3!==t.code){if(n)return r.stop(),e.emit("disconnected"),void e._setWebSocket();if(e.emit("failed",o),r.retry(!0))return}e._closed=!0,e.emit("close")}},e._ws.onerror=function(){e._closed||l.error('WebSocket "error" event')},e._ws.onmessage=function(t){if(!e._closed){var r=d.parse(t.data);if(r)return 0===e.listenerCount("message")?void l.error('no listeners for WebSocket "message" event, ignoring received message'):void e.emit("message",r)}}})}},{key:"closed",get:function(){return this._closed}}]),t}(s);t.exports=p},{"../Message":205,"../logger":208,events:158,retry:250,websocket:270}],210:[function(e,t,r){"use strict";var n=e("./WebSocketTransport");t.exports={WebSocketTransport:n}},{"./WebSocketTransport":209}],211:[function(e,t,r){"use strict";var n=e("random-number"),o=n.generator({min:1e6,max:9999999,integer:!0});t.exports={randomNumber:o}},{"random-number":217}],212:[function(t,r,n){(function(t){!function(o){function i(e){throw new RangeError(I[e])}function a(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function s(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(D,"."),n+a(e.split("."),t).join(".")}function c(e){for(var t,r,n=[],o=0,i=e.length;o<i;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<i?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function u(e){return a(e,function(e){var t="";return e>65535&&(e-=65536,t+=L(e>>>10&1023|55296),e=56320|1023&e),t+=L(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:P}function d(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function f(e,t,r){var n=0;for(e=r?N(e/T):e>>1,e+=N(e/t);e>M*S>>1;n+=P)e=N(e/M);return N(n+(M+1)*e/(e+E))}function p(e){var t,r,n,o,a,s,c,d,p,h,m=[],v=e.length,y=0,g=R,b=C;for(r=e.lastIndexOf(j),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&i("not-basic"),m.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<v;){for(a=y,s=1,c=P;o>=v&&i("invalid-input"),d=l(e.charCodeAt(o++)),(d>=P||d>N((k-y)/s))&&i("overflow"),y+=d*s,p=c<=b?x:c>=b+S?S:c-b,!(d<p);c+=P)h=P-p,s>N(k/h)&&i("overflow"),s*=h;t=m.length+1,b=f(y-a,t,0==a),N(y/t)>k-g&&i("overflow"),g+=N(y/t),y%=t,m.splice(y++,0,g)}return u(m)}function h(e){var t,r,n,o,a,s,u,l,p,h,m,v,y,g,b,_=[];for(e=c(e),v=e.length,t=R,r=0,a=C,s=0;s<v;++s)(m=e[s])<128&&_.push(L(m));for(n=o=_.length,o&&_.push(j);n<v;){for(u=k,s=0;s<v;++s)(m=e[s])>=t&&m<u&&(u=m);for(y=n+1,u-t>N((k-r)/y)&&i("overflow"),r+=(u-t)*y,t=u,s=0;s<v;++s)if(m=e[s],m<t&&++r>k&&i("overflow"),m==t){for(l=r,p=P;h=p<=a?x:p>=a+S?S:p-a,!(l<h);p+=P)b=l-h,g=P-h,_.push(L(d(h+b%g,0))),l=N(b/g);_.push(L(d(l,0))),a=f(r,y,n==o),r=0,++n}++r,++t}return _.join("")}function m(e){return s(e,function(e){return O.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return s(e,function(e){return A.test(e)?"xn--"+h(e):e})}var y="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof r&&r&&!r.nodeType&&r,b="object"==typeof t&&t;b.global!==b&&b.window!==b&&b.self!==b||(o=b);var _,w,k=2147483647,P=36,x=1,S=26,E=38,T=700,C=72,R=128,j="-",O=/^xn--/,A=/[^\x20-\x7E]/,D=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=P-x,N=Math.floor,L=String.fromCharCode;if(_={version:"1.4.1",ucs2:{decode:c,encode:u},decode:p,encode:h,toASCII:v,toUnicode:m},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return _});else if(y&&g)if(r.exports==y)g.exports=_;else for(w in _)_.hasOwnProperty(w)&&(y[w]=_[w]);else o.punycode=_}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],213:[function(t,r,n){(function(t){!function(t){if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof n)r.exports=t();else if("function"==typeof e&&e.amd)e(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else Q=t()}(function(){"use strict";function e(e){return function(){return $.apply(e,arguments)}}function r(e){return e===Object(e)}function n(e){return"[object StopIteration]"===ne(e)||e instanceof G}function o(e,t){if(H&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(ie)){for(var r=[],n=t;n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(e.stack);var o=r.join("\n"+ie+"\n");e.stack=i(o)}}function i(e){for(var t=e.split("\n"),r=[],n=0;n<t.length;++n){var o=t[n];c(o)||a(o)||!o||r.push(o)}return r.join("\n")}function a(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function s(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}function c(e){var t=s(e);if(!t)return!1;var r=t[0],n=t[1];return r===z&&n>=V&&n<=le}function u(){if(H)try{throw new Error}catch(n){var e=n.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=s(t);if(!r)return;return z=r[0],r[1]}}function l(e,t,r){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+r+" instead.",new Error("").stack),e.apply(e,arguments)}}function d(e){return g(e)?e:b(e)?j(e):R(e)}function f(){function e(e){t=e,i.source=e,J(r,function(t,r){K(function(){e.promiseDispatch.apply(e,r)})},void 0),r=void 0,n=void 0}var t,r=[],n=[],o=ee(f.prototype),i=ee(m.prototype);if(i.promiseDispatch=function(e,o,i){var a=X(arguments);r?(r.push(a),"when"===o&&i[1]&&n.push(i[1])):K(function(){t.promiseDispatch.apply(t,a)})},i.valueOf=l(function(){if(r)return i;var e=y(t);return g(e)&&(t=e),e},"valueOf","inspect"),i.inspect=function(){return t?t.inspect():{state:"pending"}},d.longStackSupport&&H)try{throw new Error}catch(e){i.stack=e.stack.substring(e.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(r){t||e(d(r))},o.fulfill=function(r){t||e(R(r))},o.reject=function(r){t||e(C(r))},o.notify=function(e){t||J(n,function(t,r){K(function(){r(e)})},void 0)},o}function p(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=f();try{e(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}return t.promise}function h(e){return p(function(t,r){for(var n=0,o=e.length;n<o;n++)d(e[n]).then(t,r)})}function m(e,t,r){void 0===t&&(t=function(e){return C(new Error("Promise does not support operation: "+e))}),void 0===r&&(r=function(){return{state:"unknown"}});var n=ee(m.prototype);if(n.promiseDispatch=function(r,o,i){var a;try{a=e[o]?e[o].apply(n,i):t.call(n,o,i)}catch(e){a=C(e)}r&&r(a)},n.inspect=r,r){var o=r();"rejected"===o.state&&(n.exception=o.reason),n.valueOf=l(function(){var e=r();return"pending"===e.state||"rejected"===e.state?n:e.value})}return n}function v(e,t,r,n){return d(e).then(t,r,n)}function y(e){if(g(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function g(e){return r(e)&&"function"==typeof e.promiseDispatch&&"function"==typeof e.inspect}function b(e){return r(e)&&"function"==typeof e.then}function _(e){return g(e)&&"pending"===e.inspect().state}function w(e){return!g(e)||"fulfilled"===e.inspect().state}function k(e){return g(e)&&"rejected"===e.inspect().state}function P(){ce||"undefined"==typeof window||window.Touch||!window.console||console.warn("[Q] Unhandled rejection reasons (should be empty):",ae),ce=!0}function x(){for(var e=0;e<ae.length;e++){var t=ae[e];console.warn("Unhandled rejection reason:",t)}}function S(){ae.length=0,se.length=0,ce=!1,ue||(ue=!0,void 0!==t&&t.on&&t.on("exit",x))}function E(e,t){ue&&(se.push(e),t&&void 0!==t.stack?ae.push(t.stack):ae.push("(no stack) "+t),P())}function T(e){if(ue){var t=Q(se,e);-1!==t&&(se.splice(t,1),ae.splice(t,1))}}function C(e){var t=m({when:function(t){return t&&T(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return E(t,e),t}function R(e){return m({when:function(){return e},get:function(t){return e[t]},set:function(t,r){e[t]=r},delete:function(t){delete e[t]},post:function(t,r){return null===t||void 0===t?e.apply(void 0,r):e[t].apply(e,r)},apply:function(t,r){return e.apply(t,r)},keys:function(){return re(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function j(e){var t=f();return K(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(e){t.reject(e)}}),t.promise}function O(e){return m({isDef:function(){}},function(t,r){return L(e,t,r)},function(){return d(e).inspect()})}function A(e,t,r){return d(e).spread(t,r)}function D(e){return function(){function t(e,t){var a;if(oe){try{a=r[e](t)}catch(e){return C(e)}return a.done?a.value:v(a.value,o,i)}try{a=r[e](t)}catch(e){return n(e)?e.value:C(e)}return v(a,o,i)}var r=e.apply(this,arguments),o=t.bind(t,"next"),i=t.bind(t,"throw");return o()}}function I(e){d.done(d.async(e)())}function M(e){throw new G(e)}function N(e){return function(){return A([this,F(arguments)],function(t,r){return e.apply(t,r)})}}function L(e,t,r){return d(e).dispatch(t,r)}function F(e){return v(e,function(e){var t=0,r=f();return J(e,function(n,o,i){var a;g(o)&&"fulfilled"===(a=o.inspect()).state?e[i]=a.value:(++t,v(o,function(n){e[i]=n,0==--t&&r.resolve(e)},r.reject,function(e){r.notify({index:i,value:e})}))},void 0),0===t&&r.resolve(e),r.promise})}function U(e){return v(e,function(e){return e=Z(e,d),v(F(Z(e,function(e){return v(e,Y,Y)})),function(){return e})})}function B(e){return d(e).allSettled()}function q(e,t){return d(e).then(void 0,void 0,t)}function W(e,t){return d(e).nodeify(t)}var H=!1;try{throw new Error}catch(e){H=!!e.stack}var z,G,V=u(),Y=function(){},K=function(){function e(){for(;r.next;){r=r.next;var t=r.task;r.task=void 0;var n=r.domain;n&&(r.domain=void 0,n.enter());try{t()}catch(t){if(a)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}o=!1}var r={task:void 0,next:null},n=r,o=!1,i=void 0,a=!1;if(K=function(e){n=n.next={task:e,domain:a&&t.domain,next:null},o||(o=!0,i())},void 0!==t&&t.nextTick)a=!0,i=function(){t.nextTick(e)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if("undefined"!=typeof MessageChannel){var s=new MessageChannel;s.port1.onmessage=function(){i=c,s.port1.onmessage=e,e()};var c=function(){s.port2.postMessage(0)};i=function(){setTimeout(e,0),c()}}else i=function(){setTimeout(e,0)};return K}(),$=Function.call,X=e(Array.prototype.slice),J=e(Array.prototype.reduce||function(e,t){var r=0,n=this.length;if(1===arguments.length)for(;;){if(r in this){t=this[r++];break}if(++r>=n)throw new TypeError}for(;r<n;r++)r in this&&(t=e(t,this[r],r));return t}),Q=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),Z=e(Array.prototype.map||function(e,t){var r=this,n=[];return J(r,function(o,i,a){n.push(e.call(t,i,a,r))},void 0),n}),ee=Object.create||function(e){function t(){}return t.prototype=e,new t},te=e(Object.prototype.hasOwnProperty),re=Object.keys||function(e){var t=[];for(var r in e)te(e,r)&&t.push(r);return t},ne=e(Object.prototype.toString);G="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var oe;try{new Function("(function* (){ yield 1; })"),oe=!0}catch(e){oe=!1}var ie="From previous event:";d.resolve=d,d.nextTick=K,d.longStackSupport=!1,d.defer=f,f.prototype.makeNodeResolver=function(){var e=this;return function(t,r){t?e.reject(t):arguments.length>2?e.resolve(X(arguments,1)):e.resolve(r)}},d.promise=p,d.passByCopy=function(e){return e},m.prototype.passByCopy=function(){return this},d.join=function(e,t){return d(e).join(t)},m.prototype.join=function(e){return d([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},d.race=h,m.prototype.race=function(){return this.then(d.race)},d.makePromise=m,m.prototype.toString=function(){return"[object Promise]"},m.prototype.then=function(e,t,r){function n(t){try{return"function"==typeof e?e(t):t}catch(e){return C(e)}}function i(e){if("function"==typeof t){o(e,s);try{return t(e)}catch(e){return C(e)}}return C(e)}function a(e){return"function"==typeof r?r(e):e}var s=this,c=f(),u=!1;return K(function(){s.promiseDispatch(function(e){u||(u=!0,c.resolve(n(e)))},"when",[function(e){u||(u=!0,c.resolve(i(e)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(e){var t,r=!1;try{t=a(e)}catch(e){if(r=!0,!d.onerror)throw e;d.onerror(e)}r||c.notify(t)}]),c.promise},d.when=v,m.prototype.thenResolve=function(e){return this.then(function(){return e})},d.thenResolve=function(e,t){return d(e).thenResolve(t)},m.prototype.thenReject=function(e){return this.then(function(){throw e})},d.thenReject=function(e,t){return d(e).thenReject(t)},d.nearer=y,d.isPromise=g,d.isPromiseAlike=b,d.isPending=_,m.prototype.isPending=function(){return"pending"===this.inspect().state},d.isFulfilled=w,m.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},d.isRejected=k,m.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ae=[],se=[],ce=!1,ue=!0;d.resetUnhandledRejections=S,d.getUnhandledReasons=function(){return ae.slice()},d.stopUnhandledRejectionTracking=function(){S(),void 0!==t&&t.on&&t.removeListener("exit",x),ue=!1},S(),d.reject=C,d.fulfill=R,d.master=O,d.spread=A,m.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},d.async=D,d.spawn=I,d.return=M,d.promised=N,d.dispatch=L,m.prototype.dispatch=function(e,t){var r=this,n=f();return K(function(){r.promiseDispatch(n.resolve,e,t)}),n.promise},d.get=function(e,t){return d(e).dispatch("get",[t])},m.prototype.get=function(e){return this.dispatch("get",[e])},d.set=function(e,t,r){return d(e).dispatch("set",[t,r])},m.prototype.set=function(e,t){return this.dispatch("set",[e,t])},d.del=d.delete=function(e,t){return d(e).dispatch("delete",[t])},m.prototype.del=m.prototype.delete=function(e){return this.dispatch("delete",[e])},d.mapply=d.post=function(e,t,r){return d(e).dispatch("post",[t,r])},m.prototype.mapply=m.prototype.post=function(e,t){return this.dispatch("post",[e,t])},d.send=d.mcall=d.invoke=function(e,t){return d(e).dispatch("post",[t,X(arguments,2)])},m.prototype.send=m.prototype.mcall=m.prototype.invoke=function(e){return this.dispatch("post",[e,X(arguments,1)])},d.fapply=function(e,t){return d(e).dispatch("apply",[void 0,t])},m.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},d.try=d.fcall=function(e){return d(e).dispatch("apply",[void 0,X(arguments,1)])},m.prototype.fcall=function(){return this.dispatch("apply",[void 0,X(arguments)])},d.fbind=function(e){var t=d(e),r=X(arguments,1);return function(){return t.dispatch("apply",[this,r.concat(X(arguments))])}},m.prototype.fbind=function(){var e=this,t=X(arguments);return function(){return e.dispatch("apply",[this,t.concat(X(arguments))])}},d.keys=function(e){return d(e).dispatch("keys",[])},m.prototype.keys=function(){return this.dispatch("keys",[])},d.all=F,m.prototype.all=function(){return F(this)},d.allResolved=l(U,"allResolved","allSettled"),m.prototype.allResolved=function(){return U(this)},d.allSettled=B,m.prototype.allSettled=function(){return this.then(function(e){return F(Z(e,function(e){function t(){return e.inspect()}return e=d(e),e.then(t,t)}))})},d.fail=d.catch=function(e,t){return d(e).then(void 0,t)},m.prototype.fail=m.prototype.catch=function(e){return this.then(void 0,e)},d.progress=q,m.prototype.progress=function(e){return this.then(void 0,void 0,e)},d.fin=d.finally=function(e,t){return d(e).finally(t)},m.prototype.fin=m.prototype.finally=function(e){return e=d(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},d.done=function(e,t,r,n){return d(e).done(t,r,n)},m.prototype.done=function(e,r,n){var i=function(e){K(function(){if(o(e,a),!d.onerror)throw e;d.onerror(e)})},a=e||r||n?this.then(e,r,n):this;"object"==typeof t&&t&&t.domain&&(i=t.domain.bind(i)),a.then(void 0,i)},d.timeout=function(e,t,r){return d(e).timeout(t,r)},m.prototype.timeout=function(e,t){var r=f(),n=setTimeout(function(){r.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(n),r.resolve(e)},function(e){clearTimeout(n),r.reject(e)},r.notify),r.promise},d.delay=function(e,t){return void 0===t&&(t=e,e=void 0),d(e).delay(t)},m.prototype.delay=function(e){return this.then(function(t){var r=f();return setTimeout(function(){r.resolve(t)},e),r.promise})},d.nfapply=function(e,t){return d(e).nfapply(t)},m.prototype.nfapply=function(e){var t=f(),r=X(e);return r.push(t.makeNodeResolver()),this.fapply(r).fail(t.reject),t.promise},d.nfcall=function(e){var t=X(arguments,1);return d(e).nfapply(t)},m.prototype.nfcall=function(){var e=X(arguments),t=f();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},d.nfbind=d.denodeify=function(e){var t=X(arguments,1);return function(){var r=t.concat(X(arguments)),n=f();return r.push(n.makeNodeResolver()),d(e).fapply(r).fail(n.reject),n.promise}},m.prototype.nfbind=m.prototype.denodeify=function(){var e=X(arguments);return e.unshift(this),d.denodeify.apply(void 0,e)},d.nbind=function(e,t){var r=X(arguments,2);return function(){function n(){return e.apply(t,arguments)}var o=r.concat(X(arguments)),i=f();return o.push(i.makeNodeResolver()),d(n).fapply(o).fail(i.reject),i.promise}},m.prototype.nbind=function(){var e=X(arguments,0);return e.unshift(this),d.nbind.apply(void 0,e)},d.nmapply=d.npost=function(e,t,r){return d(e).npost(t,r)},m.prototype.nmapply=m.prototype.npost=function(e,t){var r=X(t||[]),n=f();return r.push(n.makeNodeResolver()),this.dispatch("post",[e,r]).fail(n.reject),n.promise},d.nsend=d.nmcall=d.ninvoke=function(e,t){var r=X(arguments,2),n=f();return r.push(n.makeNodeResolver()),d(e).dispatch("post",[t,r]).fail(n.reject),n.promise},m.prototype.nsend=m.prototype.nmcall=m.prototype.ninvoke=function(e){var t=X(arguments,1),r=f();return t.push(r.makeNodeResolver()),this.dispatch("post",[e,t]).fail(r.reject),r.promise},d.nodeify=W,m.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){K(function(){e(null,t)})},function(t){K(function(){e(t)})})};var le=u();return d})}).call(this,t("_process"))},{_process:204}],214:[function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,i){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,f,p,h,m=e[l].replace(s,"%20"),v=m.indexOf(r);v>=0?(d=m.substr(0,v),f=m.substr(v+1)):(d=m,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),n(a,p)?o(a[p])?a[p].push(h):a[p]=[a[p],h]:a[p]=h}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],215:[function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(o(a))+r;return i(e[a])?n(e[a],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[a]))}).join(t):s?encodeURIComponent(o(s))+r+encodeURIComponent(o(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],216:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":214,"./encode":215}],217:[function(e,t,r){!function(e){function r(e){var e=e||{},t=e.min,r=e.max,n=e.integer||!1;if(null==t&&null==r?(t=0,r=1):null==t?t=r-1:null==r&&(r=t+1),r<t)throw new Error("invalid options, max must be >= min");return{min:t,max:r,integer:n}}function n(e){if(e=r(e),e.max===e.min)return e.min;var t=Math.random()*(e.max-e.min+Number(!!e.integer))+e.min;return e.integer?Math.floor(t):t}function o(e){return e=r(e),function(t,r,o){return e.min=null!=t?t:e.min,e.max=null!=r?r:e.max,e.integer=null!=o?o:e.integer,n(e)}}t.exports=n,t.exports.generator=o,t.exports.defaults=r}()},{}],218:[function(e,t,r){"use strict";function n(e){return e||(e={}),{length:e.length||8,numeric:"boolean"!=typeof e.numeric||e.numeric,letters:"boolean"!=typeof e.letters||e.letters,special:"boolean"==typeof e.special&&e.special,exclude:Array.isArray(e.exclude)?e.exclude:[]}}function o(e){var t="";e.numeric&&(t+=i),e.letters&&(t+=a),e.special&&(t+=s);for(var r=0;r<=e.exclude.length;r++)t=t.replace(e.exclude[r],"");return t}var i="0123456789",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",s="!$%^&*()_+|~-=`{}[]:;<>?,./";t.exports=function(e){e=n(e);var t,r,i="",a=e.length,s=(e.exclude,o(e));for(t=1;t<=a;t++)i+=s.substring(r=Math.floor(Math.random()*s.length),r+1);return i}},{}],219:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);u.call(this,e),l.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",o)}function o(){this.allowHalfOpen||this._writableState.ended||a(i,this)}function i(e){e.end()}var a=e("process-nextick-args"),s=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=n;var c=e("core-util-is");c.inherits=e("inherits");var u=e("./_stream_readable"),l=e("./_stream_writable");c.inherits(n,u);for(var d=s(l.prototype),f=0;f<d.length;f++){var p=d[f];n.prototype[p]||(n.prototype[p]=l.prototype[p])}Object.defineProperty(n.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),n.prototype._destroy=function(e,t){this.push(null),this.end(),a(t,e)}},{"./_stream_readable":221,"./_stream_writable":223,"core-util-is":155,inherits:161,"process-nextick-args":203}],220:[function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);o.call(this,e)}t.exports=n;var o=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(n,o),n.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":222,"core-util-is":155,inherits:161}],221:[function(e,t,r){(function(r,n){"use strict";function o(e){return L.from(e)}function i(e){return L.isBuffer(e)||e instanceof F}function a(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?I(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function s(t,r){D=D||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof D&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new H,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(W||(W=e("string_decoder/").StringDecoder),this.decoder=new W(t.encoding),this.encoding=t.encoding)}function c(t){if(D=D||e("./_stream_duplex"),!(this instanceof c))return new c(t);this._readableState=new s(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),N.call(this)}function u(e,t,r,n,i){var a=e._readableState;if(null===t)a.reading=!1,m(e,a);else{var s;i||(s=d(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===L.prototype||(t=o(t)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):l(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?l(e,a,t,!1):g(e,a)):l(e,a,t,!1))):n||(a.reading=!1)}return f(a)}function l(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&v(e)),g(e,t)}function d(e,t){var r;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function p(e){return e>=V?e=V:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function h(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=p(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function m(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,v(e)}}function v(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(q("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?A(y,e):y(e))}function y(e){q("emit readable"),e.emit("readable"),x(e)}function g(e,t){t.readingMore||(t.readingMore=!0,A(b,e,t))}function b(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(q("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function _(e){return function(){var t=e._readableState;q("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&M(e,"data")&&(t.flowing=!0,x(e))}}function w(e){q("readable nexttick read 0"),e.read(0)}function k(e,t){t.resumeScheduled||(t.resumeScheduled=!0,A(P,e,t))}function P(e,t){t.reading||(q("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),x(e),t.flowing&&!t.reading&&e.read(0)}function x(e){var t=e._readableState;for(q("flow",t.flowing);t.flowing&&null!==e.read(););}function S(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=E(e,t.buffer,t.decoder),r}function E(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?T(e,t):C(e,t),n}function T(e,t){var r=t.head,n=1,o=r.data;for(e-=o.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(a===i.length?o+=i:o+=i.slice(0,e),0===(e-=a)){a===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(a));break}++n}return t.length-=n,o}function C(e,t){var r=L.allocUnsafe(e),n=t.head,o=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var i=n.data,a=e>i.length?i.length:e;if(i.copy(r,r.length-e,0,a),0===(e-=a)){a===i.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=i.slice(a));break}++o}return t.length-=o,r}function R(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,A(j,t,e))}function j(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}var A=e("process-nextick-args");t.exports=c;var D,I=e("isarray");c.ReadableState=s;var M=(e("events").EventEmitter,function(e,t){return e.listeners(t).length}),N=e("./internal/streams/stream"),L=e("safe-buffer").Buffer,F=n.Uint8Array||function(){},U=e("core-util-is");U.inherits=e("inherits");var B=e("util"),q=void 0;q=B&&B.debuglog?B.debuglog("stream"):function(){};var W,H=e("./internal/streams/BufferList"),z=e("./internal/streams/destroy");U.inherits(c,N);var G=["error","close","destroy","pause","resume"];Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),c.prototype.destroy=z.destroy,c.prototype._undestroy=z.undestroy,c.prototype._destroy=function(e,t){this.push(null),t(e)},c.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=L.from(e,t),t=""),r=!0),u(this,e,t,!1,r)},c.prototype.unshift=function(e){return u(this,e,null,!0,!1)},c.prototype.isPaused=function(){return!1===this._readableState.flowing},c.prototype.setEncoding=function(t){return W||(W=e("string_decoder/").StringDecoder),this._readableState.decoder=new W(t),this._readableState.encoding=t,this};var V=8388608;c.prototype.read=function(e){q("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return q("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?R(this):v(this),null;if(0===(e=h(e,t))&&t.ended)return 0===t.length&&R(this),null;var n=t.needReadable;q("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,q("length less than watermark",n)),t.ended||t.reading?(n=!1,q("reading or ended",n)):n&&(q("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=h(r,t)));var o;return o=e>0?S(e,t):null,null===o?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&R(this)),null!==o&&this.emit("data",o),o},c.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},c.prototype.pipe=function(e,t){function n(e,t){q("onunpipe"),e===f&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,i())}function o(){q("onend"),e.end()}function i(){q("cleanup"),e.removeListener("close",u),e.removeListener("finish",l),e.removeListener("drain",v),e.removeListener("error",c),e.removeListener("unpipe",n),f.removeListener("end",o),f.removeListener("end",d),f.removeListener("data",s),y=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||v()}function s(t){q("ondata"),g=!1,!1!==e.write(t)||g||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&-1!==O(p.pipes,e))&&!y&&(q("false write response, pause",f._readableState.awaitDrain),f._readableState.awaitDrain++,g=!0),f.pause())}function c(t){q("onerror",t),d(),e.removeListener("error",c),0===M(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",l),d()}function l(){q("onfinish"),e.removeListener("close",u),d()}function d(){q("unpipe"),f.unpipe(e)}var f=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,q("pipe count=%d opts=%j",p.pipesCount,t);var h=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,m=h?o:d;p.endEmitted?A(m):f.once("end",m),e.on("unpipe",n);var v=_(f);e.on("drain",v);var y=!1,g=!1;return f.on("data",s),a(e,"error",c),e.once("close",u),e.once("finish",l),e.emit("pipe",f),p.flowing||(q("pipe resume"),f.resume()),e},c.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1
;for(var i=0;i<o;i++)n[i].emit("unpipe",this,r);return this}var a=O(t.pipes,e);return-1===a?this:(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},c.prototype.on=function(e,t){var r=N.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&v(this):A(w,this))}return r},c.prototype.addListener=c.prototype.on,c.prototype.resume=function(){var e=this._readableState;return e.flowing||(q("resume"),e.flowing=!0,k(this,e)),this},c.prototype.pause=function(){return q("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(q("pause"),this._readableState.flowing=!1,this.emit("pause")),this},c.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(q("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(o){if(q("wrapped data"),t.decoder&&(o=t.decoder.write(o)),(!t.objectMode||null!==o&&void 0!==o)&&(t.objectMode||o&&o.length)){n.push(o)||(r=!0,e.pause())}});for(var o in e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<G.length;i++)e.on(G[i],n.emit.bind(n,G[i]));return n._read=function(t){q("wrapped _read",t),r&&(r=!1,e.resume())},n},c._fromList=S}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":219,"./internal/streams/BufferList":224,"./internal/streams/destroy":225,"./internal/streams/stream":226,_process:204,"core-util-is":155,events:158,inherits:161,isarray:163,"process-nextick-args":203,"safe-buffer":253,"string_decoder/":262,util:54}],222:[function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return o(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function o(e,t,r){var n=e._transformState;n.transforming=!1;var o=n.writecb;if(!o)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),o(t);var i=e._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&e._read(i.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(t)})}function a(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,o=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(o.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),c=e("core-util-is");c.inherits=e("inherits"),c.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var r=this;s.prototype._destroy.call(this,e,function(e){t(e),r.emit("close")})}},{"./_stream_duplex":219,"core-util-is":155,inherits:161}],223:[function(e,t,r){(function(r,n){"use strict";function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){E(t,e)}}function i(e){return D.from(e)}function a(e){return D.isBuffer(e)||e instanceof I}function s(){}function c(t,r){C=C||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,r instanceof C&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){y(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function u(t){if(C=C||e("./_stream_duplex"),!(N.call(u,this)||this instanceof C))return new u(t);this._writableState=new c(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),A.call(this)}function l(e,t){var r=new Error("write after end");e.emit("error",r),T(t,r)}function d(e,t,r,n){var o=!0,i=!1;return null===r?i=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i&&(e.emit("error",i),T(n,i),o=!1),o}function f(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=D.from(t,r)),t}function p(e,t,r,n,o,i){if(!r){var a=f(t,n,o);n!==a&&(r=!0,o="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var c=t.length<t.highWaterMark;if(c||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,s,n,o,i);return c}function h(e,t,r,n,o,i,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function m(e,t,r,n,o){--t.pendingcb,r?(T(o,n),T(x,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(o(n),e._writableState.errorEmitted=!0,e.emit("error",n),x(e,t))}function v(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function y(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if(v(r),t)m(e,r,n,t,o);else{var i=w(r);i||r.corked||r.bufferProcessing||!r.bufferedRequest||_(e,r),n?R(g,e,r,i,o):g(e,r,i,o)}}function g(e,t,r,n){r||b(e,t),t.pendingcb--,n(),x(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function _(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,c=!0;r;)i[s]=r,r.isBuf||(c=!1),r=r.next,s+=1;i.allBuffers=c,h(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t)}else{for(;r;){var u=r.chunk,l=r.encoding,d=r.callback;if(h(e,t,!1,t.objectMode?1:u.length,u,l,d),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function k(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),x(e,t)})}function P(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,T(k,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function x(e,t){var r=w(t);return r&&(P(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}function S(e,t,r){t.ending=!0,x(e,t),r&&(t.finished?T(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function E(e,t,r){var n=e.entry;for(e.entry=null;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}var T=e("process-nextick-args");t.exports=u;var C,R=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:T;u.WritableState=c;var j=e("core-util-is");j.inherits=e("inherits");var O={deprecate:e("util-deprecate")},A=e("./internal/streams/stream"),D=e("safe-buffer").Buffer,I=n.Uint8Array||function(){},M=e("./internal/streams/destroy");j.inherits(u,A),c.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(c.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var N;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(u,Symbol.hasInstance,{value:function(e){return!!N.call(this,e)||e&&e._writableState instanceof c}})):N=function(e){return e instanceof this},u.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},u.prototype.write=function(e,t,r){var n=this._writableState,o=!1,c=a(e)&&!n.objectMode;return c&&!D.isBuffer(e)&&(e=i(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=s),n.ended?l(this,r):(c||d(this,n,e,r))&&(n.pendingcb++,o=p(this,n,c,e,t,r)),o},u.prototype.cork=function(){this._writableState.corked++},u.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||_(this,e))},u.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},u.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},u.prototype._writev=null,u.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||S(this,n,r)},Object.defineProperty(u.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),u.prototype.destroy=M.destroy,u.prototype._undestroy=M.undestroy,u.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_stream_duplex":219,"./internal/streams/destroy":225,"./internal/streams/stream":226,_process:204,"core-util-is":155,inherits:161,"process-nextick-args":203,"safe-buffer":253,"util-deprecate":269}],224:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,r){e.copy(t,r)}var i=e("safe-buffer").Buffer;t.exports=function(){function e(){n(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)o(r.data,t,n),n+=r.data.length,r=r.next;return t},e}()},{"safe-buffer":253}],225:[function(e,t,r){"use strict";function n(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;if(n||o)return void(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||a(i,this,e));this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!t&&e?(a(i,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})}function o(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(e,t){e.emit("error",t)}var a=e("process-nextick-args");t.exports={destroy:n,undestroy:o}},{"process-nextick-args":203}],226:[function(e,t,r){t.exports=e("events").EventEmitter},{events:158}],227:[function(e,t,r){r=t.exports=e("./lib/_stream_readable.js"),r.Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":219,"./lib/_stream_passthrough.js":220,"./lib/_stream_readable.js":221,"./lib/_stream_transform.js":222,"./lib/_stream_writable.js":223}],228:[function(t,r,n){(function(t){!function(t,o){"object"==typeof n&&void 0!==r?o(n):"function"==typeof e&&e.amd?e(["exports"],o):o(t.reduxLogger=t.reduxLogger||{})}(this,function(e){"use strict";function r(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function o(e,t,r){o.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:r,enumerable:!0})}function i(e,t){i.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function a(e,t){a.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function s(e,t,r){s.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:r,enumerable:!0})}function c(e,t,r){var n=e.slice((r||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function u(e){var t=void 0===e?"undefined":j(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function l(e,t,r,n,d,f,p){d=d||[],p=p||[];var h=d.slice(0);if(void 0!==f){if(n){if("function"==typeof n&&n(h,f))return;if("object"===(void 0===n?"undefined":j(n))){if(n.prefilter&&n.prefilter(h,f))return;if(n.normalize){var m=n.normalize(h,f,e,t);m&&(e=m[0],t=m[1])}}}h.push(f)}"regexp"===u(e)&&"regexp"===u(t)&&(e=e.toString(),t=t.toString());var v=void 0===e?"undefined":j(e),y=void 0===t?"undefined":j(t),g="undefined"!==v||p&&p[p.length-1].lhs&&p[p.length-1].lhs.hasOwnProperty(f),b="undefined"!==y||p&&p[p.length-1].rhs&&p[p.length-1].rhs.hasOwnProperty(f);if(!g&&b)r(new i(h,t));else if(!b&&g)r(new a(h,e));else if(u(e)!==u(t))r(new o(h,e,t));else if("date"===u(e)&&e-t!=0)r(new o(h,e,t));else if("object"===v&&null!==e&&null!==t)if(p.filter(function(t){return t.lhs===e}).length)e!==t&&r(new o(h,e,t));else{if(p.push({lhs:e,rhs:t}),Array.isArray(e)){var _;for(e.length,_=0;_<e.length;_++)_>=t.length?r(new s(h,_,new a(void 0,e[_]))):l(e[_],t[_],r,n,h,_,p);for(;_<t.length;)r(new s(h,_,new i(void 0,t[_++])))}else{var w=Object.keys(e),k=Object.keys(t);w.forEach(function(o,i){var a=k.indexOf(o);a>=0?(l(e[o],t[o],r,n,h,o,p),k=c(k,a)):l(e[o],void 0,r,n,h,o,p)}),k.forEach(function(e){l(void 0,t[e],r,n,h,e,p)})}p.length=p.length-1}else e!==t&&("number"===v&&isNaN(e)&&isNaN(t)||r(new o(h,e,t)))}function d(e,t,r,n){return n=n||[],l(e,t,function(e){e&&n.push(e)},r),n.length?n:void 0}function f(e,t,r){if(r.path&&r.path.length){var n,o=e[t],i=r.path.length-1;for(n=0;n<i;n++)o=o[r.path[n]];switch(r.kind){case"A":f(o[r.path[n]],r.index,r.item);break;case"D":delete o[r.path[n]];break;case"E":case"N":o[r.path[n]]=r.rhs}}else switch(r.kind){case"A":f(e[t],r.index,r.item);break;case"D":e=c(e,t);break;case"E":case"N":e[t]=r.rhs}return e}function p(e,t,r){if(e&&t&&r&&r.kind){for(var n=e,o=-1,i=r.path?r.path.length-1:0;++o<i;)void 0===n[r.path[o]]&&(n[r.path[o]]="number"==typeof r.path[o]?[]:{}),n=n[r.path[o]];switch(r.kind){case"A":f(r.path?n[r.path[o]]:n,r.index,r.item);break;case"D":delete n[r.path[o]];break;case"E":case"N":n[r.path[o]]=r.rhs}}}function h(e,t,r){if(r.path&&r.path.length){var n,o=e[t],i=r.path.length-1;for(n=0;n<i;n++)o=o[r.path[n]];switch(r.kind){case"A":h(o[r.path[n]],r.index,r.item);break;case"D":case"E":o[r.path[n]]=r.lhs;break;case"N":delete o[r.path[n]]}}else switch(r.kind){case"A":h(e[t],r.index,r.item);break;case"D":case"E":e[t]=r.lhs;break;case"N":e=c(e,t)}return e}function m(e,t,r){if(e&&t&&r&&r.kind){var n,o,i=e;for(o=r.path.length-1,n=0;n<o;n++)void 0===i[r.path[n]]&&(i[r.path[n]]={}),i=i[r.path[n]];switch(r.kind){case"A":h(i[r.path[n]],r.index,r.item);break;case"D":case"E":i[r.path[n]]=r.lhs;break;case"N":delete i[r.path[n]]}}}function v(e,t,r){if(e&&t){l(e,t,function(n){r&&!r(e,t,n)||p(e,t,n)})}}function y(e){return"color: "+D[e].color+"; font-weight: bold"}function g(e){var t=e.kind,r=e.path,n=e.lhs,o=e.rhs,i=e.index,a=e.item;switch(t){case"E":return[r.join("."),n,"→",o];case"N":return[r.join("."),o];case"D":return[r.join(".")];case"A":return[r.join(".")+"["+i+"]",a];default:return[]}}function b(e,t,r,n){var o=d(e,t);try{n?r.groupCollapsed("diff"):r.group("diff")}catch(e){r.log("diff")}o?o.forEach(function(e){var t=e.kind,n=g(e);r.log.apply(r,["%c "+D[t].text,y(t)].concat(O(n)))}):r.log("—— no diff ——");try{r.groupEnd()}catch(e){r.log("—— diff end —— ")}}function _(e,t,r,n){switch(void 0===e?"undefined":j(e)){case"object":return"function"==typeof e[n]?e[n].apply(e,O(r)):e[n];case"function":return e(t);default:return e}}function w(e){var t=e.timestamp,r=e.duration;return function(e,n,o){var i=["action"];return i.push("%c"+String(e.type)),t&&i.push("%c@ "+n),r&&i.push("%c(in "+o.toFixed(2)+" ms)"),i.join(" ")}}function k(e,t){var r=t.logger,n=t.actionTransformer,o=t.titleFormatter,i=void 0===o?w(t):o,a=t.collapsed,s=t.colors,c=t.level,u=t.diff,l=void 0===t.titleFormatter;e.forEach(function(o,d){var f=o.started,p=o.startedTime,h=o.action,m=o.prevState,v=o.error,y=o.took,g=o.nextState,w=e[d+1];w&&(g=w.prevState,y=w.started-f);var k=n(h),P="function"==typeof a?a(function(){return g},h,o):a,x=C(p),S=s.title?"color: "+s.title(k)+";":"",E=["color: gray; font-weight: lighter;"];E.push(S),t.timestamp&&E.push("color: gray; font-weight: lighter;"),t.duration&&E.push("color: gray; font-weight: lighter;");var T=i(k,x,y);try{P?s.title&&l?r.groupCollapsed.apply(r,["%c "+T].concat(E)):r.groupCollapsed(T):s.title&&l?r.group.apply(r,["%c "+T].concat(E)):r.group(T)}catch(e){r.log(T)}var R=_(c,k,[m],"prevState"),j=_(c,k,[k],"action"),O=_(c,k,[v,m],"error"),A=_(c,k,[g],"nextState");if(R)if(s.prevState){var D="color: "+s.prevState(m)+"; font-weight: bold";r[R]("%c prev state",D,m)}else r[R]("prev state",m);if(j)if(s.action){var I="color: "+s.action(k)+"; font-weight: bold";r[j]("%c action    ",I,k)}else r[j]("action    ",k);if(v&&O)if(s.error){var M="color: "+s.error(v,m)+"; font-weight: bold;";r[O]("%c error     ",M,v)}else r[O]("error     ",v);if(A)if(s.nextState){var N="color: "+s.nextState(g)+"; font-weight: bold";r[A]("%c next state",N,g)}else r[A]("next state",g);u&&b(m,g,r,P);try{r.groupEnd()}catch(e){r.log("—— log end ——")}})}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},I,e),r=t.logger,n=t.stateTransformer,o=t.errorTransformer,i=t.predicate,a=t.logErrors,s=t.diffPredicate;if(void 0===r)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(e){return function(t){return e(t)}}};var c=[];return function(e){var r=e.getState;return function(e){return function(u){if("function"==typeof i&&!i(r,u))return e(u);var l={};c.push(l),l.started=R.now(),l.startedTime=new Date,l.prevState=n(r()),l.action=u;var d=void 0;if(a)try{d=e(u)}catch(e){l.error=o(e)}else d=e(u);l.took=R.now()-l.started,l.nextState=n(r());var f=t.diff&&"function"==typeof s?s(r,u):t.diff;if(k(c,Object.assign({},t,{diff:f})),c.length=0,l.error)throw l.error;return d}}}}var x,S,E=function(e,t){return new Array(t+1).join(e)},T=function(e,t){return E("0",t-e.toString().length)+e},C=function(e){return T(e.getHours(),2)+":"+T(e.getMinutes(),2)+":"+T(e.getSeconds(),2)+"."+T(e.getMilliseconds(),3)},R="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)},A=[];x="object"===(void 0===t?"undefined":j(t))&&t?t:"undefined"!=typeof window?window:{},S=x.DeepDiff,S&&A.push(function(){void 0!==S&&x.DeepDiff===d&&(x.DeepDiff=S,S=void 0)}),r(o,n),r(i,n),r(a,n),r(s,n),Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:l,enumerable:!0},applyDiff:{value:v,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:m,enumerable:!0},isConflict:{value:function(){return void 0!==S},enumerable:!0},noConflict:{value:function(){return A&&(A.forEach(function(e){e()}),A=null),d},enumerable:!0}});var D={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},I={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,r=e.getState;return"function"==typeof t||"function"==typeof r?P()({dispatch:t,getState:r}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=I,e.createLogger=P,e.logger=M,e.default=M,Object.defineProperty(e,"__esModule",{value:!0})})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],229:[function(e,t,r){"use strict";function n(e){return function(t){var r=t.dispatch,n=t.getState;return function(t){return function(o){return"function"==typeof o?o(r,n,e):t(o)}}}}r.__esModule=!0;var o=n();o.withExtraArgument=n,r.default=o},{}],230:[function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(r,n,i){var s=e(r,n,i),c=s.dispatch,u=[],l={getState:s.getState,dispatch:function(e){return c(e)}};return u=t.map(function(e){return e(l)}),c=a.default.apply(void 0,u)(s.dispatch),o({},s,{dispatch:c})}}}r.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};r.default=n;var i=e("./compose"),a=function(e){return e&&e.__esModule?e:{default:e}}(i)},{"./compose":233}],231:[function(e,t,r){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function o(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var r=Object.keys(e),o={},i=0;i<r.length;i++){var a=r[i],s=e[a];"function"==typeof s&&(o[a]=n(s,t))}return o}r.__esModule=!0,r.default=o},{}],232:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){var r=t&&t.type;return"Given action "+(r&&'"'+r.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function i(e){Object.keys(e).forEach(function(t){var r=e[t];if(void 0===r(void 0,{type:s.ActionTypes.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===r(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}function a(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];"function"==typeof e[a]&&(r[a]=e[a])}var s=Object.keys(r),c=void 0;try{i(r)}catch(e){c=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(c)throw c;for(var n=!1,i={},a=0;a<s.length;a++){var u=s[a],l=r[u],d=e[u],f=l(d,t);if(void 0===f){var p=o(u,t);throw new Error(p)}i[u]=f,n=n||f!==d}return n?i:e}}r.__esModule=!0,r.default=a;var s=e("./createStore"),c=e("lodash/isPlainObject"),u=(n(c),e("./utils/warning"));n(u)},{"./createStore":234,"./utils/warning":236,"lodash/isPlainObject":174}],233:[function(e,t,r){"use strict";function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}r.__esModule=!0,r.default=n},{}],234:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){function n(){y===v&&(y=v.slice())}function i(){return m}function s(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return n(),y.push(e),function(){if(t){t=!1,n();var r=y.indexOf(e);y.splice(r,1)}}}function l(e){if(!(0,a.default)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(g)throw new Error("Reducers may not dispatch actions.");try{g=!0,m=h(m,e)}finally{g=!1}for(var t=v=y,r=0;r<t.length;r++){(0,t[r])()}return e}function d(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");h=e,l({type:u.INIT})}function f(){var e,t=s;return e={subscribe:function(e){function r(){e.next&&e.next(i())}if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");return r(),{unsubscribe:t(r)}}},e[c.default]=function(){return this},e}var p;if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(o)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var h=e,m=t,v=[],y=v,g=!1;return l({type:u.INIT}),p={dispatch:l,subscribe:s,getState:i,replaceReducer:d},p[c.default]=f,p}r.__esModule=!0,r.ActionTypes=void 0,r.default=o;var i=e("lodash/isPlainObject"),a=n(i),s=e("symbol-observable"),c=n(s),u=r.ActionTypes={INIT:"@@redux/INIT"}},{"lodash/isPlainObject":174,"symbol-observable":263}],235:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}r.__esModule=!0,r.compose=r.applyMiddleware=r.bindActionCreators=r.combineReducers=r.createStore=void 0;var o=e("./createStore"),i=n(o),a=e("./combineReducers"),s=n(a),c=e("./bindActionCreators"),u=n(c),l=e("./applyMiddleware"),d=n(l),f=e("./compose"),p=n(f),h=e("./utils/warning");n(h);r.createStore=i.default,r.combineReducers=s.default,r.bindActionCreators=u.default,r.applyMiddleware=d.default,r.compose=p.default},{"./applyMiddleware":230,"./bindActionCreators":231,"./combineReducers":232,"./compose":233,"./createStore":234,"./utils/warning":236}],236:[function(e,t,r){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw new Error(e)}catch(e){}}r.__esModule=!0,r.default=n},{}],237:[function(e,t,r){t.exports=e("./lib/requestify")},{"./lib/requestify":247}],238:[function(e,t,r){"use strict";t.exports=function(){var e={};return{get:function(t,r){r(null,e[t])},set:function(t,r,n){e[t]=r,n()},purge:function(t,r){delete e[t],r()}}}},{}],239:[function(e,t,r){"use strict";t.exports=function(e,t){if(!e)throw new Error("Cannot init requestify mongo transporter without mongoose instance");var r=e,t=t||"requestifyresponses",n=new r.Schema({_id:{type:String},response:{type:{code:Number,body:String,headers:Object}}}),o=r.model("RequestifyResponse",n,t);return{get:function(e,t){o.findById(e,function(e,r){if(e)return t(e);t(null,r.response)})},set:function(e,t,r){var n={_id:e,response:t};return o.create(n,r),n},purge:function(e,t){o.findByIdAndRemove(e,t)}}}},{}],240:[function(e,t,r){"use strict";t.exports=function(e){function t(e){return JSON.stringify(e)}function r(e){return JSON.parse(e)}function n(e){return function(t,n){if("OK"===n)return void e();e(t,r(n))}}if(!e)throw new Error("Cannot init requestify redis transporter without redis instance");var o=e;return{get:function(e,t){o.get(e,n(t))},set:function(e,r,i){o.set(e,t(r),n(i))},purge:function(e,t){o.del(e,n(t))}}}},{}],241:[function(e,t,r){var n=e("q"),o=e("./interface-validator"),i=e("./cache-transporters/in-memory-transporter"),a=function(){"use strict";function e(e){return function(t,r){return t?void e.reject(t):r?void e.resolve(r):void e.resolve()}}function t(t,o,i){var a=n.defer();return i?(r[t](o,i,e(a)),
a.promise):(r[t](o,e(a)),a.promise)}var r=i(),a=["get","set","purge"];return{set:function(e,r){return t("set",e,r)},get:function(e){return t("get",e)},purge:function(e){return t("purge",e)},setCacheTransporter:function(e){return o.validate("CacheTransporter",e,a),r=e,this},isTransportAvailable:function(){return null!==r}}}();t.exports=a},{"./cache-transporters/in-memory-transporter":238,"./interface-validator":242,q:213}],242:[function(e,t,r){var n=function(){"use strict";return{validate:function(e,t,r){if(!t)throw new Error(e+" must implement required methods and cannot be null");r.forEach(function(r){if("function"!=typeof t[r])throw new Error(e+" must implement "+r+" method")})}}}();t.exports=n},{}],243:[function(e,t,r){(function(e){"use strict";var r=e.console;t.exports=function(){function e(e,r,n){return"string"!=typeof n&&(n=JSON.stringify(n)),e+r+": "+t+n}var t="[0m";return{error:function(t){r.error(e("[31m","Error",t))},info:function(t){r.info(e("[34m","Info",t))},debug:function(t){r.log(e("[35m","Debug",t))},warning:function(t){r.warn(e("[33m","Warning",t))}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],244:[function(e,t,r){"use strict";t.exports=function(e){if(!e)throw new Error("winston instance must be set.");return{error:function(t){e.error(t)},info:function(t){e.info(t)},debug:function(t){e.debug(t)},warning:function(t){e.warning(t)}}}},{}],245:[function(e,t,r){var n=e("./interface-validator"),o=e("./logger-adapters/console-adapter"),i=function(){"use strict";function e(e,r){t&&t[e](r)}var t=o(),r=["error","info","debug","warning"],i={},a=["error","warning","info","debug"],s=0;return r.forEach(function(t){i[t]=function(r){e(t,r)}}),i.setLogger=function(e){return n.validate("LoggerInterface",e,r),t=e,this},i.logLevel=function(e){if(!e)return s;if(void 0===a[e])throw new Error(e+" is not a valid logging level");return s=e,this},i}();t.exports=i},{"./interface-validator":242,"./logger-adapters/console-adapter":243}],246:[function(e,t,r){(function(r){"use strict";function n(e,t){if(!e)throw new Error("URL must in mandatory to initialize Request object");if(!t.method)throw new Error("Cannot execute HTTP request without specifying method");this.url=e,this.method=t.method,this.body=t.body||{},this.params=t.params||{},this.path=t.path||null,this.headers=t.headers||{},this.dataType=void 0===t.dataType?"json":t.dataType,this.auth=t.auth||{},this.cache=t.cache||{cache:!1,expires:3600},this.timeout=t.timeout||3e4,this.cookies(t.cookies),this.redirect=t.redirect||!1}var o=e("url"),i=e("querystring"),a=e("underscore");n.prototype.getFullUrl=function(){return this.getProtocol()+"//"+this.getHost()+this.getUri()},n.prototype.headerTransformers={"Content-Type":"getContentType",Cookie:"getCookiesHeader","Content-Length":"getContentLength"},n.prototype.getPath=function(){return this.path},n.prototype.supportedDataTypes={json:"application/json","form-url-encoded":"application/x-www-form-urlencoded"},n.prototype.defaultHeaders={"User-Agent":"node/http-request-lib/v0.1",Accept:"*/*"},n.prototype.cookies=function(e){return e?(this.cookiesObj=e,this):this.cookiesObj},n.prototype.getCookiesHeader=function(){var e,t="",r=this.cookies();if(a.isEmpty(r))return null;for(e in r)r.hasOwnProperty(e)&&(t+=e+"="+r[e]+"; ");return t},n.prototype.getUrlParts=function(){if(this.urlParts=o.parse(this.url),null===this.urlParts.host)throw new Error("Url is invalid");return this.urlParts},n.prototype.getProtocol=function(){return this.getUrlParts().protocol},n.prototype.getHost=function(){return this.getUrlParts().hostname},n.prototype.getRedirect=function(){return this.redirect},n.prototype.getUri=function(){var e=this.getUrlParts(),t=a.extend(i.parse(e.query),this.params),r="";return a.isEmpty(t)||(r="?"+i.encode(t)),e.pathname+r},n.prototype.getPort=function(){var e=this.getProtocol(),t=this.getUrlParts().port;return"https:"!==e||t?"http:"!==e||t?this.getUrlParts().port:80:443},n.prototype.getBody=function(){return"GET"===this.method||"HEAD"===this.method?"":"json"===this.dataType?this.getJsonBody():"form-url-encoded"===this.dataType?this.getUrlEncodedBody():this.body},n.prototype.getJsonBody=function(){return JSON.stringify(this.body)},n.prototype.getUrlEncodedBody=function(){return i.encode(this.body)},n.prototype.getHeaders=function(){var e,t,r=this.headers,n=a.clone(this.defaultHeaders),o=this.headerTransformers;for(e in o)o.hasOwnProperty(e)&&(t=this[o[e]]())&&(n[e]=t);return a.extend(n,r),n},n.prototype.getContentLength=function(){return r.byteLength(this.getBody().toString())},n.prototype.getContentType=function(){return a.has(this.supportedDataTypes,this.dataType)?this.supportedDataTypes[this.dataType]:""},n.prototype.getAuthorization=function(){var e=this.auth;return e.username||void 0!==e.password?e.username+":"+e.password:null},t.exports=n}).call(this,e("buffer").Buffer)},{buffer:55,querystring:216,underscore:249,url:267}],247:[function(e,t,r){var n=e("http"),o=e("./request"),i=e("./response"),a=e("q"),s=e("./cache"),c=e("https"),u=e("./logger"),l=e("./cache-transporters/redis-transporter"),d=e("./cache-transporters/in-memory-transporter"),f=e("./cache-transporters/mongo-transporter"),p=function(){"use strict";function t(e){return"https:"===e?c:n}function r(e){return e>=200&&e<300}function p(e,t,r,n,o){o=o||{cache:!1},o.cache&&s.set(e,{code:t,headers:r,body:n,created:(new Date).getTime()})}function h(e,n){var o,a,s,c=t(e.getProtocol());return a={hostname:e.getHost(),path:e.getUri(),port:e.getPort(),method:e.method,auth:e.getAuthorization(),headers:e.getHeaders(),redirect:e.getRedirect()},o=c.request(a,function(t){clearTimeout(s);var o=new i(t.statusCode,t.headers);t.setEncoding(g),t.on("data",function(e){o.setChunk(e)}),t.on("end",function(){return r(o.code)?(p(e.getFullUrl(),o.getCode(),o.getHeaders(),o.body,e.cache),void n.resolve(o)):e.redirect&&m(o.code)?(e.url=o.getHeaders().location,h(e,n)):void n.reject(o)})}),s=setTimeout(function(){o.abort(),n.reject(new i(405,{},"timeout exceeded"))},e.timeout),o.on("error",function(e){n.reject(e)}),o.end(e.getBody()),n.promise}function m(e){return 301===e||302===e||303===e||304===e||307===e}function v(e){function t(t){return t.created+e.cache.expires}var r=a.defer();return s.isTransportAvailable()&&"GET"===e.method&&!1!==e.cache.cache?(s.get(e.getFullUrl()).then(function(n){if(!n||t(n)<=(new Date).getTime())return void h(e,r);r.resolve(new i(n.code,n.headers,n.body))}).fail(function(){h(e,r)}),r.promise):h(e,r)}var y,g="utf8";return y={request:function(e,t){return v(new o(e,t))},responseEncoding:function(e){return e?(g=e,this):g},redis:function(e){e&&this.cacheTransporter(l(e))},coreCacheTransporters:{redis:l,mongo:f,inMemory:d},coreLoggerAdapters:{console:e("./logger-adapters/console-adapter"),winston:e("./logger-adapters/winston-adapter")},cacheTransporter:function(e){e&&s.setCacheTransporter(e)},logAdapter:function(e){e&&u.setLogger(e)},logLevel:function(e){if(isNaN(e))throw new Error("Level must be a number");u.logLevel(e)}},function(e){e.forEach(function(e){y[e]=function(t,r){return r=r||{},r.method=e.toUpperCase(),y.request(t,r)}})}(["get","delete","head"]),function(e){e.forEach(function(e){y[e]=function(t,r,n){return n=n||{},n.method=e.toUpperCase(),n.body=r,y.request(t,n)}})}(["post","put"]),y}();t.exports=p},{"./cache":241,"./cache-transporters/in-memory-transporter":238,"./cache-transporters/mongo-transporter":239,"./cache-transporters/redis-transporter":240,"./logger":245,"./logger-adapters/console-adapter":243,"./logger-adapters/winston-adapter":244,"./request":246,"./response":248,http:258,https:159,q:213}],248:[function(e,t,r){"use strict";function n(e,t,r){this.code=e,this.headers=t,this.body=r||""}var o=(e("url"),e("querystring")),i=e("underscore"),a=e("jquery");n.prototype.setChunk=function(e){return this.body+=e,this},n.prototype.getBody=function(){var e=this.getHeader("content-type");if(!e)return this.body;if(-1!==e.indexOf("application/json")&&i.isString(this.body))try{return JSON.parse(this.body)}catch(e){return console.log("Failed parsing expected JSON response, returned raw response"),this.body}return-1!==e.indexOf("application/x-www-form-urlencoded")?o.parse(this.body):-1!==e.indexOf("xml")?a(this.body):this.body},n.prototype.getCode=function(){return this.code},n.prototype.getHeader=function(e){return e=e||"",this.headers[e]?this.headers[e]:null},n.prototype.getHeaders=function(){return this.headers},t.exports=n},{jquery:164,querystring:216,underscore:249,url:267}],249:[function(t,r,n){(function(){function t(e){function t(t,r,n,o,i,a){for(;i>=0&&i<a;i+=e){var s=o?o[i]:i;n=r(n,t[s],s,t)}return n}return function(r,n,o,i){n=k(n,i,4);var a=!R(r)&&w.keys(r),s=(a||r).length,c=e>0?0:s-1;return arguments.length<3&&(o=r[a?a[c]:c],c+=e),t(r,n,o,a,c,s)}}function o(e){return function(t,r,n){r=P(r,n);for(var o=C(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(r(t[i],i,t))return i;return-1}}function i(e,t,r){return function(n,o,i){var a=0,s=C(n);if("number"==typeof i)e>0?a=i>=0?i:Math.max(i+s,a):s=i>=0?Math.min(i+1,s):i+s+1;else if(r&&i&&s)return i=r(n,o),n[i]===o?i:-1;if(o!==o)return i=t(p.call(n,a,s),w.isNaN),i>=0?i+a:-1;for(i=e>0?a:s-1;i>=0&&i<s;i+=e)if(n[i]===o)return i;return-1}}function a(e,t){var r=I.length,n=e.constructor,o=w.isFunction(n)&&n.prototype||l,i="constructor";for(w.has(e,i)&&!w.contains(t,i)&&t.push(i);r--;)(i=I[r])in e&&e[i]!==o[i]&&!w.contains(t,i)&&t.push(i)}var s=this,c=s._,u=Array.prototype,l=Object.prototype,d=Function.prototype,f=u.push,p=u.slice,h=l.toString,m=l.hasOwnProperty,v=Array.isArray,y=Object.keys,g=d.bind,b=Object.create,_=function(){},w=function(e){return e instanceof w?e:this instanceof w?void(this._wrapped=e):new w(e)};void 0!==n?(void 0!==r&&r.exports&&(n=r.exports=w),n._=w):s._=w,w.VERSION="1.8.3";var k=function(e,t,r){if(void 0===t)return e;switch(null==r?3:r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)};case 4:return function(r,n,o,i){return e.call(t,r,n,o,i)}}return function(){return e.apply(t,arguments)}},P=function(e,t,r){return null==e?w.identity:w.isFunction(e)?k(e,t,r):w.isObject(e)?w.matcher(e):w.property(e)};w.iteratee=function(e,t){return P(e,t,1/0)};var x=function(e,t){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var o=1;o<n;o++)for(var i=arguments[o],a=e(i),s=a.length,c=0;c<s;c++){var u=a[c];t&&void 0!==r[u]||(r[u]=i[u])}return r}},S=function(e){if(!w.isObject(e))return{};if(b)return b(e);_.prototype=e;var t=new _;return _.prototype=null,t},E=function(e){return function(t){return null==t?void 0:t[e]}},T=Math.pow(2,53)-1,C=E("length"),R=function(e){var t=C(e);return"number"==typeof t&&t>=0&&t<=T};w.each=w.forEach=function(e,t,r){t=k(t,r);var n,o;if(R(e))for(n=0,o=e.length;n<o;n++)t(e[n],n,e);else{var i=w.keys(e);for(n=0,o=i.length;n<o;n++)t(e[i[n]],i[n],e)}return e},w.map=w.collect=function(e,t,r){t=P(t,r);for(var n=!R(e)&&w.keys(e),o=(n||e).length,i=Array(o),a=0;a<o;a++){var s=n?n[a]:a;i[a]=t(e[s],s,e)}return i},w.reduce=w.foldl=w.inject=t(1),w.reduceRight=w.foldr=t(-1),w.find=w.detect=function(e,t,r){var n;if(void 0!==(n=R(e)?w.findIndex(e,t,r):w.findKey(e,t,r))&&-1!==n)return e[n]},w.filter=w.select=function(e,t,r){var n=[];return t=P(t,r),w.each(e,function(e,r,o){t(e,r,o)&&n.push(e)}),n},w.reject=function(e,t,r){return w.filter(e,w.negate(P(t)),r)},w.every=w.all=function(e,t,r){t=P(t,r);for(var n=!R(e)&&w.keys(e),o=(n||e).length,i=0;i<o;i++){var a=n?n[i]:i;if(!t(e[a],a,e))return!1}return!0},w.some=w.any=function(e,t,r){t=P(t,r);for(var n=!R(e)&&w.keys(e),o=(n||e).length,i=0;i<o;i++){var a=n?n[i]:i;if(t(e[a],a,e))return!0}return!1},w.contains=w.includes=w.include=function(e,t,r,n){return R(e)||(e=w.values(e)),("number"!=typeof r||n)&&(r=0),w.indexOf(e,t,r)>=0},w.invoke=function(e,t){var r=p.call(arguments,2),n=w.isFunction(t);return w.map(e,function(e){var o=n?t:e[t];return null==o?o:o.apply(e,r)})},w.pluck=function(e,t){return w.map(e,w.property(t))},w.where=function(e,t){return w.filter(e,w.matcher(t))},w.findWhere=function(e,t){return w.find(e,w.matcher(t))},w.max=function(e,t,r){var n,o,i=-1/0,a=-1/0;if(null==t&&null!=e){e=R(e)?e:w.values(e);for(var s=0,c=e.length;s<c;s++)(n=e[s])>i&&(i=n)}else t=P(t,r),w.each(e,function(e,r,n){((o=t(e,r,n))>a||o===-1/0&&i===-1/0)&&(i=e,a=o)});return i},w.min=function(e,t,r){var n,o,i=1/0,a=1/0;if(null==t&&null!=e){e=R(e)?e:w.values(e);for(var s=0,c=e.length;s<c;s++)(n=e[s])<i&&(i=n)}else t=P(t,r),w.each(e,function(e,r,n){((o=t(e,r,n))<a||o===1/0&&i===1/0)&&(i=e,a=o)});return i},w.shuffle=function(e){for(var t,r=R(e)?e:w.values(e),n=r.length,o=Array(n),i=0;i<n;i++)t=w.random(0,i),t!==i&&(o[i]=o[t]),o[t]=r[i];return o},w.sample=function(e,t,r){return null==t||r?(R(e)||(e=w.values(e)),e[w.random(e.length-1)]):w.shuffle(e).slice(0,Math.max(0,t))},w.sortBy=function(e,t,r){return t=P(t,r),w.pluck(w.map(e,function(e,r,n){return{value:e,index:r,criteria:t(e,r,n)}}).sort(function(e,t){var r=e.criteria,n=t.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return e.index-t.index}),"value")};var j=function(e){return function(t,r,n){var o={};return r=P(r,n),w.each(t,function(n,i){var a=r(n,i,t);e(o,n,a)}),o}};w.groupBy=j(function(e,t,r){w.has(e,r)?e[r].push(t):e[r]=[t]}),w.indexBy=j(function(e,t,r){e[r]=t}),w.countBy=j(function(e,t,r){w.has(e,r)?e[r]++:e[r]=1}),w.toArray=function(e){return e?w.isArray(e)?p.call(e):R(e)?w.map(e,w.identity):w.values(e):[]},w.size=function(e){return null==e?0:R(e)?e.length:w.keys(e).length},w.partition=function(e,t,r){t=P(t,r);var n=[],o=[];return w.each(e,function(e,r,i){(t(e,r,i)?n:o).push(e)}),[n,o]},w.first=w.head=w.take=function(e,t,r){if(null!=e)return null==t||r?e[0]:w.initial(e,e.length-t)},w.initial=function(e,t,r){return p.call(e,0,Math.max(0,e.length-(null==t||r?1:t)))},w.last=function(e,t,r){if(null!=e)return null==t||r?e[e.length-1]:w.rest(e,Math.max(0,e.length-t))},w.rest=w.tail=w.drop=function(e,t,r){return p.call(e,null==t||r?1:t)},w.compact=function(e){return w.filter(e,w.identity)};var O=function(e,t,r,n){for(var o=[],i=0,a=n||0,s=C(e);a<s;a++){var c=e[a];if(R(c)&&(w.isArray(c)||w.isArguments(c))){t||(c=O(c,t,r));var u=0,l=c.length;for(o.length+=l;u<l;)o[i++]=c[u++]}else r||(o[i++]=c)}return o};w.flatten=function(e,t){return O(e,t,!1)},w.without=function(e){return w.difference(e,p.call(arguments,1))},w.uniq=w.unique=function(e,t,r,n){w.isBoolean(t)||(n=r,r=t,t=!1),null!=r&&(r=P(r,n));for(var o=[],i=[],a=0,s=C(e);a<s;a++){var c=e[a],u=r?r(c,a,e):c;t?(a&&i===u||o.push(c),i=u):r?w.contains(i,u)||(i.push(u),o.push(c)):w.contains(o,c)||o.push(c)}return o},w.union=function(){return w.uniq(O(arguments,!0,!0))},w.intersection=function(e){for(var t=[],r=arguments.length,n=0,o=C(e);n<o;n++){var i=e[n];if(!w.contains(t,i)){for(var a=1;a<r&&w.contains(arguments[a],i);a++);a===r&&t.push(i)}}return t},w.difference=function(e){var t=O(arguments,!0,!0,1);return w.filter(e,function(e){return!w.contains(t,e)})},w.zip=function(){return w.unzip(arguments)},w.unzip=function(e){for(var t=e&&w.max(e,C).length||0,r=Array(t),n=0;n<t;n++)r[n]=w.pluck(e,n);return r},w.object=function(e,t){for(var r={},n=0,o=C(e);n<o;n++)t?r[e[n]]=t[n]:r[e[n][0]]=e[n][1];return r},w.findIndex=o(1),w.findLastIndex=o(-1),w.sortedIndex=function(e,t,r,n){r=P(r,n,1);for(var o=r(t),i=0,a=C(e);i<a;){var s=Math.floor((i+a)/2);r(e[s])<o?i=s+1:a=s}return i},w.indexOf=i(1,w.findIndex,w.sortedIndex),w.lastIndexOf=i(-1,w.findLastIndex),w.range=function(e,t,r){null==t&&(t=e||0,e=0),r=r||1;for(var n=Math.max(Math.ceil((t-e)/r),0),o=Array(n),i=0;i<n;i++,e+=r)o[i]=e;return o};var A=function(e,t,r,n,o){if(!(n instanceof t))return e.apply(r,o);var i=S(e.prototype),a=e.apply(i,o);return w.isObject(a)?a:i};w.bind=function(e,t){if(g&&e.bind===g)return g.apply(e,p.call(arguments,1));if(!w.isFunction(e))throw new TypeError("Bind must be called on a function");var r=p.call(arguments,2),n=function(){return A(e,n,t,this,r.concat(p.call(arguments)))};return n},w.partial=function(e){var t=p.call(arguments,1),r=function(){for(var n=0,o=t.length,i=Array(o),a=0;a<o;a++)i[a]=t[a]===w?arguments[n++]:t[a];for(;n<arguments.length;)i.push(arguments[n++]);return A(e,r,this,this,i)};return r},w.bindAll=function(e){var t,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(t=1;t<n;t++)r=arguments[t],e[r]=w.bind(e[r],e);return e},w.memoize=function(e,t){var r=function(n){var o=r.cache,i=""+(t?t.apply(this,arguments):n);return w.has(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return r.cache={},r},w.delay=function(e,t){var r=p.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},t)},w.defer=w.partial(w.delay,w,1),w.throttle=function(e,t,r){var n,o,i,a=null,s=0;r||(r={});var c=function(){s=!1===r.leading?0:w.now(),a=null,i=e.apply(n,o),a||(n=o=null)};return function(){var u=w.now();s||!1!==r.leading||(s=u);var l=t-(u-s);return n=this,o=arguments,l<=0||l>t?(a&&(clearTimeout(a),a=null),s=u,i=e.apply(n,o),a||(n=o=null)):a||!1===r.trailing||(a=setTimeout(c,l)),i}},w.debounce=function(e,t,r){var n,o,i,a,s,c=function(){var u=w.now()-a;u<t&&u>=0?n=setTimeout(c,t-u):(n=null,r||(s=e.apply(i,o),n||(i=o=null)))};return function(){i=this,o=arguments,a=w.now();var u=r&&!n;return n||(n=setTimeout(c,t)),u&&(s=e.apply(i,o),i=o=null),s}},w.wrap=function(e,t){return w.partial(t,e)},w.negate=function(e){return function(){return!e.apply(this,arguments)}},w.compose=function(){var e=arguments,t=e.length-1;return function(){for(var r=t,n=e[t].apply(this,arguments);r--;)n=e[r].call(this,n);return n}},w.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},w.before=function(e,t){var r;return function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=null),r}},w.once=w.partial(w.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];w.keys=function(e){if(!w.isObject(e))return[];if(y)return y(e);var t=[];for(var r in e)w.has(e,r)&&t.push(r);return D&&a(e,t),t},w.allKeys=function(e){if(!w.isObject(e))return[];var t=[];for(var r in e)t.push(r);return D&&a(e,t),t},w.values=function(e){for(var t=w.keys(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=e[t[o]];return n},w.mapObject=function(e,t,r){t=P(t,r);for(var n,o=w.keys(e),i=o.length,a={},s=0;s<i;s++)n=o[s],a[n]=t(e[n],n,e);return a},w.pairs=function(e){for(var t=w.keys(e),r=t.length,n=Array(r),o=0;o<r;o++)n[o]=[t[o],e[t[o]]];return n},w.invert=function(e){for(var t={},r=w.keys(e),n=0,o=r.length;n<o;n++)t[e[r[n]]]=r[n];return t},w.functions=w.methods=function(e){var t=[];for(var r in e)w.isFunction(e[r])&&t.push(r);return t.sort()},w.extend=x(w.allKeys),w.extendOwn=w.assign=x(w.keys),w.findKey=function(e,t,r){t=P(t,r);for(var n,o=w.keys(e),i=0,a=o.length;i<a;i++)if(n=o[i],t(e[n],n,e))return n},w.pick=function(e,t,r){var n,o,i={},a=e;if(null==a)return i;w.isFunction(t)?(o=w.allKeys(a),n=k(t,r)):(o=O(arguments,!1,!1,1),n=function(e,t,r){return t in r},a=Object(a));for(var s=0,c=o.length;s<c;s++){var u=o[s],l=a[u];n(l,u,a)&&(i[u]=l)}return i},w.omit=function(e,t,r){if(w.isFunction(t))t=w.negate(t);else{var n=w.map(O(arguments,!1,!1,1),String);t=function(e,t){return!w.contains(n,t)}}return w.pick(e,t,r)},w.defaults=x(w.allKeys,!0),w.create=function(e,t){var r=S(e);return t&&w.extendOwn(r,t),r},w.clone=function(e){return w.isObject(e)?w.isArray(e)?e.slice():w.extend({},e):e},w.tap=function(e,t){return t(e),e},w.isMatch=function(e,t){var r=w.keys(t),n=r.length;if(null==e)return!n;for(var o=Object(e),i=0;i<n;i++){var a=r[i];if(t[a]!==o[a]||!(a in o))return!1}return!0};var M=function(e,t,r,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof w&&(e=e._wrapped),t instanceof w&&(t=t._wrapped);var o=h.call(e);if(o!==h.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(w.isFunction(a)&&a instanceof a&&w.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],n=n||[];for(var c=r.length;c--;)if(r[c]===e)return n[c]===t;if(r.push(e),n.push(t),i){if((c=e.length)!==t.length)return!1;for(;c--;)if(!M(e[c],t[c],r,n))return!1}else{var u,l=w.keys(e);if(c=l.length,w.keys(t).length!==c)return!1;for(;c--;)if(u=l[c],!w.has(t,u)||!M(e[u],t[u],r,n))return!1}return r.pop(),n.pop(),!0};w.isEqual=function(e,t){return M(e,t)},w.isEmpty=function(e){return null==e||(R(e)&&(w.isArray(e)||w.isString(e)||w.isArguments(e))?0===e.length:0===w.keys(e).length)},w.isElement=function(e){return!(!e||1!==e.nodeType)},w.isArray=v||function(e){return"[object Array]"===h.call(e)},w.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},w.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){w["is"+e]=function(t){return h.call(t)==="[object "+e+"]"}}),w.isArguments(arguments)||(w.isArguments=function(e){return w.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(w.isFunction=function(e){return"function"==typeof e||!1}),w.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},w.isNaN=function(e){return w.isNumber(e)&&e!==+e},w.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===h.call(e)},w.isNull=function(e){return null===e},w.isUndefined=function(e){return void 0===e},w.has=function(e,t){return null!=e&&m.call(e,t)},w.noConflict=function(){return s._=c,this},w.identity=function(e){return e},w.constant=function(e){return function(){return e}},w.noop=function(){},w.property=E,w.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},w.matcher=w.matches=function(e){return e=w.extendOwn({},e),function(t){return w.isMatch(t,e)}},w.times=function(e,t,r){var n=Array(Math.max(0,e));t=k(t,r,1);for(var o=0;o<e;o++)n[o]=t(o);return n},w.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},w.now=Date.now||function(){return(new Date).getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},L=w.invert(N),F=function(e){var t=function(t){return e[t]},r="(?:"+w.keys(e).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}};w.escape=F(N),w.unescape=F(L),w.result=function(e,t,r){var n=null==e?void 0:e[t];return void 0===n&&(n=r),w.isFunction(n)?n.call(e):n};var U=0;w.uniqueId=function(e){var t=++U+"";return e?e+t:t},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var B=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g,H=function(e){return"\\"+q[e]};w.template=function(e,t,r){!t&&r&&(t=r),t=w.defaults({},t,w.templateSettings);var n=RegExp([(t.escape||B).source,(t.interpolate||B).source,(t.evaluate||B).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(n,function(t,r,n,a,s){return i+=e.slice(o,s).replace(W,H),o=s+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?i+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(e){throw e.source=i,e}var s=function(e){return a.call(this,e,w)};return s.source="function("+(t.variable||"obj")+"){\n"+i+"}",s},w.chain=function(e){var t=w(e);return t._chain=!0,t};var z=function(e,t){return e._chain?w(t).chain():t};w.mixin=function(e){w.each(w.functions(e),function(t){var r=w[t]=e[t];w.prototype[t]=function(){var e=[this._wrapped];return f.apply(e,arguments),z(this,r.apply(w,e))}})},w.mixin(w),w.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=u[e];w.prototype[e]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==e&&"splice"!==e||0!==r.length||delete r[0],z(this,r)}}),w.each(["concat","join","slice"],function(e){var t=u[e];w.prototype[e]=function(){return z(this,t.apply(this._wrapped,arguments))}}),w.prototype.value=function(){return this._wrapped},w.prototype.valueOf=w.prototype.toJSON=w.prototype.value,w.prototype.toString=function(){return""+this._wrapped},"function"==typeof e&&e.amd&&e("underscore",[],function(){return w})}).call(this)},{}],250:[function(e,t,r){t.exports=e("./lib/retry")},{"./lib/retry":251}],251:[function(e,t,r){var n=e("./retry_operation");r.operation=function(e){var t=r.timeouts(e);return new n(t,{forever:e&&e.forever,unref:e&&e.unref})},r.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],o=0;o<t.retries;o++)n.push(this.createTimeout(o,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(o,t)),n.sort(function(e,t){return e-t}),n},r.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*t.minTimeout*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},r.wrap=function(e,t,n){if(t instanceof Array&&(n=t,t=null),!n){n=[];for(var o in e)"function"==typeof e[o]&&n.push(o)}for(var i=0;i<n.length;i++){var a=n[i],s=e[a];e[a]=function(){var n=r.operation(t),o=Array.prototype.slice.call(arguments),i=o.pop();o.push(function(e){n.retry(e)||(e&&(arguments[0]=n.mainError()),i.apply(this,arguments))}),n.attempt(function(){s.apply(e,o)})},e[a].options=t}}},{"./retry_operation":252}],252:[function(e,t,r){function n(e,t){"boolean"==typeof t&&(t={forever:t}),this._timeouts=e,this._options=t||{},this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}t.exports=n,n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;this._errors.push(e);var t=this._timeouts.shift();if(void 0===t){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),t=this._timeouts.shift()}var r=this,n=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),this._options.unref&&r._timeout.unref()),r._fn(r._attempts)},t);return this._options.unref&&n.unref(),!0},n.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._fn(this._attempts)},n.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},n.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var o=this._errors[n],i=o.message,a=(e[i]||0)+1;e[i]=a,a>=r&&(t=o,r=a)}return t}},{}],253:[function(e,t,r){function n(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return a(e,t,r)}var i=e("buffer"),a=i.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(n(i,r),r.Buffer=o),n(a,o),o.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var n=a(e);return void 0!==t?"string"==typeof r?n.fill(t,r):n.fill(t):n.fill(0),n},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{buffer:55}],254:[function(e,t,r){var n=t.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w\/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-\.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%d trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))? (\S*)(?: (\S*))?/,names:["value","direction","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+" %s"+(e.config?" %s":"")}},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],
format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_\/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{push:"invalid",names:["value"]}]};Object.keys(n).forEach(function(e){n[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},{}],255:[function(e,t,r){var n=e("./parser"),o=e("./writer");r.write=o,r.parse=n.parse,r.parseFmtpConfig=n.parseFmtpConfig,r.parseParams=n.parseParams,r.parsePayloads=n.parsePayloads,r.parseRemoteCandidates=n.parseRemoteCandidates,r.parseImageAttributes=n.parseImageAttributes,r.parseSimulcastStreamList=n.parseSimulcastStreamList},{"./parser":256,"./writer":257}],256:[function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},o=function(e,t,r,o){if(o&&!r)t[o]=n(e[1]);else for(var i=0;i<r.length;i+=1)null!=e[i+1]&&(t[r[i]]=n(e[i+1]))},i=function(e,t,r){var n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var i=e.push?{}:n?t[e.name]:t;o(r.match(e.reg),i,e.names,e.name),e.push&&t[e.push].push(i)},a=e("./grammar"),s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);r.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(s).forEach(function(e){var t=e[0],o=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var s=0;s<(a[t]||[]).length;s+=1){var c=a[t][s];if(c.reg.test(o))return i(c,n,o)}}),t.media=r,t};var c=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length&&(e[r[0]]=n(r[1])),e};r.parseParams=function(e){return e.split(/\;\s?/).reduce(c,{})},r.parseFmtpConfig=r.parseParams,r.parsePayloads=function(e){return e.split(" ").map(Number)},r.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),o=0;o<r.length;o+=3)t.push({component:r[o],ip:r[o+1],port:r[o+2]});return t},r.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(c,{})})},r.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}})})}},{"./grammar":254}],257:[function(e,t,r){var n=e("./grammar"),o=/%[sdv%]/g,i=function(e){var t=1,r=arguments,n=r.length;return e.replace(o,function(e){if(t>=n)return e;var o=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},a=function(e,t,r){var n=t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format,o=[e+"="+n];if(t.names)for(var a=0;a<t.names.length;a+=1){var s=t.names[a];t.name?o.push(r[t.name][s]):o.push(r[t.names[a]])}else o.push(r[t.name]);return i.apply(null,o)},s=["v","o","s","i","u","e","p","c","b","t","r","z","a"],c=["i","c","b","a"];t.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var r=t.outerOrder||s,o=t.innerOrder||c,i=[];return r.forEach(function(t){n[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(a(t,r,e))})})}),e.media.forEach(function(e){i.push(a("m",n.m[0],e)),o.forEach(function(t){n[t].forEach(function(r){r.name in e&&null!=e[r.name]?i.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){i.push(a(t,r,e))})})})}),i.join("\r\n")+"\r\n"}},{"./grammar":254}],258:[function(e,t,r){(function(t){var n=e("./lib/request"),o=e("xtend"),i=e("builtin-status-codes"),a=e("url"),s=r;s.request=function(e,r){e="string"==typeof e?a.parse(e):o(e);var i=-1===t.location.protocol.search(/^https?:$/)?"http:":"",s=e.protocol||i,c=e.hostname||e.host,u=e.port,l=e.path||"/";c&&-1!==c.indexOf(":")&&(c="["+c+"]"),e.url=(c?s+"//"+c:"")+(u?":"+u:"")+l,e.method=(e.method||"GET").toUpperCase(),e.headers=e.headers||{};var d=new n(e);return r&&d.on("response",r),d},s.get=function(e,t){var r=s.request(e,t);return r.end(),r},s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.STATUS_CODES=i,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./lib/request":260,"builtin-status-codes":56,url:267,xtend:274}],259:[function(e,t,r){(function(e){function t(){if(void 0!==i)return i;if(e.XMLHttpRequest){i=new e.XMLHttpRequest;try{i.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){i=null}}else i=null;return i}function n(e){var r=t();if(!r)return!1;try{return r.responseType=e,r.responseType===e}catch(e){}return!1}function o(e){return"function"==typeof e}r.fetch=o(e.fetch)&&o(e.ReadableStream),r.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),r.blobConstructor=!0}catch(e){}var i,a=void 0!==e.ArrayBuffer,s=a&&o(e.ArrayBuffer.prototype.slice);r.arraybuffer=r.fetch||a&&n("arraybuffer"),r.msstream=!r.fetch&&s&&n("ms-stream"),r.mozchunkedarraybuffer=!r.fetch&&a&&n("moz-chunked-arraybuffer"),r.overrideMimeType=r.fetch||!!t()&&o(t().overrideMimeType),r.vbArray=o(e.VBArray),i=null}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],260:[function(e,t,r){(function(r,n,o){function i(e,t){return s.fetch&&t?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}function a(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var s=e("./capability"),c=e("inherits"),u=e("./response"),l=e("readable-stream"),d=e("to-arraybuffer"),f=u.IncomingMessage,p=u.readyStates,h=t.exports=function(e){var t=this;l.Writable.call(t),t._opts=e,t._body=[],t._headers={},e.auth&&t.setHeader("Authorization","Basic "+new o(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(r){t.setHeader(r,e.headers[r])});var r,n=!0;if("disable-fetch"===e.mode||"timeout"in e)n=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}t._mode=i(r,n),t.on("finish",function(){t._onFinish()})};c(h,l.Writable),h.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();-1===m.indexOf(n)&&(r._headers[n]={name:e,value:t})},h.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},h.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},h.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,i=e._headers,a=null;"GET"!==t.method&&"HEAD"!==t.method&&(a=s.blobConstructor?new n.Blob(e._body.map(function(e){return d(e)}),{type:(i["content-type"]||{}).value||""}):o.concat(e._body).toString());var c=[];if(Object.keys(i).forEach(function(e){var t=i[e].name,r=i[e].value;Array.isArray(r)?r.forEach(function(e){c.push([t,e])}):c.push([t,r])}),"fetch"===e._mode)n.fetch(e._opts.url,{method:e._opts.method,headers:c,body:a||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)});else{var u=e._xhr=new n.XMLHttpRequest;try{u.open(e._opts.method,e._opts.url,!0)}catch(t){return void r.nextTick(function(){e.emit("error",t)})}"responseType"in u&&(u.responseType=e._mode.split(":")[0]),"withCredentials"in u&&(u.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in u&&u.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in t&&(u.timeout=t.timeout,u.ontimeout=function(){e.emit("timeout")}),c.forEach(function(e){u.setRequestHeader(e[0],e[1])}),e._response=null,u.onreadystatechange=function(){switch(u.readyState){case p.LOADING:case p.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(u.onprogress=function(){e._onXHRProgress()}),u.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{u.send(a)}catch(t){return void r.nextTick(function(){e.emit("error",t)})}}}},h.prototype._onXHRProgress=function(){var e=this;a(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},h.prototype._connect=function(){var e=this;e._destroyed||(e._response=new f(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},h.prototype._write=function(e,t,r){this._body.push(e),r()},h.prototype.abort=h.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},h.prototype.end=function(e,t,r){var n=this;"function"==typeof e&&(r=e,e=void 0),l.Writable.prototype.end.call(n,e,t,r)},h.prototype.flushHeaders=function(){},h.prototype.setTimeout=function(){},h.prototype.setNoDelay=function(){},h.prototype.setSocketKeepAlive=function(){};var m=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":259,"./response":261,_process:204,buffer:55,inherits:161,"readable-stream":227,"to-arraybuffer":266}],261:[function(e,t,r){(function(t,n,o){var i=e("./capability"),a=e("inherits"),s=e("readable-stream"),c=r.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=r.IncomingMessage=function(e,r,n){function a(){u.read().then(function(e){if(!c._destroyed){if(e.done)return void c.push(null);c.push(new o(e.value)),a()}}).catch(function(e){c.emit("error",e)})}var c=this;if(s.Readable.call(c),c._mode=n,c.headers={},c.rawHeaders=[],c.trailers={},c.rawTrailers=[],c.on("end",function(){t.nextTick(function(){c.emit("close")})}),"fetch"===n){c._fetchResponse=r,c.url=r.url,c.statusCode=r.status,c.statusMessage=r.statusText,r.headers.forEach(function(e,t){c.headers[t.toLowerCase()]=e,c.rawHeaders.push(t,e)});var u=r.body.getReader();a()}else{c._xhr=e,c._pos=0,c.url=e.responseURL,c.statusCode=e.status,c.statusMessage=e.statusText;if(e.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===c.headers[r]&&(c.headers[r]=[]),c.headers[r].push(t[2])):void 0!==c.headers[r]?c.headers[r]+=", "+t[2]:c.headers[r]=t[2],c.rawHeaders.push(t[1],t[2])}}),c._charset="x-user-defined",!i.overrideMimeType){var l=c.rawHeaders["mime-type"];if(l){var d=l.match(/;\s*charset=([^;])(;|$)/);d&&(c._charset=d[1].toLowerCase())}c._charset||(c._charset="utf-8")}}};a(u,s.Readable),u.prototype._read=function(){},u.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==c.DONE)break;try{r=new n.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new o(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var i=r.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new o(i.length),s=0;s<i.length;s++)a[s]=255&i.charCodeAt(s);e.push(a)}else e.push(i,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==c.DONE||!t.response)break;r=t.response,e.push(new o(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==c.LOADING||!r)break;e.push(new o(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==c.LOADING)break;var u=new n.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(new o(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){e.push(null)},u.readAsArrayBuffer(r)}e._xhr.readyState===c.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"./capability":259,_process:204,buffer:55,inherits:161,"readable-stream":227}],262:[function(e,t,r){"use strict";function n(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=n(e);if("string"!=typeof t&&(g.isEncoding===b||!b(e)))throw new Error("Unknown encoding: "+e);return t||e}function i(e){this.encoding=o(e);var t;switch(this.encoding){case"utf16le":this.text=f,this.end=p,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=h,this.end=m,t=3;break;default:return this.write=v,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=g.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:-1}function s(e,t,r){var n=t.length-1;if(n<r)return 0;var o=a(t[n]);return o>=0?(o>0&&(e.lastNeed=o-1),o):--n<r?0:(o=a(t[n]))>=0?(o>0&&(e.lastNeed=o-2),o):--n<r?0:(o=a(t[n]),o>=0?(o>0&&(2===o?o=0:e.lastNeed=o-3),o):0)}function c(e,t,r){if(128!=(192&t[0]))return e.lastNeed=0,"�".repeat(r);if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�".repeat(r+1);if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�".repeat(r+2)}}function u(e){var t=this.lastTotal-this.lastNeed,r=c(this,e,t);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){var r=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�".repeat(this.lastTotal-this.lastNeed):t}function f(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function p(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function h(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function m(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function v(e){return e.toString(this.encoding)}function y(e){return e&&e.length?this.write(e):""}var g=e("safe-buffer").Buffer,b=g.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};r.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},i.prototype.end=d,i.prototype.text=l,i.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":253}],263:[function(e,t,r){t.exports=e("./lib/index")},{"./lib/index":264}],264:[function(e,t,r){(function(n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o,i=e("./ponyfill.js"),a=function(e){return e&&e.__esModule?e:{default:e}}(i);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:void 0!==t?t:Function("return this")();var s=(0,a.default)(o);r.default=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ponyfill.js":265}],265:[function(e,t,r){"use strict";function n(e){var t,r=e.Symbol;return"function"==typeof r?r.observable?t=r.observable:(t=r("observable"),r.observable=t):t="@@observable",t}Object.defineProperty(r,"__esModule",{value:!0}),r.default=n},{}],266:[function(e,t,r){var n=e("buffer").Buffer;t.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,o=0;o<r;o++)t[o]=e[o];return t.buffer}throw new Error("Argument must be a Buffer")}},{buffer:55}],267:[function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&u.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function i(e){return u.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return o(e,!1,!0).resolve(t)}function s(e,t){return e?o(e,!1,!0).resolveObject(t):t}var c=e("punycode"),u=e("./util");r.parse=o,r.resolve=a,r.resolveObject=s,r.format=i,r.Url=n;var l=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],h=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(h),v=["%","/","?",";","#"].concat(m),y=["/","?","#"],g=/^[+a-z0-9A-Z_-]{0,63}$/,b=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},P=e("querystring");n.prototype.parse=function(e,t,r){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",i=e.split(o),a=/\\/g;i[0]=i[0].replace(a,"/"),e=i.join(o);var s=e;if(s=s.trim(),!r&&1===e.split("#").length){var d=f.exec(s);if(d)return this.path=s,this.href=s,this.pathname=d[1],d[2]?(this.search=d[2],this.query=t?P.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=l.exec(s);if(p){p=p[0];var h=p.toLowerCase();this.protocol=h,s=s.substr(p.length)}if(r||p||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var x="//"===s.substr(0,2);!x||p&&w[p]||(s=s.substr(2),this.slashes=!0)}if(!w[p]&&(x||p&&!k[p])){for(var S=-1,E=0;E<y.length;E++){var T=s.indexOf(y[E]);-1!==T&&(-1===S||T<S)&&(S=T)}var C,R;R=-1===S?s.lastIndexOf("@"):s.lastIndexOf("@",S),-1!==R&&(C=s.slice(0,R),s=s.slice(R+1),this.auth=decodeURIComponent(C)),S=-1;for(var E=0;E<v.length;E++){var T=s.indexOf(v[E]);-1!==T&&(-1===S||T<S)&&(S=T)}-1===S&&(S=s.length),this.host=s.slice(0,S),s=s.slice(S),this.parseHost(),this.hostname=this.hostname||"";var j="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!j)for(var O=this.hostname.split(/\./),E=0,A=O.length;E<A;E++){var D=O[E];if(D&&!D.match(g)){for(var I="",M=0,N=D.length;M<N;M++)D.charCodeAt(M)>127?I+="x":I+=D[M];if(!I.match(g)){var L=O.slice(0,E),F=O.slice(E+1),U=D.match(b);U&&(L.push(U[1]),F.unshift(U[2])),F.length&&(s="/"+F.join(".")+s),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),j||(this.hostname=c.toASCII(this.hostname));var B=this.port?":"+this.port:"",q=this.hostname||"";this.host=q+B,this.href+=this.host,j&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!_[h])for(var E=0,A=m.length;E<A;E++){var W=m[E];if(-1!==s.indexOf(W)){var H=encodeURIComponent(W);H===W&&(H=escape(W)),s=s.split(W).join(H)}}var z=s.indexOf("#");-1!==z&&(this.hash=s.substr(z),s=s.slice(0,z));var G=s.indexOf("?");if(-1!==G?(this.search=s.substr(G),this.query=s.substr(G+1),t&&(this.query=P.parse(this.query)),s=s.slice(0,G)):t&&(this.search="",this.query={}),s&&(this.pathname=s),k[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",V=this.search||"";this.path=B+V}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,i="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(i=P.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+o+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,o=Object.keys(this),i=0;i<o.length;i++){var a=o[i];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),c=0;c<s.length;c++){var l=s[c];"protocol"!==l&&(r[l]=e[l])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||w[e.protocol])r.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),r.pathname=h.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var y=r.pathname&&"/"===r.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||y||r.host&&e.pathname,_=b,P=r.pathname&&r.pathname.split("/")||[],h=e.pathname&&e.pathname.split("/")||[],x=r.protocol&&!k[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(""===P[0]?P[0]=r.host:P.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),b=b&&(""===h[0]||""===P[0])),g)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,P=h;else if(h.length)P||(P=[]),P.pop(),P=P.concat(h),r.search=e.search,r.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(x){r.hostname=r.host=P.shift();var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return r.search=e.search,r.query=e.query,u.isNull(r.pathname)&&u.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!P.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var E=P.slice(-1)[0],T=(r.host||e.host||P.length>1)&&("."===E||".."===E)||""===E,C=0,R=P.length;R>=0;R--)E=P[R],"."===E?P.splice(R,1):".."===E?(P.splice(R,1),C++):C&&(P.splice(R,1),C--);if(!b&&!_)for(;C--;C)P.unshift("..");!b||""===P[0]||P[0]&&"/"===P[0].charAt(0)||P.unshift(""),T&&"/"!==P.join("/").substr(-1)&&P.push("");var j=""===P[0]||P[0]&&"/"===P[0].charAt(0);if(x){r.hostname=r.host=j?"":P.length?P.shift():"";var S=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");S&&(r.auth=S.shift(),r.host=r.hostname=S.shift())}return b=b||r.host&&P.length,b&&!j&&P.unshift(""),P.length?r.pathname=P.join("/"):(r.pathname=null,r.path=null),u.isNull(r.pathname)&&u.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":268,punycode:212,querystring:216}],268:[function(e,t,r){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],269:[function(e,t,r){(function(e){function r(e,t){function r(){if(!o){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),o=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var o=!1;return r}function n(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===String(r).toLowerCase()}t.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],270:[function(e,t,r){function n(e,t){return t?new i(e,t):new i(e)}var o=function(){return this}(),i=o.WebSocket||o.MozWebSocket,a=e("./version");i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(n,e,{get:function(){return i[e]}})}),t.exports={w3cwebsocket:i?n:null,version:a}},{"./version":271}],271:[function(e,t,r){t.exports=e("../package.json").version},{"../package.json":272}],272:[function(e,t,r){t.exports={_args:[["websocket@1.0.25","/home/alex/Desktop/JS/easy-mediasoup"]],_from:"websocket@1.0.25",_id:"websocket@1.0.25",_inBundle:!1,_integrity:"sha512-M58njvi6ZxVb5k7kpnHh2BvNKuBWiwIYvsToErBzWhvBZYwlEiLcyLrG41T1jRcrY9ettqPYEqduLI7ul54CVQ==",_location:"/websocket",_optional:!0,_phantomChildren:{ms:"2.0.0"},_requested:{type:"version",registry:!0,raw:"websocket@1.0.25",name:"websocket",escapedName:"websocket",rawSpec:"1.0.25",saveSpec:null,fetchSpec:"1.0.25"},_requiredBy:["/protoo-client"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.25.tgz",_spec:"1.0.25",_where:"/home/alex/Desktop/JS/easy-mediasoup",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"Iñaki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.25"}},{}],273:[function(e,t,r){function n(){}t.exports=n,n.mixin=function(e){var t=e.prototype||e;t.isWildEmitter=!0,t.on=function(e,t,r){this.callbacks=this.callbacks||{};var n=3===arguments.length,o=n?arguments[1]:void 0,i=n?arguments[2]:arguments[1];return i._groupName=o,(this.callbacks[e]=this.callbacks[e]||[]).push(i),this},t.once=function(e,t,r){function n(){o.off(e,n),s.apply(this,arguments)}var o=this,i=3===arguments.length,a=i?arguments[1]:void 0,s=i?arguments[2]:arguments[1];return this.on(e,a,n),this},t.releaseGroup=function(e){this.callbacks=this.callbacks||{};var t,r,n,o;for(t in this.callbacks)for(o=this.callbacks[t],r=0,n=o.length;r<n;r++)o[r]._groupName===e&&(o.splice(r,1),r--,n--);return this},t.off=function(e,t){this.callbacks=this.callbacks||{};var r,n=this.callbacks[e];return n?1===arguments.length?(delete this.callbacks[e],this):(r=n.indexOf(t),n.splice(r,1),0===n.length&&delete this.callbacks[e],this):this},t.emit=function(e){this.callbacks=this.callbacks||{};var t,r,n,o=[].slice.call(arguments,1),i=this.callbacks[e],a=this.getWildcardCallbacks(e);if(i)for(n=i.slice(),t=0,r=n.length;t<r&&n[t];++t)n[t].apply(this,o);if(a)for(r=a.length,n=a.slice(),t=0,r=n.length;t<r&&n[t];++t)n[t].apply(this,[e].concat(o));return this},t.getWildcardCallbacks=function(e){this.callbacks=this.callbacks||{};var t,r,n=[];for(t in this.callbacks)r=t.split("*"),("*"===t||2===r.length&&e.slice(0,r[0].length)===r[0])&&(n=n.concat(this.callbacks[t]));return n}},n.mixin(n)},{}],274:[function(e,t,r){function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)o.call(r,n)&&(e[n]=r[n])}return e}t.exports=n;var o=Object.prototype.hasOwnProperty},{}]},{},[3])(3)});